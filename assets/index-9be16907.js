(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function xf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _f={exports:{}},Qo={},wf={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ci=Symbol.for("react.element"),g0=Symbol.for("react.portal"),y0=Symbol.for("react.fragment"),v0=Symbol.for("react.strict_mode"),x0=Symbol.for("react.profiler"),_0=Symbol.for("react.provider"),w0=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),S0=Symbol.for("react.suspense"),E0=Symbol.for("react.memo"),C0=Symbol.for("react.lazy"),cd=Symbol.iterator;function N0(t){return t===null||typeof t!="object"?null:(t=cd&&t[cd]||t["@@iterator"],typeof t=="function"?t:null)}var kf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sf=Object.assign,Ef={};function qr(t,e,n){this.props=t,this.context=e,this.refs=Ef,this.updater=n||kf}qr.prototype.isReactComponent={};qr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cf(){}Cf.prototype=qr.prototype;function Tc(t,e,n){this.props=t,this.context=e,this.refs=Ef,this.updater=n||kf}var Ic=Tc.prototype=new Cf;Ic.constructor=Tc;Sf(Ic,qr.prototype);Ic.isPureReactComponent=!0;var ud=Array.isArray,Nf=Object.prototype.hasOwnProperty,jc={current:null},bf={key:!0,ref:!0,__self:!0,__source:!0};function Tf(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Nf.call(e,r)&&!bf.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ci,type:t,key:i,ref:o,props:s,_owner:jc.current}}function b0(t,e){return{$$typeof:ci,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ci}function T0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dd=/\/+/g;function El(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T0(""+t.key):e.toString(36)}function Vi(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ci:case g0:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+El(o,0):r,ud(s)?(n="",t!=null&&(n=t.replace(dd,"$&/")+"/"),Vi(s,e,n,"",function(u){return u})):s!=null&&(Rc(s)&&(s=b0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(dd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ud(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+El(i,l);o+=Vi(i,e,n,c,s)}else if(c=N0(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+El(i,l++),o+=Vi(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ei(t,e,n){if(t==null)return t;var r=[],s=0;return Vi(t,r,"","",function(i){return e.call(n,i,s++)}),r}function I0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ge={current:null},Hi={transition:null},j0={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:Hi,ReactCurrentOwner:jc};function If(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:Ei,forEach:function(t,e,n){Ei(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ei(t,function(){e++}),e},toArray:function(t){return Ei(t,function(e){return e})||[]},only:function(t){if(!Rc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=qr;B.Fragment=y0;B.Profiler=x0;B.PureComponent=Tc;B.StrictMode=v0;B.Suspense=S0;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j0;B.act=If;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sf({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Nf.call(e,c)&&!bf.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ci,type:t.type,key:s,ref:i,props:r,_owner:o}};B.createContext=function(t){return t={$$typeof:w0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_0,_context:t},t.Consumer=t};B.createElement=Tf;B.createFactory=function(t){var e=Tf.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:k0,render:t}};B.isValidElement=Rc;B.lazy=function(t){return{$$typeof:C0,_payload:{_status:-1,_result:t},_init:I0}};B.memo=function(t,e){return{$$typeof:E0,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=Hi.transition;Hi.transition={};try{t()}finally{Hi.transition=e}};B.unstable_act=If;B.useCallback=function(t,e){return Ge.current.useCallback(t,e)};B.useContext=function(t){return Ge.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return Ge.current.useDeferredValue(t)};B.useEffect=function(t,e){return Ge.current.useEffect(t,e)};B.useId=function(){return Ge.current.useId()};B.useImperativeHandle=function(t,e,n){return Ge.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return Ge.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return Ge.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return Ge.current.useMemo(t,e)};B.useReducer=function(t,e,n){return Ge.current.useReducer(t,e,n)};B.useRef=function(t){return Ge.current.useRef(t)};B.useState=function(t){return Ge.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return Ge.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return Ge.current.useTransition()};B.version="18.3.1";wf.exports=B;var k=wf.exports;const Mc=xf(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0=k,M0=Symbol.for("react.element"),P0=Symbol.for("react.fragment"),D0=Object.prototype.hasOwnProperty,A0=R0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O0={key:!0,ref:!0,__self:!0,__source:!0};function jf(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)D0.call(e,r)&&!O0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:M0,type:t,key:i,ref:o,props:s,_owner:A0.current}}Qo.Fragment=P0;Qo.jsx=jf;Qo.jsxs=jf;_f.exports=Qo;var a=_f.exports,aa={},Rf={exports:{}},at={},Mf={exports:{}},Pf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(v,S){var b=v.length;v.push(S);e:for(;0<b;){var A=b-1>>>1,U=v[A];if(0<s(U,S))v[A]=S,v[b]=U,b=A;else break e}}function n(v){return v.length===0?null:v[0]}function r(v){if(v.length===0)return null;var S=v[0],b=v.pop();if(b!==S){v[0]=b;e:for(var A=0,U=v.length,le=U>>>1;A<le;){var $=2*(A+1)-1,Ce=v[$],me=$+1,jt=v[me];if(0>s(Ce,b))me<U&&0>s(jt,Ce)?(v[A]=jt,v[me]=b,A=me):(v[A]=Ce,v[$]=b,A=$);else if(me<U&&0>s(jt,b))v[A]=jt,v[me]=b,A=me;else break e}}return S}function s(v,S){var b=v.sortIndex-S.sortIndex;return b!==0?b:v.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,y=!1,x=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(v){for(var S=n(u);S!==null;){if(S.callback===null)r(u);else if(S.startTime<=v)r(u),S.sortIndex=S.expirationTime,e(c,S);else break;S=n(u)}}function w(v){if(_=!1,g(v),!x)if(n(c)!==null)x=!0,Qe(E);else{var S=n(u);S!==null&&pe(w,S.startTime-v)}}function E(v,S){x=!1,_&&(_=!1,p(I),I=-1),y=!0;var b=f;try{for(g(S),d=n(c);d!==null&&(!(d.expirationTime>S)||v&&!q());){var A=d.callback;if(typeof A=="function"){d.callback=null,f=d.priorityLevel;var U=A(d.expirationTime<=S);S=t.unstable_now(),typeof U=="function"?d.callback=U:d===n(c)&&r(c),g(S)}else r(c);d=n(c)}if(d!==null)var le=!0;else{var $=n(u);$!==null&&pe(w,$.startTime-S),le=!1}return le}finally{d=null,f=b,y=!1}}var j=!1,R=null,I=-1,W=5,D=-1;function q(){return!(t.unstable_now()-D<W)}function se(){if(R!==null){var v=t.unstable_now();D=v;var S=!0;try{S=R(!0,v)}finally{S?Ae():(j=!1,R=null)}}else j=!1}var Ae;if(typeof m=="function")Ae=function(){m(se)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,rt=nt.port2;nt.port1.onmessage=se,Ae=function(){rt.postMessage(null)}}else Ae=function(){N(se,0)};function Qe(v){R=v,j||(j=!0,Ae())}function pe(v,S){I=N(function(){v(t.unstable_now())},S)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(v){v.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,Qe(E))},t.unstable_forceFrameRate=function(v){0>v||125<v?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<v?Math.floor(1e3/v):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(v){switch(f){case 1:case 2:case 3:var S=3;break;default:S=f}var b=f;f=S;try{return v()}finally{f=b}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(v,S){switch(v){case 1:case 2:case 3:case 4:case 5:break;default:v=3}var b=f;f=v;try{return S()}finally{f=b}},t.unstable_scheduleCallback=function(v,S,b){var A=t.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?A+b:A):b=A,v){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=b+U,v={id:h++,callback:S,priorityLevel:v,startTime:b,expirationTime:U,sortIndex:-1},b>A?(v.sortIndex=b,e(u,v),n(c)===null&&v===n(u)&&(_?(p(I),I=-1):_=!0,pe(w,b-A))):(v.sortIndex=U,e(c,v),x||y||(x=!0,Qe(E))),v},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(v){var S=f;return function(){var b=f;f=S;try{return v.apply(this,arguments)}finally{f=b}}}})(Pf);Mf.exports=Pf;var L0=Mf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0=k,lt=L0;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Df=new Set,Os={};function or(t,e){Or(t,e),Or(t+"Capture",e)}function Or(t,e){for(Os[t]=e,t=0;t<e.length;t++)Df.add(e[t])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ca=Object.prototype.hasOwnProperty,z0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hd={},fd={};function $0(t){return ca.call(fd,t)?!0:ca.call(hd,t)?!1:z0.test(t)?fd[t]=!0:(hd[t]=!0,!1)}function B0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W0(t,e,n,r){if(e===null||typeof e>"u"||B0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){De[t]=new Ye(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];De[e]=new Ye(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){De[t]=new Ye(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){De[t]=new Ye(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){De[t]=new Ye(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){De[t]=new Ye(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){De[t]=new Ye(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){De[t]=new Ye(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){De[t]=new Ye(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pc=/[\-:]([a-z])/g;function Dc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pc,Dc);De[e]=new Ye(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pc,Dc);De[e]=new Ye(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pc,Dc);De[e]=new Ye(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){De[t]=new Ye(t,1,!1,t.toLowerCase(),null,!1,!1)});De.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){De[t]=new Ye(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ac(t,e,n,r){var s=De.hasOwnProperty(e)?De[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(W0(e,n,s,r)&&(n=null),r||s===null?$0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var tn=F0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ci=Symbol.for("react.element"),fr=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),Oc=Symbol.for("react.strict_mode"),ua=Symbol.for("react.profiler"),Af=Symbol.for("react.provider"),Of=Symbol.for("react.context"),Lc=Symbol.for("react.forward_ref"),da=Symbol.for("react.suspense"),ha=Symbol.for("react.suspense_list"),Fc=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),Lf=Symbol.for("react.offscreen"),pd=Symbol.iterator;function os(t){return t===null||typeof t!="object"?null:(t=pd&&t[pd]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,Cl;function vs(t){if(Cl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cl=e&&e[1]||""}return`
`+Cl+t}var Nl=!1;function bl(t,e){if(!t||Nl)return"";Nl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Nl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vs(t):""}function U0(t){switch(t.tag){case 5:return vs(t.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 2:case 15:return t=bl(t.type,!1),t;case 11:return t=bl(t.type.render,!1),t;case 1:return t=bl(t.type,!0),t;default:return""}}function fa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pr:return"Fragment";case fr:return"Portal";case ua:return"Profiler";case Oc:return"StrictMode";case da:return"Suspense";case ha:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Of:return(t.displayName||"Context")+".Consumer";case Af:return(t._context.displayName||"Context")+".Provider";case Lc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fc:return e=t.displayName||null,e!==null?e:fa(t.type)||"Memo";case on:e=t._payload,t=t._init;try{return fa(t(e))}catch{}}return null}function V0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fa(e);case 8:return e===Oc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ff(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function H0(t){var e=Ff(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ni(t){t._valueTracker||(t._valueTracker=H0(t))}function zf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ff(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function no(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pa(t,e){var n=e.checked;return fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function md(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $f(t,e){e=e.checked,e!=null&&Ac(t,"checked",e,!1)}function ma(t,e){$f(t,e);var n=bn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ga(t,e.type,n):e.hasOwnProperty("defaultValue")&&ga(t,e.type,bn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ga(t,e,n){(e!=="number"||no(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xs=Array.isArray;function Nr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ya(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(C(92));if(xs(n)){if(1<n.length)throw Error(C(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bn(n)}}function Bf(t,e){var n=bn(e.value),r=bn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Wf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function va(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Wf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bi,Uf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bi=bi||document.createElement("div"),bi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ls(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G0=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(t){G0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ks[e]=ks[t]})});function Vf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ks.hasOwnProperty(t)&&ks[t]?(""+e).trim():e+"px"}function Hf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Vf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Y0=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xa(t,e){if(e){if(Y0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function _a(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wa=null;function zc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ka=null,br=null,Tr=null;function xd(t){if(t=hi(t)){if(typeof ka!="function")throw Error(C(280));var e=t.stateNode;e&&(e=Zo(e),ka(t.stateNode,t.type,e))}}function Gf(t){br?Tr?Tr.push(t):Tr=[t]:br=t}function Yf(){if(br){var t=br,e=Tr;if(Tr=br=null,xd(t),e)for(t=0;t<e.length;t++)xd(e[t])}}function Qf(t,e){return t(e)}function Kf(){}var Tl=!1;function Xf(t,e,n){if(Tl)return t(e,n);Tl=!0;try{return Qf(t,e,n)}finally{Tl=!1,(br!==null||Tr!==null)&&(Kf(),Yf())}}function Fs(t,e){var n=t.stateNode;if(n===null)return null;var r=Zo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(C(231,e,typeof n));return n}var Sa=!1;if(Kt)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{Sa=!1}function Q0(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Ss=!1,ro=null,so=!1,Ea=null,K0={onError:function(t){Ss=!0,ro=t}};function X0(t,e,n,r,s,i,o,l,c){Ss=!1,ro=null,Q0.apply(K0,arguments)}function q0(t,e,n,r,s,i,o,l,c){if(X0.apply(this,arguments),Ss){if(Ss){var u=ro;Ss=!1,ro=null}else throw Error(C(198));so||(so=!0,Ea=u)}}function lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _d(t){if(lr(t)!==t)throw Error(C(188))}function J0(t){var e=t.alternate;if(!e){if(e=lr(t),e===null)throw Error(C(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return _d(s),t;if(i===r)return _d(s),e;i=i.sibling}throw Error(C(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?t:e}function Jf(t){return t=J0(t),t!==null?Zf(t):null}function Zf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zf(t);if(e!==null)return e;t=t.sibling}return null}var ep=lt.unstable_scheduleCallback,wd=lt.unstable_cancelCallback,Z0=lt.unstable_shouldYield,ey=lt.unstable_requestPaint,xe=lt.unstable_now,ty=lt.unstable_getCurrentPriorityLevel,$c=lt.unstable_ImmediatePriority,tp=lt.unstable_UserBlockingPriority,io=lt.unstable_NormalPriority,ny=lt.unstable_LowPriority,np=lt.unstable_IdlePriority,Ko=null,Lt=null;function ry(t){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Ko,t,void 0,(t.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:oy,sy=Math.log,iy=Math.LN2;function oy(t){return t>>>=0,t===0?32:31-(sy(t)/iy|0)|0}var Ti=64,Ii=4194304;function _s(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=_s(l):(i&=o,i!==0&&(r=_s(i)))}else o=n&~s,o!==0?r=_s(o):i!==0&&(r=_s(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nt(e),s=1<<n,r|=t[n],e&=~s;return r}function ly(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ay(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Nt(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=ly(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Ca(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rp(){var t=Ti;return Ti<<=1,!(Ti&4194240)&&(Ti=64),t}function Il(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ui(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nt(e),t[e]=n}function cy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Nt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Bc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var X=0;function sp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ip,Wc,op,lp,ap,Na=!1,ji=[],pn=null,mn=null,gn=null,zs=new Map,$s=new Map,an=[],uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kd(t,e){switch(t){case"focusin":case"focusout":pn=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":zs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(e.pointerId)}}function as(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=hi(e),e!==null&&Wc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dy(t,e,n,r,s){switch(e){case"focusin":return pn=as(pn,t,e,n,r,s),!0;case"dragenter":return mn=as(mn,t,e,n,r,s),!0;case"mouseover":return gn=as(gn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return zs.set(i,as(zs.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,$s.set(i,as($s.get(i)||null,t,e,n,r,s)),!0}return!1}function cp(t){var e=Wn(t.target);if(e!==null){var n=lr(e);if(n!==null){if(e=n.tag,e===13){if(e=qf(n),e!==null){t.blockedOn=e,ap(t.priority,function(){op(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ba(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wa=r,n.target.dispatchEvent(r),wa=null}else return e=hi(n),e!==null&&Wc(e),t.blockedOn=n,!1;e.shift()}return!0}function Sd(t,e,n){Gi(t)&&n.delete(e)}function hy(){Na=!1,pn!==null&&Gi(pn)&&(pn=null),mn!==null&&Gi(mn)&&(mn=null),gn!==null&&Gi(gn)&&(gn=null),zs.forEach(Sd),$s.forEach(Sd)}function cs(t,e){t.blockedOn===e&&(t.blockedOn=null,Na||(Na=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,hy)))}function Bs(t){function e(s){return cs(s,t)}if(0<ji.length){cs(ji[0],t);for(var n=1;n<ji.length;n++){var r=ji[n];r.blockedOn===t&&(r.blockedOn=null)}}for(pn!==null&&cs(pn,t),mn!==null&&cs(mn,t),gn!==null&&cs(gn,t),zs.forEach(e),$s.forEach(e),n=0;n<an.length;n++)r=an[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)cp(n),n.blockedOn===null&&an.shift()}var Ir=tn.ReactCurrentBatchConfig,lo=!0;function fy(t,e,n,r){var s=X,i=Ir.transition;Ir.transition=null;try{X=1,Uc(t,e,n,r)}finally{X=s,Ir.transition=i}}function py(t,e,n,r){var s=X,i=Ir.transition;Ir.transition=null;try{X=4,Uc(t,e,n,r)}finally{X=s,Ir.transition=i}}function Uc(t,e,n,r){if(lo){var s=ba(t,e,n,r);if(s===null)zl(t,e,r,ao,n),kd(t,r);else if(dy(s,t,e,n,r))r.stopPropagation();else if(kd(t,r),e&4&&-1<uy.indexOf(t)){for(;s!==null;){var i=hi(s);if(i!==null&&ip(i),i=ba(t,e,n,r),i===null&&zl(t,e,r,ao,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else zl(t,e,r,null,n)}}var ao=null;function ba(t,e,n,r){if(ao=null,t=zc(r),t=Wn(t),t!==null)if(e=lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ao=t,null}function up(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ty()){case $c:return 1;case tp:return 4;case io:case ny:return 16;case np:return 536870912;default:return 16}default:return 16}}var un=null,Vc=null,Yi=null;function dp(){if(Yi)return Yi;var t,e=Vc,n=e.length,r,s="value"in un?un.value:un.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Yi=s.slice(t,1<r?1-r:void 0)}function Qi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ri(){return!0}function Ed(){return!1}function ct(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ri:Ed,this.isPropagationStopped=Ed,this}return fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),e}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hc=ct(Jr),di=fe({},Jr,{view:0,detail:0}),my=ct(di),jl,Rl,us,Xo=fe({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==us&&(us&&t.type==="mousemove"?(jl=t.screenX-us.screenX,Rl=t.screenY-us.screenY):Rl=jl=0,us=t),jl)},movementY:function(t){return"movementY"in t?t.movementY:Rl}}),Cd=ct(Xo),gy=fe({},Xo,{dataTransfer:0}),yy=ct(gy),vy=fe({},di,{relatedTarget:0}),Ml=ct(vy),xy=fe({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),_y=ct(xy),wy=fe({},Jr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ky=ct(wy),Sy=fe({},Jr,{data:0}),Nd=ct(Sy),Ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ny={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function by(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ny[t])?!!e[t]:!1}function Gc(){return by}var Ty=fe({},di,{key:function(t){if(t.key){var e=Ey[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gc,charCode:function(t){return t.type==="keypress"?Qi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Iy=ct(Ty),jy=fe({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=ct(jy),Ry=fe({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gc}),My=ct(Ry),Py=fe({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dy=ct(Py),Ay=fe({},Xo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Oy=ct(Ay),Ly=[9,13,27,32],Yc=Kt&&"CompositionEvent"in window,Es=null;Kt&&"documentMode"in document&&(Es=document.documentMode);var Fy=Kt&&"TextEvent"in window&&!Es,hp=Kt&&(!Yc||Es&&8<Es&&11>=Es),Td=String.fromCharCode(32),Id=!1;function fp(t,e){switch(t){case"keyup":return Ly.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mr=!1;function zy(t,e){switch(t){case"compositionend":return pp(e);case"keypress":return e.which!==32?null:(Id=!0,Td);case"textInput":return t=e.data,t===Td&&Id?null:t;default:return null}}function $y(t,e){if(mr)return t==="compositionend"||!Yc&&fp(t,e)?(t=dp(),Yi=Vc=un=null,mr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hp&&e.locale!=="ko"?null:e.data;default:return null}}var By={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!By[t.type]:e==="textarea"}function mp(t,e,n,r){Gf(r),e=co(e,"onChange"),0<e.length&&(n=new Hc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cs=null,Ws=null;function Wy(t){Np(t,0)}function qo(t){var e=vr(t);if(zf(e))return t}function Uy(t,e){if(t==="change")return e}var gp=!1;if(Kt){var Pl;if(Kt){var Dl="oninput"in document;if(!Dl){var Rd=document.createElement("div");Rd.setAttribute("oninput","return;"),Dl=typeof Rd.oninput=="function"}Pl=Dl}else Pl=!1;gp=Pl&&(!document.documentMode||9<document.documentMode)}function Md(){Cs&&(Cs.detachEvent("onpropertychange",yp),Ws=Cs=null)}function yp(t){if(t.propertyName==="value"&&qo(Ws)){var e=[];mp(e,Ws,t,zc(t)),Xf(Wy,e)}}function Vy(t,e,n){t==="focusin"?(Md(),Cs=e,Ws=n,Cs.attachEvent("onpropertychange",yp)):t==="focusout"&&Md()}function Hy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qo(Ws)}function Gy(t,e){if(t==="click")return qo(e)}function Yy(t,e){if(t==="input"||t==="change")return qo(e)}function Qy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var It=typeof Object.is=="function"?Object.is:Qy;function Us(t,e){if(It(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ca.call(e,s)||!It(t[s],e[s]))return!1}return!0}function Pd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dd(t,e){var n=Pd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pd(n)}}function vp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xp(){for(var t=window,e=no();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=no(t.document)}return e}function Qc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ky(t){var e=xp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vp(n.ownerDocument.documentElement,n)){if(r!==null&&Qc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Dd(n,i);var o=Dd(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xy=Kt&&"documentMode"in document&&11>=document.documentMode,gr=null,Ta=null,Ns=null,Ia=!1;function Ad(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ia||gr==null||gr!==no(r)||(r=gr,"selectionStart"in r&&Qc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ns&&Us(Ns,r)||(Ns=r,r=co(Ta,"onSelect"),0<r.length&&(e=new Hc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function Mi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yr={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionend:Mi("Transition","TransitionEnd")},Al={},_p={};Kt&&(_p=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Jo(t){if(Al[t])return Al[t];if(!yr[t])return t;var e=yr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _p)return Al[t]=e[n];return t}var wp=Jo("animationend"),kp=Jo("animationiteration"),Sp=Jo("animationstart"),Ep=Jo("transitionend"),Cp=new Map,Od="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(t,e){Cp.set(t,e),or(e,[t])}for(var Ol=0;Ol<Od.length;Ol++){var Ll=Od[Ol],qy=Ll.toLowerCase(),Jy=Ll[0].toUpperCase()+Ll.slice(1);Dn(qy,"on"+Jy)}Dn(wp,"onAnimationEnd");Dn(kp,"onAnimationIteration");Dn(Sp,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(Ep,"onTransitionEnd");Or("onMouseEnter",["mouseout","mouseover"]);Or("onMouseLeave",["mouseout","mouseover"]);Or("onPointerEnter",["pointerout","pointerover"]);Or("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zy=new Set("cancel close invalid load scroll toggle".split(" ").concat(ws));function Ld(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,q0(r,e,void 0,t),t.currentTarget=null}function Np(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ld(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ld(s,l,u),i=c}}}if(so)throw t=Ea,so=!1,Ea=null,t}function ie(t,e){var n=e[Da];n===void 0&&(n=e[Da]=new Set);var r=t+"__bubble";n.has(r)||(bp(e,t,2,!1),n.add(r))}function Fl(t,e,n){var r=0;e&&(r|=4),bp(n,t,r,e)}var Pi="_reactListening"+Math.random().toString(36).slice(2);function Vs(t){if(!t[Pi]){t[Pi]=!0,Df.forEach(function(n){n!=="selectionchange"&&(Zy.has(n)||Fl(n,!1,t),Fl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pi]||(e[Pi]=!0,Fl("selectionchange",!1,e))}}function bp(t,e,n,r){switch(up(e)){case 1:var s=fy;break;case 4:s=py;break;default:s=Uc}n=s.bind(null,e,n,t),s=void 0,!Sa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function zl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Wn(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Xf(function(){var u=i,h=zc(n),d=[];e:{var f=Cp.get(t);if(f!==void 0){var y=Hc,x=t;switch(t){case"keypress":if(Qi(n)===0)break e;case"keydown":case"keyup":y=Iy;break;case"focusin":x="focus",y=Ml;break;case"focusout":x="blur",y=Ml;break;case"beforeblur":case"afterblur":y=Ml;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=yy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=My;break;case wp:case kp:case Sp:y=_y;break;case Ep:y=Dy;break;case"scroll":y=my;break;case"wheel":y=Oy;break;case"copy":case"cut":case"paste":y=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=bd}var _=(e&4)!==0,N=!_&&t==="scroll",p=_?f!==null?f+"Capture":null:f;_=[];for(var m=u,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=Fs(m,p),w!=null&&_.push(Hs(m,w,g)))),N)break;m=m.return}0<_.length&&(f=new y(f,x,null,n,h),d.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==wa&&(x=n.relatedTarget||n.fromElement)&&(Wn(x)||x[Xt]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=u,x=x?Wn(x):null,x!==null&&(N=lr(x),x!==N||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(_=Cd,w="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(_=bd,w="onPointerLeave",p="onPointerEnter",m="pointer"),N=y==null?f:vr(y),g=x==null?f:vr(x),f=new _(w,m+"leave",y,n,h),f.target=N,f.relatedTarget=g,w=null,Wn(h)===u&&(_=new _(p,m+"enter",x,n,h),_.target=g,_.relatedTarget=N,w=_),N=w,y&&x)t:{for(_=y,p=x,m=0,g=_;g;g=ur(g))m++;for(g=0,w=p;w;w=ur(w))g++;for(;0<m-g;)_=ur(_),m--;for(;0<g-m;)p=ur(p),g--;for(;m--;){if(_===p||p!==null&&_===p.alternate)break t;_=ur(_),p=ur(p)}_=null}else _=null;y!==null&&Fd(d,f,y,_,!1),x!==null&&N!==null&&Fd(d,N,x,_,!0)}}e:{if(f=u?vr(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var E=Uy;else if(jd(f))if(gp)E=Yy;else{E=Hy;var j=Vy}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Gy);if(E&&(E=E(t,u))){mp(d,E,n,h);break e}j&&j(t,f,u),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&ga(f,"number",f.value)}switch(j=u?vr(u):window,t){case"focusin":(jd(j)||j.contentEditable==="true")&&(gr=j,Ta=u,Ns=null);break;case"focusout":Ns=Ta=gr=null;break;case"mousedown":Ia=!0;break;case"contextmenu":case"mouseup":case"dragend":Ia=!1,Ad(d,n,h);break;case"selectionchange":if(Xy)break;case"keydown":case"keyup":Ad(d,n,h)}var R;if(Yc)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else mr?fp(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(hp&&n.locale!=="ko"&&(mr||I!=="onCompositionStart"?I==="onCompositionEnd"&&mr&&(R=dp()):(un=h,Vc="value"in un?un.value:un.textContent,mr=!0)),j=co(u,I),0<j.length&&(I=new Nd(I,t,null,n,h),d.push({event:I,listeners:j}),R?I.data=R:(R=pp(n),R!==null&&(I.data=R)))),(R=Fy?zy(t,n):$y(t,n))&&(u=co(u,"onBeforeInput"),0<u.length&&(h=new Nd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=R))}Np(d,e)})}function Hs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function co(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fs(t,n),i!=null&&r.unshift(Hs(t,i,s)),i=Fs(t,e),i!=null&&r.push(Hs(t,i,s))),t=t.return}return r}function ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fd(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Fs(n,i),c!=null&&o.unshift(Hs(n,c,l))):s||(c=Fs(n,i),c!=null&&o.push(Hs(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ev=/\r\n?/g,tv=/\u0000|\uFFFD/g;function zd(t){return(typeof t=="string"?t:""+t).replace(ev,`
`).replace(tv,"")}function Di(t,e,n){if(e=zd(e),zd(t)!==e&&n)throw Error(C(425))}function uo(){}var ja=null,Ra=null;function Ma(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pa=typeof setTimeout=="function"?setTimeout:void 0,nv=typeof clearTimeout=="function"?clearTimeout:void 0,$d=typeof Promise=="function"?Promise:void 0,rv=typeof queueMicrotask=="function"?queueMicrotask:typeof $d<"u"?function(t){return $d.resolve(null).then(t).catch(sv)}:Pa;function sv(t){setTimeout(function(){throw t})}function $l(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bs(e)}function yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Bd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zr=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Zr,Gs="__reactProps$"+Zr,Xt="__reactContainer$"+Zr,Da="__reactEvents$"+Zr,iv="__reactListeners$"+Zr,ov="__reactHandles$"+Zr;function Wn(t){var e=t[Dt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xt]||n[Dt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Bd(t);t!==null;){if(n=t[Dt])return n;t=Bd(t)}return e}t=n,n=t.parentNode}return null}function hi(t){return t=t[Dt]||t[Xt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function Zo(t){return t[Gs]||null}var Aa=[],xr=-1;function An(t){return{current:t}}function oe(t){0>xr||(t.current=Aa[xr],Aa[xr]=null,xr--)}function re(t,e){xr++,Aa[xr]=t.current,t.current=e}var Tn={},ze=An(Tn),Ze=An(!1),Jn=Tn;function Lr(t,e){var n=t.type.contextTypes;if(!n)return Tn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function et(t){return t=t.childContextTypes,t!=null}function ho(){oe(Ze),oe(ze)}function Wd(t,e,n){if(ze.current!==Tn)throw Error(C(168));re(ze,e),re(Ze,n)}function Tp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(C(108,V0(t)||"Unknown",s));return fe({},n,r)}function fo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tn,Jn=ze.current,re(ze,t),re(Ze,Ze.current),!0}function Ud(t,e,n){var r=t.stateNode;if(!r)throw Error(C(169));n?(t=Tp(t,e,Jn),r.__reactInternalMemoizedMergedChildContext=t,oe(Ze),oe(ze),re(ze,t)):oe(Ze),re(Ze,n)}var Wt=null,el=!1,Bl=!1;function Ip(t){Wt===null?Wt=[t]:Wt.push(t)}function lv(t){el=!0,Ip(t)}function On(){if(!Bl&&Wt!==null){Bl=!0;var t=0,e=X;try{var n=Wt;for(X=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wt=null,el=!1}catch(s){throw Wt!==null&&(Wt=Wt.slice(t+1)),ep($c,On),s}finally{X=e,Bl=!1}}return null}var _r=[],wr=0,po=null,mo=0,ut=[],dt=0,Zn=null,Vt=1,Ht="";function Fn(t,e){_r[wr++]=mo,_r[wr++]=po,po=t,mo=e}function jp(t,e,n){ut[dt++]=Vt,ut[dt++]=Ht,ut[dt++]=Zn,Zn=t;var r=Vt;t=Ht;var s=32-Nt(r)-1;r&=~(1<<s),n+=1;var i=32-Nt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vt=1<<32-Nt(e)+s|n<<s|r,Ht=i+t}else Vt=1<<i|n<<s|r,Ht=t}function Kc(t){t.return!==null&&(Fn(t,1),jp(t,1,0))}function Xc(t){for(;t===po;)po=_r[--wr],_r[wr]=null,mo=_r[--wr],_r[wr]=null;for(;t===Zn;)Zn=ut[--dt],ut[dt]=null,Ht=ut[--dt],ut[dt]=null,Vt=ut[--dt],ut[dt]=null}var ot=null,it=null,ae=!1,kt=null;function Rp(t,e){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ot=t,it=yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ot=t,it=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zn!==null?{id:Vt,overflow:Ht}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ot=t,it=null,!0):!1;default:return!1}}function Oa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function La(t){if(ae){var e=it;if(e){var n=e;if(!Vd(t,e)){if(Oa(t))throw Error(C(418));e=yn(n.nextSibling);var r=ot;e&&Vd(t,e)?Rp(r,n):(t.flags=t.flags&-4097|2,ae=!1,ot=t)}}else{if(Oa(t))throw Error(C(418));t.flags=t.flags&-4097|2,ae=!1,ot=t}}}function Hd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function Ai(t){if(t!==ot)return!1;if(!ae)return Hd(t),ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ma(t.type,t.memoizedProps)),e&&(e=it)){if(Oa(t))throw Mp(),Error(C(418));for(;e;)Rp(t,e),e=yn(e.nextSibling)}if(Hd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){it=yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}it=null}}else it=ot?yn(t.stateNode.nextSibling):null;return!0}function Mp(){for(var t=it;t;)t=yn(t.nextSibling)}function Fr(){it=ot=null,ae=!1}function qc(t){kt===null?kt=[t]:kt.push(t)}var av=tn.ReactCurrentBatchConfig;function ds(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,t))}return t}function Oi(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gd(t){var e=t._init;return e(t._payload)}function Pp(t){function e(p,m){if(t){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=wn(p,m),p.index=0,p.sibling=null,p}function i(p,m,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,m,g,w){return m===null||m.tag!==6?(m=Ql(g,p.mode,w),m.return=p,m):(m=s(m,g),m.return=p,m)}function c(p,m,g,w){var E=g.type;return E===pr?h(p,m,g.props.children,w,g.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===on&&Gd(E)===m.type)?(w=s(m,g.props),w.ref=ds(p,m,g),w.return=p,w):(w=to(g.type,g.key,g.props,null,p.mode,w),w.ref=ds(p,m,g),w.return=p,w)}function u(p,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Kl(g,p.mode,w),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function h(p,m,g,w,E){return m===null||m.tag!==7?(m=Qn(g,p.mode,w,E),m.return=p,m):(m=s(m,g),m.return=p,m)}function d(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ql(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ci:return g=to(m.type,m.key,m.props,null,p.mode,g),g.ref=ds(p,null,m),g.return=p,g;case fr:return m=Kl(m,p.mode,g),m.return=p,m;case on:var w=m._init;return d(p,w(m._payload),g)}if(xs(m)||os(m))return m=Qn(m,p.mode,g,null),m.return=p,m;Oi(p,m)}return null}function f(p,m,g,w){var E=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return E!==null?null:l(p,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ci:return g.key===E?c(p,m,g,w):null;case fr:return g.key===E?u(p,m,g,w):null;case on:return E=g._init,f(p,m,E(g._payload),w)}if(xs(g)||os(g))return E!==null?null:h(p,m,g,w,null);Oi(p,g)}return null}function y(p,m,g,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,l(m,p,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ci:return p=p.get(w.key===null?g:w.key)||null,c(m,p,w,E);case fr:return p=p.get(w.key===null?g:w.key)||null,u(m,p,w,E);case on:var j=w._init;return y(p,m,g,j(w._payload),E)}if(xs(w)||os(w))return p=p.get(g)||null,h(m,p,w,E,null);Oi(m,w)}return null}function x(p,m,g,w){for(var E=null,j=null,R=m,I=m=0,W=null;R!==null&&I<g.length;I++){R.index>I?(W=R,R=null):W=R.sibling;var D=f(p,R,g[I],w);if(D===null){R===null&&(R=W);break}t&&R&&D.alternate===null&&e(p,R),m=i(D,m,I),j===null?E=D:j.sibling=D,j=D,R=W}if(I===g.length)return n(p,R),ae&&Fn(p,I),E;if(R===null){for(;I<g.length;I++)R=d(p,g[I],w),R!==null&&(m=i(R,m,I),j===null?E=R:j.sibling=R,j=R);return ae&&Fn(p,I),E}for(R=r(p,R);I<g.length;I++)W=y(R,p,I,g[I],w),W!==null&&(t&&W.alternate!==null&&R.delete(W.key===null?I:W.key),m=i(W,m,I),j===null?E=W:j.sibling=W,j=W);return t&&R.forEach(function(q){return e(p,q)}),ae&&Fn(p,I),E}function _(p,m,g,w){var E=os(g);if(typeof E!="function")throw Error(C(150));if(g=E.call(g),g==null)throw Error(C(151));for(var j=E=null,R=m,I=m=0,W=null,D=g.next();R!==null&&!D.done;I++,D=g.next()){R.index>I?(W=R,R=null):W=R.sibling;var q=f(p,R,D.value,w);if(q===null){R===null&&(R=W);break}t&&R&&q.alternate===null&&e(p,R),m=i(q,m,I),j===null?E=q:j.sibling=q,j=q,R=W}if(D.done)return n(p,R),ae&&Fn(p,I),E;if(R===null){for(;!D.done;I++,D=g.next())D=d(p,D.value,w),D!==null&&(m=i(D,m,I),j===null?E=D:j.sibling=D,j=D);return ae&&Fn(p,I),E}for(R=r(p,R);!D.done;I++,D=g.next())D=y(R,p,I,D.value,w),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?I:D.key),m=i(D,m,I),j===null?E=D:j.sibling=D,j=D);return t&&R.forEach(function(se){return e(p,se)}),ae&&Fn(p,I),E}function N(p,m,g,w){if(typeof g=="object"&&g!==null&&g.type===pr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ci:e:{for(var E=g.key,j=m;j!==null;){if(j.key===E){if(E=g.type,E===pr){if(j.tag===7){n(p,j.sibling),m=s(j,g.props.children),m.return=p,p=m;break e}}else if(j.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===on&&Gd(E)===j.type){n(p,j.sibling),m=s(j,g.props),m.ref=ds(p,j,g),m.return=p,p=m;break e}n(p,j);break}else e(p,j);j=j.sibling}g.type===pr?(m=Qn(g.props.children,p.mode,w,g.key),m.return=p,p=m):(w=to(g.type,g.key,g.props,null,p.mode,w),w.ref=ds(p,m,g),w.return=p,p=w)}return o(p);case fr:e:{for(j=g.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=Kl(g,p.mode,w),m.return=p,p=m}return o(p);case on:return j=g._init,N(p,m,j(g._payload),w)}if(xs(g))return x(p,m,g,w);if(os(g))return _(p,m,g,w);Oi(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,g),m.return=p,p=m):(n(p,m),m=Ql(g,p.mode,w),m.return=p,p=m),o(p)):n(p,m)}return N}var zr=Pp(!0),Dp=Pp(!1),go=An(null),yo=null,kr=null,Jc=null;function Zc(){Jc=kr=yo=null}function eu(t){var e=go.current;oe(go),t._currentValue=e}function Fa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function jr(t,e){yo=t,Jc=kr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qe=!0),t.firstContext=null)}function gt(t){var e=t._currentValue;if(Jc!==t)if(t={context:t,memoizedValue:e,next:null},kr===null){if(yo===null)throw Error(C(308));kr=t,yo.dependencies={lanes:0,firstContext:t}}else kr=kr.next=t;return e}var Un=null;function tu(t){Un===null?Un=[t]:Un.push(t)}function Ap(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,tu(e)):(n.next=s.next,s.next=n),e.interleaved=n,qt(t,r)}function qt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ln=!1;function nu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Op(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,G&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qt(t,n)}return s=r.interleaved,s===null?(e.next=e,tu(r)):(e.next=s.next,s.next=e),r.interleaved=e,qt(t,n)}function Ki(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bc(t,n)}}function Yd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vo(t,e,n,r){var s=t.updateQueue;ln=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,l=i;do{var f=l.lane,y=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,_=l;switch(f=e,y=n,_.tag){case 1:if(x=_.payload,typeof x=="function"){d=x.call(y,d,f);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=_.payload,f=typeof x=="function"?x.call(y,d,f):x,f==null)break e;d=fe({},d,f);break e;case 2:ln=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=d):h=h.next=y,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);tr|=o,t.lanes=o,t.memoizedState=d}}function Qd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(C(191,s));s.call(r)}}}var fi={},Ft=An(fi),Ys=An(fi),Qs=An(fi);function Vn(t){if(t===fi)throw Error(C(174));return t}function ru(t,e){switch(re(Qs,e),re(Ys,t),re(Ft,fi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:va(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=va(e,t)}oe(Ft),re(Ft,e)}function $r(){oe(Ft),oe(Ys),oe(Qs)}function Lp(t){Vn(Qs.current);var e=Vn(Ft.current),n=va(e,t.type);e!==n&&(re(Ys,t),re(Ft,n))}function su(t){Ys.current===t&&(oe(Ft),oe(Ys))}var ue=An(0);function xo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wl=[];function iu(){for(var t=0;t<Wl.length;t++)Wl[t]._workInProgressVersionPrimary=null;Wl.length=0}var Xi=tn.ReactCurrentDispatcher,Ul=tn.ReactCurrentBatchConfig,er=0,he=null,ke=null,be=null,_o=!1,bs=!1,Ks=0,cv=0;function Oe(){throw Error(C(321))}function ou(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!It(t[n],e[n]))return!1;return!0}function lu(t,e,n,r,s,i){if(er=i,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xi.current=t===null||t.memoizedState===null?fv:pv,t=n(r,s),bs){i=0;do{if(bs=!1,Ks=0,25<=i)throw Error(C(301));i+=1,be=ke=null,e.updateQueue=null,Xi.current=mv,t=n(r,s)}while(bs)}if(Xi.current=wo,e=ke!==null&&ke.next!==null,er=0,be=ke=he=null,_o=!1,e)throw Error(C(300));return t}function au(){var t=Ks!==0;return Ks=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?he.memoizedState=be=t:be=be.next=t,be}function yt(){if(ke===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=be===null?he.memoizedState:be.next;if(e!==null)be=e,ke=t;else{if(t===null)throw Error(C(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},be===null?he.memoizedState=be=t:be=be.next=t}return be}function Xs(t,e){return typeof e=="function"?e(t):e}function Vl(t){var e=yt(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((er&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=r):c=c.next=d,he.lanes|=h,tr|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,It(r,e.memoizedState)||(qe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,he.lanes|=i,tr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hl(t){var e=yt(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);It(i,e.memoizedState)||(qe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Fp(){}function zp(t,e){var n=he,r=yt(),s=e(),i=!It(r.memoizedState,s);if(i&&(r.memoizedState=s,qe=!0),r=r.queue,cu(Wp.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,qs(9,Bp.bind(null,n,r,s,e),void 0,null),je===null)throw Error(C(349));er&30||$p(n,e,s)}return s}function $p(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Bp(t,e,n,r){e.value=n,e.getSnapshot=r,Up(e)&&Vp(t)}function Wp(t,e,n){return n(function(){Up(e)&&Vp(t)})}function Up(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!It(t,n)}catch{return!0}}function Vp(t){var e=qt(t,1);e!==null&&bt(e,t,1,-1)}function Kd(t){var e=Pt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},e.queue=t,t=t.dispatch=hv.bind(null,he,t),[e.memoizedState,t]}function qs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Hp(){return yt().memoizedState}function qi(t,e,n,r){var s=Pt();he.flags|=t,s.memoizedState=qs(1|e,n,void 0,r===void 0?null:r)}function tl(t,e,n,r){var s=yt();r=r===void 0?null:r;var i=void 0;if(ke!==null){var o=ke.memoizedState;if(i=o.destroy,r!==null&&ou(r,o.deps)){s.memoizedState=qs(e,n,i,r);return}}he.flags|=t,s.memoizedState=qs(1|e,n,i,r)}function Xd(t,e){return qi(8390656,8,t,e)}function cu(t,e){return tl(2048,8,t,e)}function Gp(t,e){return tl(4,2,t,e)}function Yp(t,e){return tl(4,4,t,e)}function Qp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kp(t,e,n){return n=n!=null?n.concat([t]):null,tl(4,4,Qp.bind(null,e,t),n)}function uu(){}function Xp(t,e){var n=yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ou(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qp(t,e){var n=yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ou(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Jp(t,e,n){return er&21?(It(n,e)||(n=rp(),he.lanes|=n,tr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qe=!0),t.memoizedState=n)}function uv(t,e){var n=X;X=n!==0&&4>n?n:4,t(!0);var r=Ul.transition;Ul.transition={};try{t(!1),e()}finally{X=n,Ul.transition=r}}function Zp(){return yt().memoizedState}function dv(t,e,n){var r=_n(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},em(t))tm(e,n);else if(n=Ap(t,e,n,r),n!==null){var s=Ve();bt(n,t,r,s),nm(n,e,r)}}function hv(t,e,n){var r=_n(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(em(t))tm(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,It(l,o)){var c=e.interleaved;c===null?(s.next=s,tu(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Ap(t,e,s,r),n!==null&&(s=Ve(),bt(n,t,r,s),nm(n,e,r))}}function em(t){var e=t.alternate;return t===he||e!==null&&e===he}function tm(t,e){bs=_o=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bc(t,n)}}var wo={readContext:gt,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useInsertionEffect:Oe,useLayoutEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useMutableSource:Oe,useSyncExternalStore:Oe,useId:Oe,unstable_isNewReconciler:!1},fv={readContext:gt,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:gt,useEffect:Xd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qi(4194308,4,Qp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qi(4194308,4,t,e)},useInsertionEffect:function(t,e){return qi(4,2,t,e)},useMemo:function(t,e){var n=Pt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dv.bind(null,he,t),[r.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:Kd,useDebugValue:uu,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=Kd(!1),e=t[0];return t=uv.bind(null,t[1]),Pt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=he,s=Pt();if(ae){if(n===void 0)throw Error(C(407));n=n()}else{if(n=e(),je===null)throw Error(C(349));er&30||$p(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Xd(Wp.bind(null,r,i,t),[t]),r.flags|=2048,qs(9,Bp.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Pt(),e=je.identifierPrefix;if(ae){var n=Ht,r=Vt;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ks++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pv={readContext:gt,useCallback:Xp,useContext:gt,useEffect:cu,useImperativeHandle:Kp,useInsertionEffect:Gp,useLayoutEffect:Yp,useMemo:qp,useReducer:Vl,useRef:Hp,useState:function(){return Vl(Xs)},useDebugValue:uu,useDeferredValue:function(t){var e=yt();return Jp(e,ke.memoizedState,t)},useTransition:function(){var t=Vl(Xs)[0],e=yt().memoizedState;return[t,e]},useMutableSource:Fp,useSyncExternalStore:zp,useId:Zp,unstable_isNewReconciler:!1},mv={readContext:gt,useCallback:Xp,useContext:gt,useEffect:cu,useImperativeHandle:Kp,useInsertionEffect:Gp,useLayoutEffect:Yp,useMemo:qp,useReducer:Hl,useRef:Hp,useState:function(){return Hl(Xs)},useDebugValue:uu,useDeferredValue:function(t){var e=yt();return ke===null?e.memoizedState=t:Jp(e,ke.memoizedState,t)},useTransition:function(){var t=Hl(Xs)[0],e=yt().memoizedState;return[t,e]},useMutableSource:Fp,useSyncExternalStore:zp,useId:Zp,unstable_isNewReconciler:!1};function _t(t,e){if(t&&t.defaultProps){e=fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function za(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nl={isMounted:function(t){return(t=t._reactInternals)?lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ve(),s=_n(t),i=Yt(r,s);i.payload=e,n!=null&&(i.callback=n),e=vn(t,i,s),e!==null&&(bt(e,t,s,r),Ki(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ve(),s=_n(t),i=Yt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vn(t,i,s),e!==null&&(bt(e,t,s,r),Ki(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ve(),r=_n(t),s=Yt(n,r);s.tag=2,e!=null&&(s.callback=e),e=vn(t,s,r),e!==null&&(bt(e,t,r,n),Ki(e,t,r))}};function qd(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Us(n,r)||!Us(s,i):!0}function rm(t,e,n){var r=!1,s=Tn,i=e.contextType;return typeof i=="object"&&i!==null?i=gt(i):(s=et(e)?Jn:ze.current,r=e.contextTypes,i=(r=r!=null)?Lr(t,s):Tn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Jd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nl.enqueueReplaceState(e,e.state,null)}function $a(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},nu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=gt(i):(i=et(e)?Jn:ze.current,s.context=Lr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(za(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&nl.enqueueReplaceState(s,s.state,null),vo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Br(t,e){try{var n="",r=e;do n+=U0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Gl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ba(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gv=typeof WeakMap=="function"?WeakMap:Map;function sm(t,e,n){n=Yt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){So||(So=!0,qa=r),Ba(t,e)},n}function im(t,e,n){n=Yt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ba(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ba(t,e),typeof r!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Zd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gv;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=jv.bind(null,t,e,n),e.then(t,t))}function eh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function th(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yt(-1,1),e.tag=2,vn(n,e,1))),n.lanes|=1),t)}var yv=tn.ReactCurrentOwner,qe=!1;function Be(t,e,n,r){e.child=t===null?Dp(e,null,n,r):zr(e,t.child,n,r)}function nh(t,e,n,r,s){n=n.render;var i=e.ref;return jr(e,s),r=lu(t,e,n,r,i,s),n=au(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jt(t,e,s)):(ae&&n&&Kc(e),e.flags|=1,Be(t,e,r,s),e.child)}function rh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!vu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,om(t,e,i,r,s)):(t=to(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Us,n(o,r)&&t.ref===e.ref)return Jt(t,e,s)}return e.flags|=1,t=wn(i,r),t.ref=e.ref,t.return=e,e.child=t}function om(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Us(i,r)&&t.ref===e.ref)if(qe=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(qe=!0);else return e.lanes=t.lanes,Jt(t,e,s)}return Wa(t,e,n,r,s)}function lm(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(Er,st),st|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(Er,st),st|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,re(Er,st),st|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,re(Er,st),st|=r;return Be(t,e,s,n),e.child}function am(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wa(t,e,n,r,s){var i=et(n)?Jn:ze.current;return i=Lr(e,i),jr(e,s),n=lu(t,e,n,r,i,s),r=au(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jt(t,e,s)):(ae&&r&&Kc(e),e.flags|=1,Be(t,e,n,s),e.child)}function sh(t,e,n,r,s){if(et(n)){var i=!0;fo(e)}else i=!1;if(jr(e,s),e.stateNode===null)Ji(t,e),rm(e,n,r),$a(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gt(u):(u=et(n)?Jn:ze.current,u=Lr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Jd(e,o,r,u),ln=!1;var f=e.memoizedState;o.state=f,vo(e,r,o,s),c=e.memoizedState,l!==r||f!==c||Ze.current||ln?(typeof h=="function"&&(za(e,n,h,r),c=e.memoizedState),(l=ln||qd(e,n,l,r,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Op(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:_t(e.type,l),o.props=u,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=gt(c):(c=et(n)?Jn:ze.current,c=Lr(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&Jd(e,o,r,c),ln=!1,f=e.memoizedState,o.state=f,vo(e,r,o,s);var x=e.memoizedState;l!==d||f!==x||Ze.current||ln?(typeof y=="function"&&(za(e,n,y,r),x=e.memoizedState),(u=ln||qd(e,n,u,r,f,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ua(t,e,n,r,i,s)}function Ua(t,e,n,r,s,i){am(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ud(e,n,!1),Jt(t,e,i);r=e.stateNode,yv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=zr(e,t.child,null,i),e.child=zr(e,null,l,i)):Be(t,e,l,i),e.memoizedState=r.state,s&&Ud(e,n,!0),e.child}function cm(t){var e=t.stateNode;e.pendingContext?Wd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wd(t,e.context,!1),ru(t,e.containerInfo)}function ih(t,e,n,r,s){return Fr(),qc(s),e.flags|=256,Be(t,e,n,r),e.child}var Va={dehydrated:null,treeContext:null,retryLane:0};function Ha(t){return{baseLanes:t,cachePool:null,transitions:null}}function um(t,e,n){var r=e.pendingProps,s=ue.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),re(ue,s&1),t===null)return La(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=il(o,r,0,null),t=Qn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ha(n),e.memoizedState=Va,t):du(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return vv(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=wn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=wn(l,i):(i=Qn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ha(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Va,r}return i=t.child,t=i.sibling,r=wn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function du(t,e){return e=il({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Li(t,e,n,r){return r!==null&&qc(r),zr(e,t.child,null,n),t=du(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vv(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Gl(Error(C(422))),Li(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=il({mode:"visible",children:r.children},s,0,null),i=Qn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&zr(e,t.child,null,o),e.child.memoizedState=Ha(o),e.memoizedState=Va,i);if(!(e.mode&1))return Li(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(C(419)),r=Gl(i,r,void 0),Li(t,e,o,r)}if(l=(o&t.childLanes)!==0,qe||l){if(r=je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qt(t,s),bt(r,t,s,-1))}return yu(),r=Gl(Error(C(421))),Li(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Rv.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,it=yn(s.nextSibling),ot=e,ae=!0,kt=null,t!==null&&(ut[dt++]=Vt,ut[dt++]=Ht,ut[dt++]=Zn,Vt=t.id,Ht=t.overflow,Zn=e),e=du(e,r.children),e.flags|=4096,e)}function oh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fa(t.return,e,n)}function Yl(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function dm(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Be(t,e,r.children,n),r=ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oh(t,n,e);else if(t.tag===19)oh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(re(ue,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Yl(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Yl(e,!0,n,null,i);break;case"together":Yl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ji(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),tr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,n=wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xv(t,e,n){switch(e.tag){case 3:cm(e),Fr();break;case 5:Lp(e);break;case 1:et(e.type)&&fo(e);break;case 4:ru(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;re(go,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(re(ue,ue.current&1),e.flags|=128,null):n&e.child.childLanes?um(t,e,n):(re(ue,ue.current&1),t=Jt(t,e,n),t!==null?t.sibling:null);re(ue,ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dm(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),re(ue,ue.current),r)break;return null;case 22:case 23:return e.lanes=0,lm(t,e,n)}return Jt(t,e,n)}var hm,Ga,fm,pm;hm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ga=function(){};fm=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vn(Ft.current);var i=null;switch(n){case"input":s=pa(t,s),r=pa(t,r),i=[];break;case"select":s=fe({},s,{value:void 0}),r=fe({},r,{value:void 0}),i=[];break;case"textarea":s=ya(t,s),r=ya(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uo)}xa(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Os.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Os.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ie("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};pm=function(t,e,n,r){n!==r&&(e.flags|=4)};function hs(t,e){if(!ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _v(t,e,n){var r=e.pendingProps;switch(Xc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return et(e.type)&&ho(),Le(e),null;case 3:return r=e.stateNode,$r(),oe(Ze),oe(ze),iu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ai(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kt!==null&&(ec(kt),kt=null))),Ga(t,e),Le(e),null;case 5:su(e);var s=Vn(Qs.current);if(n=e.type,t!==null&&e.stateNode!=null)fm(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return Le(e),null}if(t=Vn(Ft.current),Ai(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Dt]=e,r[Gs]=i,t=(e.mode&1)!==0,n){case"dialog":ie("cancel",r),ie("close",r);break;case"iframe":case"object":case"embed":ie("load",r);break;case"video":case"audio":for(s=0;s<ws.length;s++)ie(ws[s],r);break;case"source":ie("error",r);break;case"img":case"image":case"link":ie("error",r),ie("load",r);break;case"details":ie("toggle",r);break;case"input":md(r,i),ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ie("invalid",r);break;case"textarea":yd(r,i),ie("invalid",r)}xa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Di(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Di(r.textContent,l,t),s=["children",""+l]):Os.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ie("scroll",r)}switch(n){case"input":Ni(r),gd(r,i,!0);break;case"textarea":Ni(r),vd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=uo)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Dt]=e,t[Gs]=r,hm(t,e,!1,!1),e.stateNode=t;e:{switch(o=_a(n,r),n){case"dialog":ie("cancel",t),ie("close",t),s=r;break;case"iframe":case"object":case"embed":ie("load",t),s=r;break;case"video":case"audio":for(s=0;s<ws.length;s++)ie(ws[s],t);s=r;break;case"source":ie("error",t),s=r;break;case"img":case"image":case"link":ie("error",t),ie("load",t),s=r;break;case"details":ie("toggle",t),s=r;break;case"input":md(t,r),s=pa(t,r),ie("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=fe({},r,{value:void 0}),ie("invalid",t);break;case"textarea":yd(t,r),s=ya(t,r),ie("invalid",t);break;default:s=r}xa(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Hf(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Uf(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ls(t,c):typeof c=="number"&&Ls(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Os.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ie("scroll",t):c!=null&&Ac(t,i,c,o))}switch(n){case"input":Ni(t),gd(t,r,!1);break;case"textarea":Ni(t),vd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Nr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Nr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=uo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Le(e),null;case 6:if(t&&e.stateNode!=null)pm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(n=Vn(Qs.current),Vn(Ft.current),Ai(e)){if(r=e.stateNode,n=e.memoizedProps,r[Dt]=e,(i=r.nodeValue!==n)&&(t=ot,t!==null))switch(t.tag){case 3:Di(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Di(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Dt]=e,e.stateNode=r}return Le(e),null;case 13:if(oe(ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ae&&it!==null&&e.mode&1&&!(e.flags&128))Mp(),Fr(),e.flags|=98560,i=!1;else if(i=Ai(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(C(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(317));i[Dt]=e}else Fr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),i=!1}else kt!==null&&(ec(kt),kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ue.current&1?Ee===0&&(Ee=3):yu())),e.updateQueue!==null&&(e.flags|=4),Le(e),null);case 4:return $r(),Ga(t,e),t===null&&Vs(e.stateNode.containerInfo),Le(e),null;case 10:return eu(e.type._context),Le(e),null;case 17:return et(e.type)&&ho(),Le(e),null;case 19:if(oe(ue),i=e.memoizedState,i===null)return Le(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)hs(i,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xo(t),o!==null){for(e.flags|=128,hs(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(ue,ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&xe()>Wr&&(e.flags|=128,r=!0,hs(i,!1),e.lanes=4194304)}else{if(!r)if(t=xo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ae)return Le(e),null}else 2*xe()-i.renderingStartTime>Wr&&n!==1073741824&&(e.flags|=128,r=!0,hs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xe(),e.sibling=null,n=ue.current,re(ue,r?n&1|2:n&1),e):(Le(e),null);case 22:case 23:return gu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?st&1073741824&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function wv(t,e){switch(Xc(e),e.tag){case 1:return et(e.type)&&ho(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $r(),oe(Ze),oe(ze),iu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return su(e),null;case 13:if(oe(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));Fr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(ue),null;case 4:return $r(),null;case 10:return eu(e.type._context),null;case 22:case 23:return gu(),null;case 24:return null;default:return null}}var Fi=!1,Fe=!1,kv=typeof WeakSet=="function"?WeakSet:Set,M=null;function Sr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(t,e,r)}else n.current=null}function Ya(t,e,n){try{n()}catch(r){ge(t,e,r)}}var lh=!1;function Sv(t,e){if(ja=lo,t=xp(),Qc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var y;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++h===r&&(c=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ra={focusedElem:t,selectionRange:n},lo=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var _=x.memoizedProps,N=x.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?_:_t(e.type,_),N);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(w){ge(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return x=lh,lh=!1,x}function Ts(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ya(e,n,i)}s=s.next}while(s!==r)}}function rl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qa(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mm(t){var e=t.alternate;e!==null&&(t.alternate=null,mm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dt],delete e[Gs],delete e[Da],delete e[iv],delete e[ov])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gm(t){return t.tag===5||t.tag===3||t.tag===4}function ah(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ka(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uo));else if(r!==4&&(t=t.child,t!==null))for(Ka(t,e,n),t=t.sibling;t!==null;)Ka(t,e,n),t=t.sibling}function Xa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xa(t,e,n),t=t.sibling;t!==null;)Xa(t,e,n),t=t.sibling}var Me=null,wt=!1;function rn(t,e,n){for(n=n.child;n!==null;)ym(t,e,n),n=n.sibling}function ym(t,e,n){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Ko,n)}catch{}switch(n.tag){case 5:Fe||Sr(n,e);case 6:var r=Me,s=wt;Me=null,rn(t,e,n),Me=r,wt=s,Me!==null&&(wt?(t=Me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Me.removeChild(n.stateNode));break;case 18:Me!==null&&(wt?(t=Me,n=n.stateNode,t.nodeType===8?$l(t.parentNode,n):t.nodeType===1&&$l(t,n),Bs(t)):$l(Me,n.stateNode));break;case 4:r=Me,s=wt,Me=n.stateNode.containerInfo,wt=!0,rn(t,e,n),Me=r,wt=s;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ya(n,e,o),s=s.next}while(s!==r)}rn(t,e,n);break;case 1:if(!Fe&&(Sr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ge(n,e,l)}rn(t,e,n);break;case 21:rn(t,e,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,rn(t,e,n),Fe=r):rn(t,e,n);break;default:rn(t,e,n)}}function ch(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kv),e.forEach(function(r){var s=Mv.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Me=l.stateNode,wt=!1;break e;case 3:Me=l.stateNode.containerInfo,wt=!0;break e;case 4:Me=l.stateNode.containerInfo,wt=!0;break e}l=l.return}if(Me===null)throw Error(C(160));ym(i,o,s),Me=null,wt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ge(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vm(e,t),e=e.sibling}function vm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xt(e,t),Rt(t),r&4){try{Ts(3,t,t.return),rl(3,t)}catch(_){ge(t,t.return,_)}try{Ts(5,t,t.return)}catch(_){ge(t,t.return,_)}}break;case 1:xt(e,t),Rt(t),r&512&&n!==null&&Sr(n,n.return);break;case 5:if(xt(e,t),Rt(t),r&512&&n!==null&&Sr(n,n.return),t.flags&32){var s=t.stateNode;try{Ls(s,"")}catch(_){ge(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$f(s,i),_a(l,o);var u=_a(l,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Hf(s,d):h==="dangerouslySetInnerHTML"?Uf(s,d):h==="children"?Ls(s,d):Ac(s,h,d,u)}switch(l){case"input":ma(s,i);break;case"textarea":Bf(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Nr(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?Nr(s,!!i.multiple,i.defaultValue,!0):Nr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Gs]=i}catch(_){ge(t,t.return,_)}}break;case 6:if(xt(e,t),Rt(t),r&4){if(t.stateNode===null)throw Error(C(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){ge(t,t.return,_)}}break;case 3:if(xt(e,t),Rt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bs(e.containerInfo)}catch(_){ge(t,t.return,_)}break;case 4:xt(e,t),Rt(t);break;case 13:xt(e,t),Rt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pu=xe())),r&4&&ch(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Fe=(u=Fe)||h,xt(e,t),Fe=u):xt(e,t),Rt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(M=t,h=t.child;h!==null;){for(d=M=h;M!==null;){switch(f=M,y=f.child,f.tag){case 0:case 11:case 14:case 15:Ts(4,f,f.return);break;case 1:Sr(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(_){ge(r,n,_)}}break;case 5:Sr(f,f.return);break;case 22:if(f.memoizedState!==null){dh(d);continue}}y!==null?(y.return=f,M=y):dh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Vf("display",o))}catch(_){ge(t,t.return,_)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){ge(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xt(e,t),Rt(t),r&4&&ch(t);break;case 21:break;default:xt(e,t),Rt(t)}}function Rt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gm(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ls(s,""),r.flags&=-33);var i=ah(t);Xa(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ah(t);Ka(t,l,o);break;default:throw Error(C(161))}}catch(c){ge(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ev(t,e,n){M=t,xm(t)}function xm(t,e,n){for(var r=(t.mode&1)!==0;M!==null;){var s=M,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fi;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Fe;l=Fi;var u=Fe;if(Fi=o,(Fe=c)&&!u)for(M=s;M!==null;)o=M,c=o.child,o.tag===22&&o.memoizedState!==null?hh(s):c!==null?(c.return=o,M=c):hh(s);for(;i!==null;)M=i,xm(i),i=i.sibling;M=s,Fi=l,Fe=u}uh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,M=i):uh(t)}}function uh(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fe||rl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:_t(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Qd(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Bs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Fe||e.flags&512&&Qa(e)}catch(f){ge(e,e.return,f)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function dh(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function hh(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(c){ge(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ge(e,s,c)}}var i=e.return;try{Qa(e)}catch(c){ge(e,i,c)}break;case 5:var o=e.return;try{Qa(e)}catch(c){ge(e,o,c)}}}catch(c){ge(e,e.return,c)}if(e===t){M=null;break}var l=e.sibling;if(l!==null){l.return=e.return,M=l;break}M=e.return}}var Cv=Math.ceil,ko=tn.ReactCurrentDispatcher,hu=tn.ReactCurrentOwner,mt=tn.ReactCurrentBatchConfig,G=0,je=null,_e=null,Pe=0,st=0,Er=An(0),Ee=0,Js=null,tr=0,sl=0,fu=0,Is=null,Xe=null,pu=0,Wr=1/0,Bt=null,So=!1,qa=null,xn=null,zi=!1,dn=null,Eo=0,js=0,Ja=null,Zi=-1,eo=0;function Ve(){return G&6?xe():Zi!==-1?Zi:Zi=xe()}function _n(t){return t.mode&1?G&2&&Pe!==0?Pe&-Pe:av.transition!==null?(eo===0&&(eo=rp()),eo):(t=X,t!==0||(t=window.event,t=t===void 0?16:up(t.type)),t):1}function bt(t,e,n,r){if(50<js)throw js=0,Ja=null,Error(C(185));ui(t,n,r),(!(G&2)||t!==je)&&(t===je&&(!(G&2)&&(sl|=n),Ee===4&&cn(t,Pe)),tt(t,r),n===1&&G===0&&!(e.mode&1)&&(Wr=xe()+500,el&&On()))}function tt(t,e){var n=t.callbackNode;ay(t,e);var r=oo(t,t===je?Pe:0);if(r===0)n!==null&&wd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wd(n),e===1)t.tag===0?lv(fh.bind(null,t)):Ip(fh.bind(null,t)),rv(function(){!(G&6)&&On()}),n=null;else{switch(sp(r)){case 1:n=$c;break;case 4:n=tp;break;case 16:n=io;break;case 536870912:n=np;break;default:n=io}n=bm(n,_m.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _m(t,e){if(Zi=-1,eo=0,G&6)throw Error(C(327));var n=t.callbackNode;if(Rr()&&t.callbackNode!==n)return null;var r=oo(t,t===je?Pe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Co(t,r);else{e=r;var s=G;G|=2;var i=km();(je!==t||Pe!==e)&&(Bt=null,Wr=xe()+500,Yn(t,e));do try{Tv();break}catch(l){wm(t,l)}while(1);Zc(),ko.current=i,G=s,_e!==null?e=0:(je=null,Pe=0,e=Ee)}if(e!==0){if(e===2&&(s=Ca(t),s!==0&&(r=s,e=Za(t,s))),e===1)throw n=Js,Yn(t,0),cn(t,r),tt(t,xe()),n;if(e===6)cn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Nv(s)&&(e=Co(t,r),e===2&&(i=Ca(t),i!==0&&(r=i,e=Za(t,i))),e===1))throw n=Js,Yn(t,0),cn(t,r),tt(t,xe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:zn(t,Xe,Bt);break;case 3:if(cn(t,r),(r&130023424)===r&&(e=pu+500-xe(),10<e)){if(oo(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ve(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Pa(zn.bind(null,t,Xe,Bt),e);break}zn(t,Xe,Bt);break;case 4:if(cn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Nt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cv(r/1960))-r,10<r){t.timeoutHandle=Pa(zn.bind(null,t,Xe,Bt),r);break}zn(t,Xe,Bt);break;case 5:zn(t,Xe,Bt);break;default:throw Error(C(329))}}}return tt(t,xe()),t.callbackNode===n?_m.bind(null,t):null}function Za(t,e){var n=Is;return t.current.memoizedState.isDehydrated&&(Yn(t,e).flags|=256),t=Co(t,e),t!==2&&(e=Xe,Xe=n,e!==null&&ec(e)),t}function ec(t){Xe===null?Xe=t:Xe.push.apply(Xe,t)}function Nv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!It(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cn(t,e){for(e&=~fu,e&=~sl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nt(e),r=1<<n;t[n]=-1,e&=~r}}function fh(t){if(G&6)throw Error(C(327));Rr();var e=oo(t,0);if(!(e&1))return tt(t,xe()),null;var n=Co(t,e);if(t.tag!==0&&n===2){var r=Ca(t);r!==0&&(e=r,n=Za(t,r))}if(n===1)throw n=Js,Yn(t,0),cn(t,e),tt(t,xe()),n;if(n===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zn(t,Xe,Bt),tt(t,xe()),null}function mu(t,e){var n=G;G|=1;try{return t(e)}finally{G=n,G===0&&(Wr=xe()+500,el&&On())}}function nr(t){dn!==null&&dn.tag===0&&!(G&6)&&Rr();var e=G;G|=1;var n=mt.transition,r=X;try{if(mt.transition=null,X=1,t)return t()}finally{X=r,mt.transition=n,G=e,!(G&6)&&On()}}function gu(){st=Er.current,oe(Er)}function Yn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nv(n)),_e!==null)for(n=_e.return;n!==null;){var r=n;switch(Xc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ho();break;case 3:$r(),oe(Ze),oe(ze),iu();break;case 5:su(r);break;case 4:$r();break;case 13:oe(ue);break;case 19:oe(ue);break;case 10:eu(r.type._context);break;case 22:case 23:gu()}n=n.return}if(je=t,_e=t=wn(t.current,null),Pe=st=e,Ee=0,Js=null,fu=sl=tr=0,Xe=Is=null,Un!==null){for(e=0;e<Un.length;e++)if(n=Un[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Un=null}return t}function wm(t,e){do{var n=_e;try{if(Zc(),Xi.current=wo,_o){for(var r=he.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_o=!1}if(er=0,be=ke=he=null,bs=!1,Ks=0,hu.current=null,n===null||n.return===null){Ee=1,Js=e,_e=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Pe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=eh(o);if(y!==null){y.flags&=-257,th(y,o,l,i,e),y.mode&1&&Zd(i,u,e),e=y,c=u;var x=e.updateQueue;if(x===null){var _=new Set;_.add(c),e.updateQueue=_}else x.add(c);break e}else{if(!(e&1)){Zd(i,u,e),yu();break e}c=Error(C(426))}}else if(ae&&l.mode&1){var N=eh(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),th(N,o,l,i,e),qc(Br(c,l));break e}}i=c=Br(c,l),Ee!==4&&(Ee=2),Is===null?Is=[i]:Is.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=sm(i,c,e);Yd(i,p);break e;case 1:l=c;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(xn===null||!xn.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=im(i,l,e);Yd(i,w);break e}}i=i.return}while(i!==null)}Em(n)}catch(E){e=E,_e===n&&n!==null&&(_e=n=n.return);continue}break}while(1)}function km(){var t=ko.current;return ko.current=wo,t===null?wo:t}function yu(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),je===null||!(tr&268435455)&&!(sl&268435455)||cn(je,Pe)}function Co(t,e){var n=G;G|=2;var r=km();(je!==t||Pe!==e)&&(Bt=null,Yn(t,e));do try{bv();break}catch(s){wm(t,s)}while(1);if(Zc(),G=n,ko.current=r,_e!==null)throw Error(C(261));return je=null,Pe=0,Ee}function bv(){for(;_e!==null;)Sm(_e)}function Tv(){for(;_e!==null&&!Z0();)Sm(_e)}function Sm(t){var e=Nm(t.alternate,t,st);t.memoizedProps=t.pendingProps,e===null?Em(t):_e=e,hu.current=null}function Em(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wv(n,e),n!==null){n.flags&=32767,_e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,_e=null;return}}else if(n=_v(n,e,st),n!==null){_e=n;return}if(e=e.sibling,e!==null){_e=e;return}_e=e=t}while(e!==null);Ee===0&&(Ee=5)}function zn(t,e,n){var r=X,s=mt.transition;try{mt.transition=null,X=1,Iv(t,e,n,r)}finally{mt.transition=s,X=r}return null}function Iv(t,e,n,r){do Rr();while(dn!==null);if(G&6)throw Error(C(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(cy(t,i),t===je&&(_e=je=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zi||(zi=!0,bm(io,function(){return Rr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mt.transition,mt.transition=null;var o=X;X=1;var l=G;G|=4,hu.current=null,Sv(t,n),vm(n,t),Ky(Ra),lo=!!ja,Ra=ja=null,t.current=n,Ev(n),ey(),G=l,X=o,mt.transition=i}else t.current=n;if(zi&&(zi=!1,dn=t,Eo=s),i=t.pendingLanes,i===0&&(xn=null),ry(n.stateNode),tt(t,xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(So)throw So=!1,t=qa,qa=null,t;return Eo&1&&t.tag!==0&&Rr(),i=t.pendingLanes,i&1?t===Ja?js++:(js=0,Ja=t):js=0,On(),null}function Rr(){if(dn!==null){var t=sp(Eo),e=mt.transition,n=X;try{if(mt.transition=null,X=16>t?16:t,dn===null)var r=!1;else{if(t=dn,dn=null,Eo=0,G&6)throw Error(C(331));var s=G;for(G|=4,M=t.current;M!==null;){var i=M,o=i.child;if(M.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(M=u;M!==null;){var h=M;switch(h.tag){case 0:case 11:case 15:Ts(8,h,i)}var d=h.child;if(d!==null)d.return=h,M=d;else for(;M!==null;){h=M;var f=h.sibling,y=h.return;if(mm(h),h===u){M=null;break}if(f!==null){f.return=y,M=f;break}M=y}}}var x=i.alternate;if(x!==null){var _=x.child;if(_!==null){x.child=null;do{var N=_.sibling;_.sibling=null,_=N}while(_!==null)}}M=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,M=o;else e:for(;M!==null;){if(i=M,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ts(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,M=p;break e}M=i.return}}var m=t.current;for(M=m;M!==null;){o=M;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,M=g;else e:for(o=m;M!==null;){if(l=M,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){ge(l,l.return,E)}if(l===o){M=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,M=w;break e}M=l.return}}if(G=s,On(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Ko,t)}catch{}r=!0}return r}finally{X=n,mt.transition=e}}return!1}function ph(t,e,n){e=Br(n,e),e=sm(t,e,1),t=vn(t,e,1),e=Ve(),t!==null&&(ui(t,1,e),tt(t,e))}function ge(t,e,n){if(t.tag===3)ph(t,t,n);else for(;e!==null;){if(e.tag===3){ph(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xn===null||!xn.has(r))){t=Br(n,t),t=im(e,t,1),e=vn(e,t,1),t=Ve(),e!==null&&(ui(e,1,t),tt(e,t));break}}e=e.return}}function jv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&n,je===t&&(Pe&n)===n&&(Ee===4||Ee===3&&(Pe&130023424)===Pe&&500>xe()-pu?Yn(t,0):fu|=n),tt(t,e)}function Cm(t,e){e===0&&(t.mode&1?(e=Ii,Ii<<=1,!(Ii&130023424)&&(Ii=4194304)):e=1);var n=Ve();t=qt(t,e),t!==null&&(ui(t,e,n),tt(t,n))}function Rv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cm(t,n)}function Mv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),Cm(t,n)}var Nm;Nm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ze.current)qe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qe=!1,xv(t,e,n);qe=!!(t.flags&131072)}else qe=!1,ae&&e.flags&1048576&&jp(e,mo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ji(t,e),t=e.pendingProps;var s=Lr(e,ze.current);jr(e,n),s=lu(null,e,r,t,s,n);var i=au();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(i=!0,fo(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nu(e),s.updater=nl,e.stateNode=s,s._reactInternals=e,$a(e,r,t,n),e=Ua(null,e,r,!0,i,n)):(e.tag=0,ae&&i&&Kc(e),Be(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ji(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Dv(r),t=_t(r,t),s){case 0:e=Wa(null,e,r,t,n);break e;case 1:e=sh(null,e,r,t,n);break e;case 11:e=nh(null,e,r,t,n);break e;case 14:e=rh(null,e,r,_t(r.type,t),n);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_t(r,s),Wa(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_t(r,s),sh(t,e,r,s,n);case 3:e:{if(cm(e),t===null)throw Error(C(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Op(t,e),vo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Br(Error(C(423)),e),e=ih(t,e,r,n,s);break e}else if(r!==s){s=Br(Error(C(424)),e),e=ih(t,e,r,n,s);break e}else for(it=yn(e.stateNode.containerInfo.firstChild),ot=e,ae=!0,kt=null,n=Dp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fr(),r===s){e=Jt(t,e,n);break e}Be(t,e,r,n)}e=e.child}return e;case 5:return Lp(e),t===null&&La(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ma(r,s)?o=null:i!==null&&Ma(r,i)&&(e.flags|=32),am(t,e),Be(t,e,o,n),e.child;case 6:return t===null&&La(e),null;case 13:return um(t,e,n);case 4:return ru(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zr(e,null,r,n):Be(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_t(r,s),nh(t,e,r,s,n);case 7:return Be(t,e,e.pendingProps,n),e.child;case 8:return Be(t,e,e.pendingProps.children,n),e.child;case 12:return Be(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,re(go,r._currentValue),r._currentValue=o,i!==null)if(It(i.value,o)){if(i.children===s.children&&!Ze.current){e=Jt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Yt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Fa(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(C(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Fa(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Be(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,jr(e,n),s=gt(s),r=r(s),e.flags|=1,Be(t,e,r,n),e.child;case 14:return r=e.type,s=_t(r,e.pendingProps),s=_t(r.type,s),rh(t,e,r,s,n);case 15:return om(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_t(r,s),Ji(t,e),e.tag=1,et(r)?(t=!0,fo(e)):t=!1,jr(e,n),rm(e,r,s),$a(e,r,s,n),Ua(null,e,r,!0,t,n);case 19:return dm(t,e,n);case 22:return lm(t,e,n)}throw Error(C(156,e.tag))};function bm(t,e){return ep(t,e)}function Pv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(t,e,n,r){return new Pv(t,e,n,r)}function vu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dv(t){if(typeof t=="function")return vu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lc)return 11;if(t===Fc)return 14}return 2}function wn(t,e){var n=t.alternate;return n===null?(n=ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function to(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")vu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pr:return Qn(n.children,s,i,e);case Oc:o=8,s|=8;break;case ua:return t=ft(12,n,e,s|2),t.elementType=ua,t.lanes=i,t;case da:return t=ft(13,n,e,s),t.elementType=da,t.lanes=i,t;case ha:return t=ft(19,n,e,s),t.elementType=ha,t.lanes=i,t;case Lf:return il(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Af:o=10;break e;case Of:o=9;break e;case Lc:o=11;break e;case Fc:o=14;break e;case on:o=16,r=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=ft(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Qn(t,e,n,r){return t=ft(7,t,r,e),t.lanes=n,t}function il(t,e,n,r){return t=ft(22,t,r,e),t.elementType=Lf,t.lanes=n,t.stateNode={isHidden:!1},t}function Ql(t,e,n){return t=ft(6,t,null,e),t.lanes=n,t}function Kl(t,e,n){return e=ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Av(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Il(0),this.expirationTimes=Il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xu(t,e,n,r,s,i,o,l,c){return t=new Av(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ft(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nu(i),t}function Ov(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tm(t){if(!t)return Tn;t=t._reactInternals;e:{if(lr(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var n=t.type;if(et(n))return Tp(t,n,e)}return e}function Im(t,e,n,r,s,i,o,l,c){return t=xu(n,r,!0,t,s,i,o,l,c),t.context=Tm(null),n=t.current,r=Ve(),s=_n(n),i=Yt(r,s),i.callback=e??null,vn(n,i,s),t.current.lanes=s,ui(t,s,r),tt(t,r),t}function ol(t,e,n,r){var s=e.current,i=Ve(),o=_n(s);return n=Tm(n),e.context===null?e.context=n:e.pendingContext=n,e=Yt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vn(s,e,o),t!==null&&(bt(t,s,o,i),Ki(t,s,o)),o}function No(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _u(t,e){mh(t,e),(t=t.alternate)&&mh(t,e)}function Lv(){return null}var jm=typeof reportError=="function"?reportError:function(t){console.error(t)};function wu(t){this._internalRoot=t}ll.prototype.render=wu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));ol(t,e,null,null)};ll.prototype.unmount=wu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nr(function(){ol(null,t,null,null)}),e[Xt]=null}};function ll(t){this._internalRoot=t}ll.prototype.unstable_scheduleHydration=function(t){if(t){var e=lp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<an.length&&e!==0&&e<an[n].priority;n++);an.splice(n,0,t),n===0&&cp(t)}};function ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gh(){}function Fv(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=No(o);i.call(u)}}var o=Im(e,r,t,0,null,!1,!1,"",gh);return t._reactRootContainer=o,t[Xt]=o.current,Vs(t.nodeType===8?t.parentNode:t),nr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=No(c);l.call(u)}}var c=xu(t,0,!1,null,null,!1,!1,"",gh);return t._reactRootContainer=c,t[Xt]=c.current,Vs(t.nodeType===8?t.parentNode:t),nr(function(){ol(e,c,n,r)}),c}function cl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=No(o);l.call(c)}}ol(e,o,t,s)}else o=Fv(n,e,t,s,r);return No(o)}ip=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_s(e.pendingLanes);n!==0&&(Bc(e,n|1),tt(e,xe()),!(G&6)&&(Wr=xe()+500,On()))}break;case 13:nr(function(){var r=qt(t,1);if(r!==null){var s=Ve();bt(r,t,1,s)}}),_u(t,1)}};Wc=function(t){if(t.tag===13){var e=qt(t,134217728);if(e!==null){var n=Ve();bt(e,t,134217728,n)}_u(t,134217728)}};op=function(t){if(t.tag===13){var e=_n(t),n=qt(t,e);if(n!==null){var r=Ve();bt(n,t,e,r)}_u(t,e)}};lp=function(){return X};ap=function(t,e){var n=X;try{return X=t,e()}finally{X=n}};ka=function(t,e,n){switch(e){case"input":if(ma(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Zo(r);if(!s)throw Error(C(90));zf(r),ma(r,s)}}}break;case"textarea":Bf(t,n);break;case"select":e=n.value,e!=null&&Nr(t,!!n.multiple,e,!1)}};Qf=mu;Kf=nr;var zv={usingClientEntryPoint:!1,Events:[hi,vr,Zo,Gf,Yf,mu]},fs={findFiberByHostInstance:Wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$v={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jf(t),t===null?null:t.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||Lv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$i.isDisabled&&$i.supportsFiber)try{Ko=$i.inject($v),Lt=$i}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zv;at.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ku(e))throw Error(C(200));return Ov(t,e,null,n)};at.createRoot=function(t,e){if(!ku(t))throw Error(C(299));var n=!1,r="",s=jm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=xu(t,1,!1,null,null,n,!1,r,s),t[Xt]=e.current,Vs(t.nodeType===8?t.parentNode:t),new wu(e)};at.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=Jf(e),t=t===null?null:t.stateNode,t};at.flushSync=function(t){return nr(t)};at.hydrate=function(t,e,n){if(!al(e))throw Error(C(200));return cl(null,t,e,!0,n)};at.hydrateRoot=function(t,e,n){if(!ku(t))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=jm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Im(e,null,t,1,n??null,s,!1,i,o),t[Xt]=e.current,Vs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ll(e)};at.render=function(t,e,n){if(!al(e))throw Error(C(200));return cl(null,t,e,!1,n)};at.unmountComponentAtNode=function(t){if(!al(t))throw Error(C(40));return t._reactRootContainer?(nr(function(){cl(null,null,t,!1,function(){t._reactRootContainer=null,t[Xt]=null})}),!0):!1};at.unstable_batchedUpdates=mu;at.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!al(n))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return cl(t,e,n,!1,r)};at.version="18.3.1-next-f1338f8080-20240426";function Rm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rm)}catch(t){console.error(t)}}Rm(),Rf.exports=at;var Mm=Rf.exports;const Bv=xf(Mm);var yh=Mm;aa.createRoot=yh.createRoot,aa.hydrateRoot=yh.hydrateRoot;var Wv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Uv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vv=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>k.createElement("svg",{ref:u,...Wv,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${Uv(t)}`,...c},[...e.map(([h,d])=>k.createElement(h,d)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var we=Vv;const Hv=we("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Gv=we("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Su=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Yv=we("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Pm=we("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Qv=we("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),vh=we("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]),Kv=we("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Dm=we("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Xv=we("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),qv=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Am=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ht=we("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),Jv=we("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),tc=we("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),xh=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),_h=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Zv=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Eu=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nc=we("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T=function(t,e){if(!t)throw es(e)},es=function(t){return new Error("Firebase Database ("+Om.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ex=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Cu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,d=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(f=64)),r.push(n[h],n[d],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ex(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||d==null)throw new tx;const f=i<<2|l>>4;if(r.push(f),u!==64){const y=l<<4&240|u>>2;if(r.push(y),d!==64){const x=u<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fm=function(t){const e=Lm(t);return Cu.encodeByteArray(e,!0)},bo=function(t){return Fm(t).replace(/\./g,"")},rc=function(t){try{return Cu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){return zm(void 0,t)}function zm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!rx(n)||(t[n]=zm(t[n],e[n]));return t}function rx(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=()=>sx().__FIREBASE_DEFAULTS__,ox=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rc(t[1]);return e&&JSON.parse(e)},$m=()=>{try{return ix()||ox()||lx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ax=t=>{var e,n;return(n=(e=$m())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cx=t=>{const e=ax(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bm=()=>{var t;return(t=$m())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[bo(JSON.stringify(n)),bo(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Wm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dx())}function hx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Um(){return Om.NODE_ADMIN===!0}function fx(){try{return typeof indexedDB=="object"}catch{return!1}}function px(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="FirebaseError";class pi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mx,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vm.prototype.create)}}class Vm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gx(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new pi(s,l,r)}}function gx(t,e){return t.replace(yx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){return JSON.parse(t)}function Se(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Zs(rc(i[0])||""),n=Zs(rc(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},vx=function(t){const e=Hm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},xx=function(t){const e=Hm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ur(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function sc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function To(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function ic(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(wh(i)&&wh(o)){if(!ic(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function wh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=l^i&(o^l),h=1518500249):(u=i^o^l,h=1859775393):d<60?(u=i&o|l&(i|o),h=2400959708):(u=i^o^l,h=3395469782);const f=(s<<5|s>>>27)+u+c+h+r[d]&4294967295;c=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function Vr(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,T(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ul=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){return t&&t._delegate?t._delegate:t}class ei{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new At;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cx(e))try{this.getOrInitializeService({instanceIdentifier:$n})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$n){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$n){return this.instances.has(e)}getOptions(e=$n){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ex(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$n){return this.component?this.component.multipleInstances?e:$n:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ex(t){return t===$n?void 0:t}function Cx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Sx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const bx={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},Tx=ne.INFO,Ix={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},jx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Ix[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gm{constructor(e){this.name=e,this._logLevel=Tx,this._logHandler=jx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const Rx=(t,e)=>e.some(n=>t instanceof n);let kh,Sh;function Mx(){return kh||(kh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Px(){return Sh||(Sh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ym=new WeakMap,oc=new WeakMap,Qm=new WeakMap,Xl=new WeakMap,Nu=new WeakMap;function Dx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(kn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ym.set(n,t)}).catch(()=>{}),Nu.set(e,t),e}function Ax(t){if(oc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});oc.set(t,e)}let lc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return oc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ox(t){lc=t(lc)}function Lx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ql(this),e,...n);return Qm.set(r,e.sort?e.sort():[e]),kn(r)}:Px().includes(t)?function(...e){return t.apply(ql(this),e),kn(Ym.get(this))}:function(...e){return kn(t.apply(ql(this),e))}}function Fx(t){return typeof t=="function"?Lx(t):(t instanceof IDBTransaction&&Ax(t),Rx(t,Mx())?new Proxy(t,lc):t)}function kn(t){if(t instanceof IDBRequest)return Dx(t);if(Xl.has(t))return Xl.get(t);const e=Fx(t);return e!==t&&(Xl.set(t,e),Nu.set(e,t)),e}const ql=t=>Nu.get(t);function zx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=kn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(kn(o.result),c.oldVersion,c.newVersion,kn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const $x=["get","getKey","getAll","getAllKeys","count"],Bx=["put","add","delete","clear"],Jl=new Map;function Eh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jl.get(e))return Jl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Bx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||$x.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Jl.set(e,i),i}Ox(t=>({...t,get:(e,n,r)=>Eh(e,n)||t.get(e,n,r),has:(e,n)=>!!Eh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ux(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ux(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ac="@firebase/app",Ch="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=new Gm("@firebase/app"),Vx="@firebase/app-compat",Hx="@firebase/analytics-compat",Gx="@firebase/analytics",Yx="@firebase/app-check-compat",Qx="@firebase/app-check",Kx="@firebase/auth",Xx="@firebase/auth-compat",qx="@firebase/database",Jx="@firebase/data-connect",Zx="@firebase/database-compat",e_="@firebase/functions",t_="@firebase/functions-compat",n_="@firebase/installations",r_="@firebase/installations-compat",s_="@firebase/messaging",i_="@firebase/messaging-compat",o_="@firebase/performance",l_="@firebase/performance-compat",a_="@firebase/remote-config",c_="@firebase/remote-config-compat",u_="@firebase/storage",d_="@firebase/storage-compat",h_="@firebase/firestore",f_="@firebase/vertexai-preview",p_="@firebase/firestore-compat",m_="firebase",g_="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc="[DEFAULT]",y_={[ac]:"fire-core",[Vx]:"fire-core-compat",[Gx]:"fire-analytics",[Hx]:"fire-analytics-compat",[Qx]:"fire-app-check",[Yx]:"fire-app-check-compat",[Kx]:"fire-auth",[Xx]:"fire-auth-compat",[qx]:"fire-rtdb",[Jx]:"fire-data-connect",[Zx]:"fire-rtdb-compat",[e_]:"fire-fn",[t_]:"fire-fn-compat",[n_]:"fire-iid",[r_]:"fire-iid-compat",[s_]:"fire-fcm",[i_]:"fire-fcm-compat",[o_]:"fire-perf",[l_]:"fire-perf-compat",[a_]:"fire-rc",[c_]:"fire-rc-compat",[u_]:"fire-gcs",[d_]:"fire-gcs-compat",[h_]:"fire-fst",[p_]:"fire-fst-compat",[f_]:"fire-vertex","fire-js":"fire-js",[m_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new Map,v_=new Map,uc=new Map;function Nh(t,e){try{t.container.addComponent(e)}catch(n){Zt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jo(t){const e=t.name;if(uc.has(e))return Zt.debug(`There were multiple attempts to register component ${e}.`),!1;uc.set(e,t);for(const n of Io.values())Nh(n,t);for(const n of v_.values())Nh(n,t);return!0}function x_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sn=new Vm("app","Firebase",__);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=g_;function Km(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:cc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Sn.create("bad-app-name",{appName:String(s)});if(n||(n=Bm()),!n)throw Sn.create("no-options");const i=Io.get(s);if(i){if(ic(n,i.options)&&ic(r,i.config))return i;throw Sn.create("duplicate-app",{appName:s})}const o=new Nx(s);for(const c of uc.values())o.addComponent(c);const l=new w_(n,r,o);return Io.set(s,l),l}function S_(t=cc){const e=Io.get(t);if(!e&&t===cc&&Bm())return Km();if(!e)throw Sn.create("no-app",{appName:t});return e}function Mr(t,e,n){var r;let s=(r=y_[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zt.warn(l.join(" "));return}jo(new ei(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="firebase-heartbeat-database",C_=1,ti="firebase-heartbeat-store";let Zl=null;function Xm(){return Zl||(Zl=zx(E_,C_,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ti)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sn.create("idb-open",{originalErrorMessage:t.message})})),Zl}async function N_(t){try{const n=(await Xm()).transaction(ti),r=await n.objectStore(ti).get(qm(t));return await n.done,r}catch(e){if(e instanceof pi)Zt.warn(e.message);else{const n=Sn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zt.warn(n.message)}}}async function bh(t,e){try{const r=(await Xm()).transaction(ti,"readwrite");await r.objectStore(ti).put(e,qm(t)),await r.done}catch(n){if(n instanceof pi)Zt.warn(n.message);else{const r=Sn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zt.warn(r.message)}}}function qm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=1024,T_=30*24*60*60*1e3;class I_{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new R_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Th();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=T_}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Th(),{heartbeatsToSend:r,unsentEntries:s}=j_(this._heartbeatsCache.heartbeats),i=bo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Zt.warn(n),""}}}function Th(){return new Date().toISOString().substring(0,10)}function j_(t,e=b_){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ih(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ih(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class R_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fx()?px().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await N_(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return bh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return bh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ih(t){return bo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){jo(new ei("platform-logger",e=>new Wx(e),"PRIVATE")),jo(new ei("heartbeat",e=>new I_(e),"PRIVATE")),Mr(ac,Ch,t),Mr(ac,Ch,"esm2017"),Mr("fire-js","")}M_("");var P_="firebase",D_="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(P_,D_,"app");const jh="@firebase/database",Rh="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm="";function A_(t){Jm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Se(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Zs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return zt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new O_(e)}}catch{}return new L_},Hn=Zm("localStorage"),dc=Zm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Gm("@firebase/database"),F_=function(){let t=1;return function(){return t++}}(),eg=function(t){const e=kx(t),n=new wx;n.update(e);const r=n.digest();return Cu.encodeByteArray(r)},mi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=mi.apply(null,r):typeof r=="object"?e+=Se(r):e+=r,e+=" "}return e};let Kn=null,Mh=!0;const z_=function(t,e){T(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Pr.logLevel=ne.VERBOSE,Kn=Pr.log.bind(Pr),e&&dc.set("logging_enabled",!0)):typeof t=="function"?Kn=t:(Kn=null,dc.remove("logging_enabled"))},Ie=function(...t){if(Mh===!0&&(Mh=!1,Kn===null&&dc.get("logging_enabled")===!0&&z_(!0)),Kn){const e=mi.apply(null,t);Kn(e)}},gi=function(t){return function(...e){Ie(t,...e)}},hc=function(...t){const e="FIREBASE INTERNAL ERROR: "+mi(...t);Pr.error(e)},en=function(...t){const e=`FIREBASE FATAL ERROR: ${mi(...t)}`;throw Pr.error(e),new Error(e)},He=function(...t){const e="FIREBASE WARNING: "+mi(...t);Pr.warn(e)},$_=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&He("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},dl=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},B_=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},rr="[MIN_NAME]",In="[MAX_NAME]",ar=function(t,e){if(t===e)return 0;if(t===rr||e===In)return-1;if(e===rr||t===In)return 1;{const n=Ph(t),r=Ph(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},W_=function(t,e){return t===e?0:t<e?-1:1},ps=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Se(e))},bu=function(t){if(typeof t!="object"||t===null)return Se(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Se(e[r]),n+=":",n+=bu(t[e[r]]);return n+="}",n},tg=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Re(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ng=function(t){T(!dl(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,l,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const h=u.join("");let d="";for(c=0;c<64;c+=8){let f=parseInt(h.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},U_=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},V_=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function H_(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const G_=new RegExp("^-?(0*)\\d{1,10}$"),Y_=-2147483648,Q_=2147483647,Ph=function(t){if(G_.test(t)){const e=Number(t);if(e>=Y_&&e<=Q_)return e}return null},ts=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw He("Exception was thrown by user callback.",n),e},Math.floor(0))}},K_=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Rs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){He(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ie("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',He(e)}}class Dr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Dr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="5",rg="v",sg="s",ig="r",og="f",lg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ag="ls",cg="p",fc="ac",ug="websocket",dg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,r,s,i=!1,o="",l=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function J_(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function fg(t,e,n){T(typeof e=="string","typeof type must == string"),T(typeof n=="object","typeof params must == object");let r;if(e===ug)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===dg)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);J_(t)&&(n.ns=t.namespace);const s=[];return Re(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.counters_={}}incrementCounter(e,n=1){zt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return nx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea={},ta={};function Iu(t){const e=t.toString();return ea[e]||(ea[e]=new Z_),ea[e]}function e1(t,e){const n=t.toString();return ta[n]||(ta[n]=e()),ta[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&ts(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="start",n1="close",r1="pLPCommand",s1="pRTLPCB",pg="id",mg="pw",gg="ser",i1="cb",o1="seg",l1="ts",a1="d",c1="dframe",yg=1870,vg=30,u1=yg-vg,d1=25e3,h1=3e4;class Cr{constructor(e,n,r,s,i,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gi(e),this.stats_=Iu(n),this.urlFn=c=>(this.appCheckToken&&(c[fc]=this.appCheckToken),fg(n,dg,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new t1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(h1)),B_(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ju((...i)=>{const[o,l,c,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Dh)this.id=l,this.password=c;else if(o===n1)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Dh]="t",r[gg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[i1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[rg]=Tu,this.transportSessionId&&(r[sg]=this.transportSessionId),this.lastSessionId&&(r[ag]=this.lastSessionId),this.applicationId&&(r[cg]=this.applicationId),this.appCheckToken&&(r[fc]=this.appCheckToken),typeof location<"u"&&location.hostname&&lg.test(location.hostname)&&(r[ig]=og);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Cr.forceAllow_=!0}static forceDisallow(){Cr.forceDisallow_=!0}static isAvailable(){return Cr.forceAllow_?!0:!Cr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!U_()&&!V_()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Se(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Fm(n),s=tg(r,u1);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[c1]="t",r[pg]=e,r[mg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Se(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ju{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=F_(),window[r1+this.uniqueCallbackIdentifier]=e,window[s1+this.uniqueCallbackIdentifier]=n,this.myIFrame=ju.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Ie("frame writing exception"),l.stack&&Ie(l.stack),Ie(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ie("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[pg]=this.myID,e[mg]=this.myPW,e[gg]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vg+r.length<=yg;){const o=this.pendingSegs.shift();r=r+"&"+o1+s+"="+o.seg+"&"+l1+s+"="+o.ts+"&"+a1+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(d1)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ie("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=16384,p1=45e3;let Ro=null;typeof MozWebSocket<"u"?Ro=MozWebSocket:typeof WebSocket<"u"&&(Ro=WebSocket);class St{constructor(e,n,r,s,i,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gi(this.connId),this.stats_=Iu(n),this.connURL=St.connectionURL_(n,o,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[rg]=Tu,typeof location<"u"&&location.hostname&&lg.test(location.hostname)&&(o[ig]=og),n&&(o[sg]=n),r&&(o[ag]=r),s&&(o[fc]=s),i&&(o[cg]=i),fg(e,ug,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hn.set("previous_websocket_failure",!0);try{let r;Um(),this.mySock=new Ro(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){St.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ro!==null&&!St.forceDisallow_}static previouslyFailed(){return Hn.isInMemoryStorage||Hn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Zs(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(T(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Se(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=tg(n,f1);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(p1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}St.responsesRequiredToBeHealthy=2;St.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Cr,St]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=St&&St.isAvailable();let r=n&&!St.previouslyFailed();if(e.webSocketOnly&&(n||He("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[St];else{const s=this.transports_=[];for(const i of ni.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);ni.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ni.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=6e4,g1=5e3,y1=10*1024,v1=100*1024,na="t",Ah="d",x1="s",Oh="r",_1="e",Lh="o",Fh="a",zh="n",$h="p",w1="h";class k1{constructor(e,n,r,s,i,o,l,c,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gi("c:"+this.id+":"),this.transportManager_=new ni(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Rs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>v1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>y1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(na in e){const n=e[na];n===Fh?this.upgradeIfSecondaryHealthy_():n===Oh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Lh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ps("t",e),r=ps("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$h,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Fh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ps("t",e),r=ps("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ps(na,e);if(Ah in e){const r=e[Ah];if(n===w1){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===zh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===x1?this.onConnectionShutdown_(r):n===Oh?this.onReset_(r):n===_1?hc("Server Error: "+r):n===Lh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Tu!==r&&He("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Rs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(m1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(g1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$h,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.allowedEvents_=e,this.listeners_={},T(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){T(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends _g{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Wm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Mo}getInitialEvent(e){return T(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=32,Wh=768;class K{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Q(){return new K("")}function L(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function jn(t){return t.pieces_.length-t.pieceNum_}function Z(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new K(t.pieces_,e)}function Ru(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function S1(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ri(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function wg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new K(e,0)}function de(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof K)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new K(n,0)}function F(t){return t.pieceNum_>=t.pieces_.length}function Ue(t,e){const n=L(t),r=L(e);if(n===null)return e;if(n===r)return Ue(Z(t),Z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function E1(t,e){const n=ri(t,0),r=ri(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=ar(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Mu(t,e){if(jn(t)!==jn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function pt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(jn(t)>jn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class C1{constructor(e,n){this.errorPrefix_=n,this.parts_=ri(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ul(this.parts_[r]);kg(this)}}function N1(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ul(e),kg(t)}function b1(t){const e=t.parts_.pop();t.byteLength_-=ul(e),t.parts_.length>0&&(t.byteLength_-=1)}function kg(t){if(t.byteLength_>Wh)throw new Error(t.errorPrefix_+"has a key path longer than "+Wh+" bytes ("+t.byteLength_+").");if(t.parts_.length>Bh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Bh+") or object contains a cycle "+Bn(t))}function Bn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends _g{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Pu}getInitialEvent(e){return T(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=1e3,T1=60*5*1e3,Uh=30*1e3,I1=1.3,j1=3e4,R1="server_kill",Vh=3;class Qt extends xg{constructor(e,n,r,s,i,o,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=Qt.nextPersistentConnectionId_++,this.log_=gi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ms,this.maxReconnectDelay_=T1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Um())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Mo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Se(i)),T(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new At,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),T(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),T(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,l=>{const c=l.d,u=l.s;Qt.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&zt(e,"w")){const r=Ur(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();He(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||xx(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Uh)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=vx(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),T(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Se(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):hc("Unrecognized action received from server: "+Se(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){T(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>j1&&(this.reconnectDelay_=ms),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*I1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Qt.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,r())},u=function(d){T(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Ie("getToken() completed but was canceled"):(Ie("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new k1(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{He(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(R1)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&He(d),c())}}}interrupt(e){Ie("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ie("Resuming connection for reason: "+e),delete this.interruptReasons_[e],sc(this.interruptReasons_)&&(this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>bu(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new K(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ie("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Vh&&(this.reconnectDelay_=Uh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ie("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Vh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Jm.replace(/\./g,"-")]=1,Wm()?e["framework.cordova"]=1:hx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Mo.getInstance().currentlyOnline();return sc(this.interruptReasons_)&&e}}Qt.nextPersistentConnectionId_=0;Qt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new z(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new z(rr,e),s=new z(rr,n);return this.compare(r,s)!==0}minPost(){return z.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bi;class Sg extends hl{static get __EMPTY_NODE(){return Bi}static set __EMPTY_NODE(e){Bi=e}compare(e,n){return ar(e.name,n.name)}isDefinedOn(e){throw es("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return z.MIN}maxPost(){return new z(In,Bi)}makePost(e,n){return T(typeof e=="string","KeyIndex indexValue must always be a string."),new z(e,Bi)}toString(){return".key"}}const Xn=new Sg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Te{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Te.RED,this.left=s??Je.EMPTY_NODE,this.right=i??Je.EMPTY_NODE}copy(e,n,r,s,i){return new Te(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Je.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Je.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Te.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Te.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Te.RED=!0;Te.BLACK=!1;class M1{copy(e,n,r,s,i){return this}insert(e,n,r){return new Te(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Je{constructor(e,n=Je.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Je(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Te.BLACK,null,null))}remove(e){return new Je(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Te.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Wi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Wi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Wi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Wi(this.root_,null,this.comparator_,!0,e)}}Je.EMPTY_NODE=new M1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t,e){return ar(t.name,e.name)}function Du(t,e){return ar(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc;function D1(t){pc=t}const Eg=function(t){return typeof t=="number"?"number:"+ng(t):"string:"+t},Cg=function(t){if(t.isLeafNode()){const e=t.val();T(typeof e=="string"||typeof e=="number"||typeof e=="object"&&zt(e,".sv"),"Priority must be a string or number.")}else T(t===pc||t.isEmpty(),"priority of unexpected type.");T(t===pc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh;class Ne{constructor(e,n=Ne.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,T(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Cg(this.priorityNode_)}static set __childrenNodeConstructor(e){Hh=e}static get __childrenNodeConstructor(){return Hh}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ne(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ne.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return F(e)?this:L(e)===".priority"?this.priorityNode_:Ne.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ne.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=L(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(T(r!==".priority"||jn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ne.__childrenNodeConstructor.EMPTY_NODE.updateChild(Z(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Eg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ng(this.value_):e+=this.value_,this.lazyHash_=eg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ne.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ne.__childrenNodeConstructor?-1:(T(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Ne.VALUE_TYPE_ORDER.indexOf(n),i=Ne.VALUE_TYPE_ORDER.indexOf(r);return T(s>=0,"Unknown leaf type: "+n),T(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ne.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ng,bg;function A1(t){Ng=t}function O1(t){bg=t}class L1 extends hl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?ar(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return z.MIN}maxPost(){return new z(In,new Ne("[PRIORITY-POST]",bg))}makePost(e,n){const r=Ng(e);return new z(n,new Ne("[PRIORITY-POST]",r))}toString(){return".priority"}}const ce=new L1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=Math.log(2);class z1{constructor(e){const n=i=>parseInt(Math.log(i)/F1,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Po=function(t,e,n,r){t.sort(e);const s=function(c,u){const h=u-c;let d,f;if(h===0)return null;if(h===1)return d=t[c],f=n?n(d):d,new Te(f,d.node,Te.BLACK,null,null);{const y=parseInt(h/2,10)+c,x=s(c,y),_=s(y+1,u);return d=t[y],f=n?n(d):d,new Te(f,d.node,Te.BLACK,x,_)}},i=function(c){let u=null,h=null,d=t.length;const f=function(x,_){const N=d-x,p=d;d-=x;const m=s(N+1,p),g=t[N],w=n?n(g):g;y(new Te(w,g.node,_,null,m))},y=function(x){u?(u.left=x,u=x):(h=x,u=x)};for(let x=0;x<c.count;++x){const _=c.nextBitIsOne(),N=Math.pow(2,c.count-(x+1));_?f(N,Te.BLACK):(f(N,Te.BLACK),f(N,Te.RED))}return h},o=new z1(t.length),l=i(o);return new Je(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra;const dr={};class Gt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return T(dr&&ce,"ChildrenNode.ts has not been loaded"),ra=ra||new Gt({".priority":dr},{".priority":ce}),ra}get(e){const n=Ur(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Je?n:null}hasIndex(e){return zt(this.indexSet_,e.toString())}addIndex(e,n){T(e!==Xn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(z.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let l;s?l=Po(r,e.getCompare()):l=dr;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const h=Object.assign({},this.indexes_);return h[c]=l,new Gt(h,u)}addToIndexes(e,n){const r=To(this.indexes_,(s,i)=>{const o=Ur(this.indexSet_,i);if(T(o,"Missing index implementation for "+i),s===dr)if(o.isDefinedOn(e.node)){const l=[],c=n.getIterator(z.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),Po(l,o.getCompare())}else return dr;else{const l=n.get(e.name);let c=s;return l&&(c=c.remove(new z(e.name,l))),c.insert(e,e.node)}});return new Gt(r,this.indexSet_)}removeFromIndexes(e,n){const r=To(this.indexes_,s=>{if(s===dr)return s;{const i=n.get(e.name);return i?s.remove(new z(e.name,i)):s}});return new Gt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gs;class O{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Cg(this.priorityNode_),this.children_.isEmpty()&&T(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gs||(gs=new O(new Je(Du),null,Gt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gs}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?gs:n}}getChild(e){const n=L(e);return n===null?this:this.getImmediateChild(n).getChild(Z(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(T(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new z(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?gs:this.priorityNode_;return new O(s,o,i)}}updateChild(e,n){const r=L(e);if(r===null)return n;{T(L(e)!==".priority"||jn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Z(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(ce,(o,l)=>{n[o]=l.val(e),r++,i&&O.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Eg(this.getPriority().val())+":"),this.forEachChild(ce,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":eg(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new z(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new z(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new z(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yi?-1:0}withIndex(e){if(e===Xn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Xn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ce),s=n.getIterator(ce);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Xn?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class $1 extends O{constructor(){super(new Je(Du),O.EMPTY_NODE,Gt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const yi=new $1;Object.defineProperties(z,{MIN:{value:new z(rr,O.EMPTY_NODE)},MAX:{value:new z(In,yi)}});Sg.__EMPTY_NODE=O.EMPTY_NODE;Ne.__childrenNodeConstructor=O;D1(yi);O1(yi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=!0;function ye(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),T(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ne(n,ye(e))}if(!(t instanceof Array)&&B1){const n=[];let r=!1;if(Re(t,(o,l)=>{if(o.substring(0,1)!=="."){const c=ye(l);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new z(o,c)))}}),n.length===0)return O.EMPTY_NODE;const i=Po(n,P1,o=>o.name,Du);if(r){const o=Po(n,ce.getCompare());return new O(i,ye(e),new Gt({".priority":o},{".priority":ce}))}else return new O(i,ye(e),Gt.Default)}else{let n=O.EMPTY_NODE;return Re(t,(r,s)=>{if(zt(t,r)&&r.substring(0,1)!=="."){const i=ye(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ye(e))}}A1(ye);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends hl{constructor(e){super(),this.indexPath_=e,T(!F(e)&&L(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?ar(e.name,n.name):i}makePost(e,n){const r=ye(e),s=O.EMPTY_NODE.updateChild(this.indexPath_,r);return new z(n,s)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,yi);return new z(In,e)}toString(){return ri(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1 extends hl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ar(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return z.MIN}maxPost(){return z.MAX}makePost(e,n){const r=ye(e);return new z(n,r)}toString(){return".value"}}const Tg=new W1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t){return{type:"value",snapshotNode:t}}function Hr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function si(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ii(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function U1(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){T(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(r.getChild(s))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(si(n,l)):T(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Hr(n,r)):o.trackChildChange(ii(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ce,(s,i)=>{n.hasChild(s)||r.trackChildChange(si(s,i))}),n.isLeafNode()||n.forEachChild(ce,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(ii(s,i,o))}else r.trackChildChange(Hr(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.indexedFilter_=new Ou(e.getIndex()),this.index_=e.getIndex(),this.startPost_=oi.getStartPost_(e),this.endPost_=oi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new z(n,r))||(r=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=O.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(O.EMPTY_NODE);const i=this;return n.forEachChild(ce,(o,l)=>{i.matches(new z(o,l))||(s=s.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new oi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new z(n,r))||(r=O.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=O.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(O.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,y)=>d(y,f)}else o=this.index_.getCompare();const l=e;T(l.numChildren()===this.limit_,"");const c=new z(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(l.hasChild(n)){const d=l.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const y=f==null?1:o(f,c);if(h&&!r.isEmpty()&&y>=0)return i!=null&&i.trackChildChange(ii(n,r,d)),l.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(si(n,d));const _=l.updateImmediateChild(n,O.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Hr(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?e:h&&o(u,c)>=0?(i!=null&&(i.trackChildChange(si(u.name,u.node)),i.trackChildChange(Hr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ce}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return T(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return T(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rr}hasEnd(){return this.endSet_}getIndexEndValue(){return T(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return T(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:In}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return T(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ce}copy(){const e=new Lu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function H1(t){return t.loadsAllData()?new Ou(t.getIndex()):t.hasLimit()?new V1(t):new oi(t)}function G1(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Y1(t,e){const n=t.copy();return n.index_=e,n}function Gh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ce?n="$priority":t.index_===Tg?n="$value":t.index_===Xn?n="$key":(T(t.index_ instanceof Au,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Se(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Se(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Se(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Se(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Se(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Yh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ce&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends xg{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=gi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(T(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Do.getListenId_(e,r),l={};this.listens_[o]=l;const c=Gh(e._queryParams);this.restRequest_(i+".json",c,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,r),Ur(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=Do.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Gh(e._queryParams),r=e._path.toString(),s=new At;return this.restRequest_(r+".json",n,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(r,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_x(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=Zs(l.responseText)}catch{He("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,c)}else l.status!==401&&l.status!==404&&He("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(){return{value:null,children:new Map}}function ns(t,e,n){if(F(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=L(e);t.children.has(r)||t.children.set(r,Ao());const s=t.children.get(r);e=Z(e),ns(s,e,n)}}function mc(t,e){if(F(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ce,(r,s)=>{ns(t,new K(r),s)}),mc(t,e)}}else if(t.children.size>0){const n=L(e);return e=Z(e),t.children.has(n)&&mc(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function gc(t,e,n){t.value!==null?n(e,t.value):K1(t,(r,s)=>{const i=new K(e.toString()+"/"+r);gc(s,i,n)})}function K1(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Re(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=10*1e3,q1=30*1e3,J1=5*60*1e3;class Z1{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new X1(e);const r=Qh+(q1-Qh)*Math.random();Rs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Re(e,(s,i)=>{i>0&&zt(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Rs(this.reportStats_.bind(this),Math.floor(Math.random()*2*J1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Et||(Et={}));function Fu(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $u(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Et.ACK_USER_WRITE,this.source=Fu()}operationForChild(e){if(F(this.path)){if(this.affectedTree.value!=null)return T(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new K(e));return new Oo(Q(),n,this.revert)}}else return T(L(this.path)===e,"operationForChild called for unrelated child."),new Oo(Z(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){this.source=e,this.path=n,this.type=Et.LISTEN_COMPLETE}operationForChild(e){return F(this.path)?new li(this.source,Q()):new li(this.source,Z(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Et.OVERWRITE}operationForChild(e){return F(this.path)?new sr(this.source,Q(),this.snap.getImmediateChild(e)):new sr(this.source,Z(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Et.MERGE}operationForChild(e){if(F(this.path)){const n=this.children.subtree(new K(e));return n.isEmpty()?null:n.value?new sr(this.source,Q(),n.value):new Gr(this.source,Q(),n)}else return T(L(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gr(this.source,Z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(F(e))return this.isFullyInitialized()&&!this.filtered_;const n=L(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tw(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(U1(o.childName,o.snapshotNode))}),ys(t,s,"child_removed",e,r,n),ys(t,s,"child_added",e,r,n),ys(t,s,"child_moved",i,r,n),ys(t,s,"child_changed",e,r,n),ys(t,s,"value",e,r,n),s}function ys(t,e,n,r,s,i){const o=r.filter(l=>l.type===n);o.sort((l,c)=>rw(t,l,c)),o.forEach(l=>{const c=nw(t,l,i);s.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,t.query_))})})}function nw(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function rw(t,e,n){if(e.childName==null||n.childName==null)throw es("Should only compare child_ events.");const r=new z(e.childName,e.snapshotNode),s=new z(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t,e){return{eventCache:t,serverCache:e}}function Ms(t,e,n,r){return fl(new Rn(e,n,r),t.serverCache)}function jg(t,e,n,r){return fl(t.eventCache,new Rn(e,n,r))}function Lo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ir(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa;const sw=()=>(sa||(sa=new Je(W_)),sa);class te{constructor(e,n=sw()){this.value=e,this.children=n}static fromObject(e){let n=new te(null);return Re(e,(r,s)=>{n=n.set(new K(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Q(),value:this.value};if(F(e))return null;{const r=L(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Z(e),n);return i!=null?{path:de(new K(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(F(e))return this;{const n=L(e),r=this.children.get(n);return r!==null?r.subtree(Z(e)):new te(null)}}set(e,n){if(F(e))return new te(n,this.children);{const r=L(e),i=(this.children.get(r)||new te(null)).set(Z(e),n),o=this.children.insert(r,i);return new te(this.value,o)}}remove(e){if(F(e))return this.children.isEmpty()?new te(null):new te(null,this.children);{const n=L(e),r=this.children.get(n);if(r){const s=r.remove(Z(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new te(null):new te(this.value,i)}else return this}}get(e){if(F(e))return this.value;{const n=L(e),r=this.children.get(n);return r?r.get(Z(e)):null}}setTree(e,n){if(F(e))return n;{const r=L(e),i=(this.children.get(r)||new te(null)).setTree(Z(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new te(this.value,o)}}fold(e){return this.fold_(Q(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(de(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Q(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(F(e))return null;{const i=L(e),o=this.children.get(i);return o?o.findOnPath_(Z(e),de(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Q(),n)}foreachOnPath_(e,n,r){if(F(e))return this;{this.value&&r(n,this.value);const s=L(e),i=this.children.get(s);return i?i.foreachOnPath_(Z(e),de(n,s),r):new te(null)}}foreach(e){this.foreach_(Q(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(de(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.writeTree_=e}static empty(){return new Tt(new te(null))}}function Ps(t,e,n){if(F(e))return new Tt(new te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Ue(s,e);return i=i.updateChild(o,n),new Tt(t.writeTree_.set(s,i))}else{const s=new te(n),i=t.writeTree_.setTree(e,s);return new Tt(i)}}}function yc(t,e,n){let r=t;return Re(n,(s,i)=>{r=Ps(r,de(e,s),i)}),r}function Kh(t,e){if(F(e))return Tt.empty();{const n=t.writeTree_.setTree(e,new te(null));return new Tt(n)}}function vc(t,e){return cr(t,e)!=null}function cr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ue(n.path,e)):null}function Xh(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ce,(r,s)=>{e.push(new z(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new z(r,s.value))}),e}function En(t,e){if(F(e))return t;{const n=cr(t,e);return n!=null?new Tt(new te(n)):new Tt(t.writeTree_.subtree(e))}}function xc(t){return t.writeTree_.isEmpty()}function Yr(t,e){return Rg(Q(),t.writeTree_,e)}function Rg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(T(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Rg(de(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(de(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t,e){return Ag(e,t)}function iw(t,e,n,r,s){T(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Ps(t.visibleWrites,e,n)),t.lastWriteId=r}function ow(t,e,n,r){T(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=yc(t.visibleWrites,e,n),t.lastWriteId=r}function lw(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function aw(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);T(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&cw(l,r.path)?s=!1:pt(r.path,l.path)&&(i=!0)),o--}if(s){if(i)return uw(t),!0;if(r.snap)t.visibleWrites=Kh(t.visibleWrites,r.path);else{const l=r.children;Re(l,c=>{t.visibleWrites=Kh(t.visibleWrites,de(r.path,c))})}return!0}else return!1}function cw(t,e){if(t.snap)return pt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&pt(de(t.path,n),e))return!0;return!1}function uw(t){t.visibleWrites=Mg(t.allWrites,dw,Q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function dw(t){return t.visible}function Mg(t,e,n){let r=Tt.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let l;if(i.snap)pt(n,o)?(l=Ue(n,o),r=Ps(r,l,i.snap)):pt(o,n)&&(l=Ue(o,n),r=Ps(r,Q(),i.snap.getChild(l)));else if(i.children){if(pt(n,o))l=Ue(n,o),r=yc(r,l,i.children);else if(pt(o,n))if(l=Ue(o,n),F(l))r=yc(r,Q(),i.children);else{const c=Ur(i.children,L(l));if(c){const u=c.getChild(Z(l));r=Ps(r,Q(),u)}}}else throw es("WriteRecord should have .snap or .children")}}return r}function Pg(t,e,n,r,s){if(!r&&!s){const i=cr(t.visibleWrites,e);if(i!=null)return i;{const o=En(t.visibleWrites,e);if(xc(o))return n;if(n==null&&!vc(o,Q()))return null;{const l=n||O.EMPTY_NODE;return Yr(o,l)}}}else{const i=En(t.visibleWrites,e);if(!s&&xc(i))return n;if(!s&&n==null&&!vc(i,Q()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(pt(u.path,e)||pt(e,u.path))},l=Mg(t.allWrites,o,e),c=n||O.EMPTY_NODE;return Yr(l,c)}}}function hw(t,e,n){let r=O.EMPTY_NODE;const s=cr(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(ce,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=En(t.visibleWrites,e);return n.forEachChild(ce,(o,l)=>{const c=Yr(En(i,new K(o)),l);r=r.updateImmediateChild(o,c)}),Xh(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=En(t.visibleWrites,e);return Xh(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function fw(t,e,n,r,s){T(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=de(e,n);if(vc(t.visibleWrites,i))return null;{const o=En(t.visibleWrites,i);return xc(o)?s.getChild(n):Yr(o,s.getChild(n))}}function pw(t,e,n,r){const s=de(e,n),i=cr(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=En(t.visibleWrites,s);return Yr(o,r.getNode().getImmediateChild(n))}else return null}function mw(t,e){return cr(t.visibleWrites,e)}function gw(t,e,n,r,s,i,o){let l;const c=En(t.visibleWrites,e),u=cr(c,Q());if(u!=null)l=u;else if(n!=null)l=Yr(c,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=o.getCompare(),f=i?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let y=f.getNext();for(;y&&h.length<s;)d(y,r)!==0&&h.push(y),y=f.getNext();return h}else return[]}function yw(){return{visibleWrites:Tt.empty(),allWrites:[],lastWriteId:-1}}function Fo(t,e,n,r){return Pg(t.writeTree,t.treePath,e,n,r)}function Bu(t,e){return hw(t.writeTree,t.treePath,e)}function qh(t,e,n,r){return fw(t.writeTree,t.treePath,e,n,r)}function zo(t,e){return mw(t.writeTree,de(t.treePath,e))}function vw(t,e,n,r,s,i){return gw(t.writeTree,t.treePath,e,n,r,s,i)}function Wu(t,e,n){return pw(t.writeTree,t.treePath,e,n)}function Dg(t,e){return Ag(de(t.treePath,e),t.writeTree)}function Ag(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;T(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),T(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,ii(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,si(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Hr(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,ii(r,e.snapshotNode,s.oldSnap));else throw es("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Og=new _w;class Uu{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Rn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Wu(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ir(this.viewCache_),i=vw(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t){return{filter:t}}function kw(t,e){T(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),T(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Sw(t,e,n,r,s){const i=new xw;let o,l;if(n.type===Et.OVERWRITE){const u=n;u.source.fromUser?o=_c(t,e,u.path,u.snap,r,s,i):(T(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!F(u.path),o=$o(t,e,u.path,u.snap,r,s,l,i))}else if(n.type===Et.MERGE){const u=n;u.source.fromUser?o=Cw(t,e,u.path,u.children,r,s,i):(T(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=wc(t,e,u.path,u.children,r,s,l,i))}else if(n.type===Et.ACK_USER_WRITE){const u=n;u.revert?o=Tw(t,e,u.path,r,s,i):o=Nw(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===Et.LISTEN_COMPLETE)o=bw(t,e,n.path,r,i);else throw es("Unknown operation type: "+n.type);const c=i.getChanges();return Ew(e,o,c),{viewCache:o,changes:c}}function Ew(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Lo(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Ig(Lo(e)))}}function Lg(t,e,n,r,s,i){const o=e.eventCache;if(zo(r,n)!=null)return e;{let l,c;if(F(n))if(T(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=ir(e),h=u instanceof O?u:O.EMPTY_NODE,d=Bu(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=Fo(r,ir(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=L(n);if(u===".priority"){T(jn(n)===1,"Can't have a priority with additional path components");const h=o.getNode();c=e.serverCache.getNode();const d=qh(r,n,h,c);d!=null?l=t.filter.updatePriority(h,d):l=o.getNode()}else{const h=Z(n);let d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=qh(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(u).updateChild(h,f):d=o.getNode().getImmediateChild(u)}else d=Wu(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,h,s,i):l=o.getNode()}}return Ms(e,l,o.isFullyInitialized()||F(n),t.filter.filtersNodes())}}function $o(t,e,n,r,s,i,o,l){const c=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(F(n))u=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(n,r);u=h.updateFullNode(c.getNode(),y,null)}else{const y=L(n);if(!c.isCompleteForPath(n)&&jn(n)>1)return e;const x=Z(n),N=c.getNode().getImmediateChild(y).updateChild(x,r);y===".priority"?u=h.updatePriority(c.getNode(),N):u=h.updateChild(c.getNode(),y,N,x,Og,null)}const d=jg(e,u,c.isFullyInitialized()||F(n),h.filtersNodes()),f=new Uu(s,d,i);return Lg(t,d,n,s,f,l)}function _c(t,e,n,r,s,i,o){const l=e.eventCache;let c,u;const h=new Uu(s,e,i);if(F(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ms(e,u,!0,t.filter.filtersNodes());else{const d=L(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Ms(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=Z(n),y=l.getNode().getImmediateChild(d);let x;if(F(f))x=r;else{const _=h.getCompleteChild(d);_!=null?Ru(f)===".priority"&&_.getChild(wg(f)).isEmpty()?x=_:x=_.updateChild(f,r):x=O.EMPTY_NODE}if(y.equals(x))c=e;else{const _=t.filter.updateChild(l.getNode(),d,x,f,h,o);c=Ms(e,_,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Jh(t,e){return t.eventCache.isCompleteForChild(e)}function Cw(t,e,n,r,s,i,o){let l=e;return r.foreach((c,u)=>{const h=de(n,c);Jh(e,L(h))&&(l=_c(t,l,h,u,s,i,o))}),r.foreach((c,u)=>{const h=de(n,c);Jh(e,L(h))||(l=_c(t,l,h,u,s,i,o))}),l}function Zh(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function wc(t,e,n,r,s,i,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;F(n)?u=r:u=new te(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const y=e.serverCache.getNode().getImmediateChild(d),x=Zh(t,y,f);c=$o(t,c,new K(d),x,s,i,o,l)}}),u.children.inorderTraversal((d,f)=>{const y=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!y){const x=e.serverCache.getNode().getImmediateChild(d),_=Zh(t,x,f);c=$o(t,c,new K(d),_,s,i,o,l)}}),c}function Nw(t,e,n,r,s,i,o){if(zo(s,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(F(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return $o(t,e,n,c.getNode().getChild(n),s,i,l,o);if(F(n)){let u=new te(null);return c.getNode().forEachChild(Xn,(h,d)=>{u=u.set(new K(h),d)}),wc(t,e,n,u,s,i,l,o)}else return e}else{let u=new te(null);return r.foreach((h,d)=>{const f=de(n,h);c.isCompleteForPath(f)&&(u=u.set(h,c.getNode().getChild(f)))}),wc(t,e,n,u,s,i,l,o)}}function bw(t,e,n,r,s){const i=e.serverCache,o=jg(e,i.getNode(),i.isFullyInitialized()||F(n),i.isFiltered());return Lg(t,o,n,r,Og,s)}function Tw(t,e,n,r,s,i){let o;if(zo(r,n)!=null)return e;{const l=new Uu(r,e,s),c=e.eventCache.getNode();let u;if(F(n)||L(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Fo(r,ir(e));else{const d=e.serverCache.getNode();T(d instanceof O,"serverChildren would be complete if leaf node"),h=Bu(r,d)}h=h,u=t.filter.updateFullNode(c,h,i)}else{const h=L(n);let d=Wu(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),d!=null?u=t.filter.updateChild(c,h,d,Z(n),l,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(c,h,O.EMPTY_NODE,Z(n),l,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Fo(r,ir(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||zo(r,Q())!=null,Ms(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Ou(r.getIndex()),i=H1(r);this.processor_=ww(i);const o=n.serverCache,l=n.eventCache,c=s.updateFullNode(O.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(O.EMPTY_NODE,l.getNode(),null),h=new Rn(c,o.isFullyInitialized(),s.filtersNodes()),d=new Rn(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=fl(d,h),this.eventGenerator_=new ew(this.query_)}get query(){return this.query_}}function jw(t){return t.viewCache_.serverCache.getNode()}function Rw(t){return Lo(t.viewCache_)}function Mw(t,e){const n=ir(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!F(e)&&!n.getImmediateChild(L(e)).isEmpty())?n.getChild(e):null}function ef(t){return t.eventRegistrations_.length===0}function Pw(t,e){t.eventRegistrations_.push(e)}function tf(t,e,n){const r=[];if(n){T(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function nf(t,e,n,r){e.type===Et.MERGE&&e.source.queryId!==null&&(T(ir(t.viewCache_),"We should always have a full cache before handling merges"),T(Lo(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Sw(t.processor_,s,e,n,r);return kw(t.processor_,i.viewCache),T(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Fg(t,i.changes,i.viewCache.eventCache.getNode(),null)}function Dw(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ce,(i,o)=>{r.push(Hr(i,o))}),n.isFullyInitialized()&&r.push(Ig(n.getNode())),Fg(t,r,n.getNode(),e)}function Fg(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return tw(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo;class zg{constructor(){this.views=new Map}}function Aw(t){T(!Bo,"__referenceConstructor has already been defined"),Bo=t}function Ow(){return T(Bo,"Reference.ts has not been loaded"),Bo}function Lw(t){return t.views.size===0}function Vu(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return T(i!=null,"SyncTree gave us an op for an invalid query."),nf(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(nf(o,e,n,r));return i}}function $g(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let l=Fo(n,s?r:null),c=!1;l?c=!0:r instanceof O?(l=Bu(n,r),c=!1):(l=O.EMPTY_NODE,c=!1);const u=fl(new Rn(l,c,!1),new Rn(r,s,!1));return new Iw(e,u)}return o}function Fw(t,e,n,r,s,i){const o=$g(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Pw(o,n),Dw(o,n)}function zw(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const l=Mn(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(tf(u,n,r)),ef(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(tf(c,n,r)),ef(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return l&&!Mn(t)&&i.push(new(Ow())(e._repo,e._path)),{removed:i,events:o}}function Bg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Cn(t,e){let n=null;for(const r of t.views.values())n=n||Mw(r,e);return n}function Wg(t,e){if(e._queryParams.loadsAllData())return ml(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Ug(t,e){return Wg(t,e)!=null}function Mn(t){return ml(t)!=null}function ml(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo;function $w(t){T(!Wo,"__referenceConstructor has already been defined"),Wo=t}function Bw(){return T(Wo,"Reference.ts has not been loaded"),Wo}let Ww=1;class rf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new te(null),this.pendingWriteTree_=yw(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Vg(t,e,n,r,s){return iw(t.pendingWriteTree_,e,n,r,s),s?rs(t,new sr(Fu(),e,n)):[]}function Uw(t,e,n,r){ow(t.pendingWriteTree_,e,n,r);const s=te.fromObject(n);return rs(t,new Gr(Fu(),e,s))}function hn(t,e,n=!1){const r=lw(t.pendingWriteTree_,e);if(aw(t.pendingWriteTree_,e)){let i=new te(null);return r.snap!=null?i=i.set(Q(),!0):Re(r.children,o=>{i=i.set(new K(o),!0)}),rs(t,new Oo(r.path,i,n))}else return[]}function vi(t,e,n){return rs(t,new sr(zu(),e,n))}function Vw(t,e,n){const r=te.fromObject(n);return rs(t,new Gr(zu(),e,r))}function Hw(t,e){return rs(t,new li(zu(),e))}function Gw(t,e,n){const r=Gu(t,n);if(r){const s=Yu(r),i=s.path,o=s.queryId,l=Ue(i,e),c=new li($u(o),l);return Qu(t,i,c)}else return[]}function Uo(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let l=[];if(o&&(e._queryIdentifier==="default"||Ug(o,e))){const c=zw(o,e,n,r);Lw(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(l=c.events,!s){const h=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(f,y)=>Mn(y));if(h&&!d){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const y=Kw(f);for(let x=0;x<y.length;++x){const _=y[x],N=_.query,p=Qg(t,_);t.listenProvider_.startListening(Ds(N),ai(t,N),p.hashFn,p.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(Ds(e),null):u.forEach(f=>{const y=t.queryToTagMap.get(gl(f));t.listenProvider_.stopListening(Ds(f),y)}))}Xw(t,u)}return l}function Hg(t,e,n,r){const s=Gu(t,r);if(s!=null){const i=Yu(s),o=i.path,l=i.queryId,c=Ue(o,e),u=new sr($u(l),c,n);return Qu(t,o,u)}else return[]}function Yw(t,e,n,r){const s=Gu(t,r);if(s){const i=Yu(s),o=i.path,l=i.queryId,c=Ue(o,e),u=te.fromObject(n),h=new Gr($u(l),c,u);return Qu(t,o,h)}else return[]}function kc(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,y)=>{const x=Ue(f,s);i=i||Cn(y,x),o=o||Mn(y)});let l=t.syncPointTree_.get(s);l?(o=o||Mn(l),i=i||Cn(l,Q())):(l=new zg,t.syncPointTree_=t.syncPointTree_.set(s,l));let c;i!=null?c=!0:(c=!1,i=O.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((y,x)=>{const _=Cn(x,Q());_&&(i=i.updateImmediateChild(y,_))}));const u=Ug(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=gl(e);T(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const y=qw();t.queryToTagMap.set(f,y),t.tagToQueryMap.set(y,f)}const h=pl(t.pendingWriteTree_,s);let d=Fw(l,e,n,h,i,c);if(!u&&!o&&!r){const f=Wg(l,e);d=d.concat(Jw(t,e,f))}return d}function Hu(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,l)=>{const c=Ue(o,e),u=Cn(l,c);if(u)return u});return Pg(s,e,i,n,!0)}function Qw(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Ue(u,n);r=r||Cn(h,d)});let s=t.syncPointTree_.get(n);s?r=r||Cn(s,Q()):(s=new zg,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Rn(r,!0,!1):null,l=pl(t.pendingWriteTree_,e._path),c=$g(s,e,l,i?o.getNode():O.EMPTY_NODE,i);return Rw(c)}function rs(t,e){return Gg(e,t.syncPointTree_,null,pl(t.pendingWriteTree_,Q()))}function Gg(t,e,n,r){if(F(t.path))return Yg(t,e,n,r);{const s=e.get(Q());n==null&&s!=null&&(n=Cn(s,Q()));let i=[];const o=L(t.path),l=t.operationForChild(o),c=e.children.get(o);if(c&&l){const u=n?n.getImmediateChild(o):null,h=Dg(r,o);i=i.concat(Gg(l,c,u,h))}return s&&(i=i.concat(Vu(s,t,r,n))),i}}function Yg(t,e,n,r){const s=e.get(Q());n==null&&s!=null&&(n=Cn(s,Q()));let i=[];return e.children.inorderTraversal((o,l)=>{const c=n?n.getImmediateChild(o):null,u=Dg(r,o),h=t.operationForChild(o);h&&(i=i.concat(Yg(h,l,c,u)))}),s&&(i=i.concat(Vu(s,t,r,n))),i}function Qg(t,e){const n=e.query,r=ai(t,n);return{hashFn:()=>(jw(e)||O.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Gw(t,n._path,r):Hw(t,n._path);{const i=H_(s,n);return Uo(t,n,null,i)}}}}function ai(t,e){const n=gl(e);return t.queryToTagMap.get(n)}function gl(t){return t._path.toString()+"$"+t._queryIdentifier}function Gu(t,e){return t.tagToQueryMap.get(e)}function Yu(t){const e=t.indexOf("$");return T(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new K(t.substr(0,e))}}function Qu(t,e,n){const r=t.syncPointTree_.get(e);T(r,"Missing sync point for query tag that we're tracking");const s=pl(t.pendingWriteTree_,e);return Vu(r,n,s,null)}function Kw(t){return t.fold((e,n,r)=>{if(n&&Mn(n))return[ml(n)];{let s=[];return n&&(s=Bg(n)),Re(r,(i,o)=>{s=s.concat(o)}),s}})}function Ds(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Bw())(t._repo,t._path):t}function Xw(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=gl(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function qw(){return Ww++}function Jw(t,e,n){const r=e._path,s=ai(t,e),i=Qg(t,n),o=t.listenProvider_.startListening(Ds(e),s,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(r);if(s)T(!Mn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,h,d)=>{if(!F(u)&&h&&Mn(h))return[ml(h).query];{let f=[];return h&&(f=f.concat(Bg(h).map(y=>y.query))),Re(d,(y,x)=>{f=f.concat(x)}),f}});for(let u=0;u<c.length;++u){const h=c[u];t.listenProvider_.stopListening(Ds(h),ai(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ku(n)}node(){return this.node_}}class Xu{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=de(this.path_,e);return new Xu(this.syncTree_,n)}node(){return Hu(this.syncTree_,this.path_)}}const Zw=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},sf=function(t,e,n){if(!t||typeof t!="object")return t;if(T(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return ek(t[".sv"],e,n);if(typeof t[".sv"]=="object")return tk(t[".sv"],e);T(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},ek=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:T(!1,"Unexpected server value: "+t)}},tk=function(t,e,n){t.hasOwnProperty("increment")||T(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&T(!1,"Unexpected increment value: "+r);const s=e.node();if(T(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Kg=function(t,e,n,r){return qu(e,new Xu(n,t),r)},Xg=function(t,e,n){return qu(t,new Ku(e),n)};function qu(t,e,n){const r=t.getPriority().val(),s=sf(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,l=sf(o.getValue(),e,n);return l!==o.getValue()||s!==o.getPriority().val()?new Ne(l,ye(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Ne(s))),o.forEachChild(ce,(l,c)=>{const u=qu(c,e.getImmediateChild(l),n);u!==c&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Zu(t,e){let n=e instanceof K?e:new K(e),r=t,s=L(n);for(;s!==null;){const i=Ur(r.node.children,s)||{children:{},childCount:0};r=new Ju(s,r,i),n=Z(n),s=L(n)}return r}function ss(t){return t.node.value}function qg(t,e){t.node.value=e,Sc(t)}function Jg(t){return t.node.childCount>0}function nk(t){return ss(t)===void 0&&!Jg(t)}function yl(t,e){Re(t.node.children,(n,r)=>{e(new Ju(n,t,r))})}function Zg(t,e,n,r){n&&!r&&e(t),yl(t,s=>{Zg(s,e,!0,r)}),n&&r&&e(t)}function rk(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function xi(t){return new K(t.parent===null?t.name:xi(t.parent)+"/"+t.name)}function Sc(t){t.parent!==null&&sk(t.parent,t.name,t)}function sk(t,e,n){const r=nk(n),s=zt(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Sc(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Sc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=/[\[\].#$\/\u0000-\u001F\u007F]/,ok=/[\[\].#$\u0000-\u001F\u007F]/,ia=10*1024*1024,ed=function(t){return typeof t=="string"&&t.length!==0&&!ik.test(t)},e0=function(t){return typeof t=="string"&&t.length!==0&&!ok.test(t)},lk=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),e0(t)},Vo=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!dl(t)||t&&typeof t=="object"&&zt(t,".sv")},Ho=function(t,e,n,r){r&&e===void 0||vl(Vr(t,"value"),e,n)},vl=function(t,e,n){const r=n instanceof K?new C1(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Bn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Bn(r)+" with contents = "+e.toString());if(dl(e))throw new Error(t+"contains "+e.toString()+" "+Bn(r));if(typeof e=="string"&&e.length>ia/3&&ul(e)>ia)throw new Error(t+"contains a string greater than "+ia+" utf8 bytes "+Bn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Re(e,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!ed(o)))throw new Error(t+" contains an invalid key ("+o+") "+Bn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);N1(r,o),vl(t,l,r),b1(r)}),s&&i)throw new Error(t+' contains ".value" child '+Bn(r)+" in addition to actual children.")}},ak=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=ri(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!ed(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(E1);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&pt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},t0=function(t,e,n,r){if(r&&e===void 0)return;const s=Vr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Re(e,(o,l)=>{const c=new K(o);if(vl(s,l,de(n,c)),Ru(c)===".priority"&&!Vo(l))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),ak(s,i)},ck=function(t,e,n){if(!(n&&e===void 0)){if(dl(e))throw new Error(Vr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Vo(e))throw new Error(Vr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},td=function(t,e,n,r){if(!(r&&n===void 0)&&!e0(n))throw new Error(Vr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},uk=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),td(t,e,n,r)},Gn=function(t,e){if(L(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},dk=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ed(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!lk(n))throw new Error(Vr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xl(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Mu(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function n0(t,e,n){xl(t,n),r0(t,r=>Mu(r,e))}function vt(t,e,n){xl(t,n),r0(t,r=>pt(r,e)||pt(e,r))}function r0(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(fk(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function fk(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Kn&&Ie("event: "+n.toString()),ts(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="repo_interrupt",mk=25;class gk{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ao(),this.transactionQueueTree_=new Ju,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yk(t,e,n){if(t.stats_=Iu(t.repoInfo_),t.forceRestClient_||K_())t.server_=new Do(t.repoInfo_,(r,s,i,o)=>{of(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>lf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Se(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Qt(t.repoInfo_,e,(r,s,i,o)=>{of(t,r,s,i,o)},r=>{lf(t,r)},r=>{vk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=e1(t.repoInfo_,()=>new Z1(t.stats_,t.server_)),t.infoData_=new Q1,t.infoSyncTree_=new rf({startListening:(r,s,i,o)=>{let l=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(l=vi(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),nd(t,"connected",!1),t.serverSyncTree_=new rf({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(l,c)=>{const u=o(l,c);vt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function s0(t){const n=t.infoData_.getNode(new K(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function _l(t){return Zw({timestamp:s0(t)})}function of(t,e,n,r,s){t.dataUpdateCount++;const i=new K(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=To(n,u=>ye(u));o=Yw(t.serverSyncTree_,i,c,s)}else{const c=ye(n);o=Hg(t.serverSyncTree_,i,c,s)}else if(r){const c=To(n,u=>ye(u));o=Vw(t.serverSyncTree_,i,c)}else{const c=ye(n);o=vi(t.serverSyncTree_,i,c)}let l=i;o.length>0&&(l=Qr(t,i)),vt(t.eventQueue_,l,o)}function lf(t,e){nd(t,"connected",e),e===!1&&kk(t)}function vk(t,e){Re(e,(n,r)=>{nd(t,n,r)})}function nd(t,e,n){const r=new K("/.info/"+e),s=ye(n);t.infoData_.updateSnapshot(r,s);const i=vi(t.infoSyncTree_,r,s);vt(t.eventQueue_,r,i)}function rd(t){return t.nextWriteId_++}function xk(t,e,n){const r=Qw(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ye(s).withIndex(e._queryParams.getIndex());kc(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=vi(t.serverSyncTree_,e._path,i);else{const l=ai(t.serverSyncTree_,e);o=Hg(t.serverSyncTree_,e._path,i,l)}return vt(t.eventQueue_,e._path,o),Uo(t.serverSyncTree_,e,n,null,!0),i},s=>(_i(t,"get for query "+Se(e)+" failed: "+s),Promise.reject(new Error(s))))}function _k(t,e,n,r,s){_i(t,"set",{path:e.toString(),value:n,priority:r});const i=_l(t),o=ye(n,r),l=Hu(t.serverSyncTree_,e),c=Xg(o,l,i),u=rd(t),h=Vg(t.serverSyncTree_,e,c,u,!0);xl(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,y)=>{const x=f==="ok";x||He("set at "+e+" failed: "+f);const _=hn(t.serverSyncTree_,u,!x);vt(t.eventQueue_,e,_),Pn(t,s,f,y)});const d=id(t,e);Qr(t,d),vt(t.eventQueue_,d,[])}function wk(t,e,n,r){_i(t,"update",{path:e.toString(),value:n});let s=!0;const i=_l(t),o={};if(Re(n,(l,c)=>{s=!1,o[l]=Kg(de(e,l),ye(c),t.serverSyncTree_,i)}),s)Ie("update() called with empty data.  Don't do anything."),Pn(t,r,"ok",void 0);else{const l=rd(t),c=Uw(t.serverSyncTree_,e,o,l);xl(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,h)=>{const d=u==="ok";d||He("update at "+e+" failed: "+u);const f=hn(t.serverSyncTree_,l,!d),y=f.length>0?Qr(t,e):e;vt(t.eventQueue_,y,f),Pn(t,r,u,h)}),Re(n,u=>{const h=id(t,de(e,u));Qr(t,h)}),vt(t.eventQueue_,e,[])}}function kk(t){_i(t,"onDisconnectEvents");const e=_l(t),n=Ao();gc(t.onDisconnect_,Q(),(s,i)=>{const o=Kg(s,i,t.serverSyncTree_,e);ns(n,s,o)});let r=[];gc(n,Q(),(s,i)=>{r=r.concat(vi(t.serverSyncTree_,s,i));const o=id(t,s);Qr(t,o)}),t.onDisconnect_=Ao(),vt(t.eventQueue_,Q(),r)}function Sk(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,s)=>{r==="ok"&&mc(t.onDisconnect_,e),Pn(t,n,r,s)})}function af(t,e,n,r){const s=ye(n);t.server_.onDisconnectPut(e.toString(),s.val(!0),(i,o)=>{i==="ok"&&ns(t.onDisconnect_,e,s),Pn(t,r,i,o)})}function Ek(t,e,n,r,s){const i=ye(n,r);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{o==="ok"&&ns(t.onDisconnect_,e,i),Pn(t,s,o,l)})}function Ck(t,e,n,r){if(sc(n)){Ie("onDisconnect().update() called with empty data.  Don't do anything."),Pn(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(s,i)=>{s==="ok"&&Re(n,(o,l)=>{const c=ye(l);ns(t.onDisconnect_,de(e,o),c)}),Pn(t,r,s,i)})}function Nk(t,e,n){let r;L(e._path)===".info"?r=kc(t.infoSyncTree_,e,n):r=kc(t.serverSyncTree_,e,n),n0(t.eventQueue_,e._path,r)}function Ec(t,e,n){let r;L(e._path)===".info"?r=Uo(t.infoSyncTree_,e,n):r=Uo(t.serverSyncTree_,e,n),n0(t.eventQueue_,e._path,r)}function bk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(pk)}function _i(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ie(n,...e)}function Pn(t,e,n,r){e&&ts(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function i0(t,e,n){return Hu(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function sd(t,e=t.transactionQueueTree_){if(e||wl(t,e),ss(e)){const n=l0(t,e);T(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Tk(t,xi(e),n)}else Jg(e)&&yl(e,n=>{sd(t,n)})}function Tk(t,e,n){const r=n.map(u=>u.currentWriteId),s=i0(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const h=n[u];T(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Ue(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const l=i.val(!0),c=e;t.server_.put(c.toString(),l,u=>{_i(t,"transaction put response",{path:c.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(hn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();wl(t,Zu(t.transactionQueueTree_,e)),sd(t,t.transactionQueueTree_),vt(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)ts(d[f])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{He("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Qr(t,e)}},o)}function Qr(t,e){const n=o0(t,e),r=xi(n),s=l0(t,n);return Ik(t,s,r),r}function Ik(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=Ue(n,c.path);let h=!1,d;if(T(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,d=c.abortReason,s=s.concat(hn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=mk)h=!0,d="maxretry",s=s.concat(hn(t.serverSyncTree_,c.currentWriteId,!0));else{const f=i0(t,c.path,o);c.currentInputSnapshot=f;const y=e[l].update(f.val());if(y!==void 0){vl("transaction failed: Data returned ",y,c.path);let x=ye(y);typeof y=="object"&&y!=null&&zt(y,".priority")||(x=x.updatePriority(f.getPriority()));const N=c.currentWriteId,p=_l(t),m=Xg(x,f,p);c.currentOutputSnapshotRaw=x,c.currentOutputSnapshotResolved=m,c.currentWriteId=rd(t),o.splice(o.indexOf(N),1),s=s.concat(Vg(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally)),s=s.concat(hn(t.serverSyncTree_,N,!0))}else h=!0,d="nodata",s=s.concat(hn(t.serverSyncTree_,c.currentWriteId,!0))}vt(t.eventQueue_,n,s),s=[],h&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}wl(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)ts(r[l]);sd(t,t.transactionQueueTree_)}function o0(t,e){let n,r=t.transactionQueueTree_;for(n=L(e);n!==null&&ss(r)===void 0;)r=Zu(r,n),e=Z(e),n=L(e);return r}function l0(t,e){const n=[];return a0(t,e,n),n.sort((r,s)=>r.order-s.order),n}function a0(t,e,n){const r=ss(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);yl(e,s=>{a0(t,s,n)})}function wl(t,e){const n=ss(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,qg(e,n.length>0?n:void 0)}yl(e,r=>{wl(t,r)})}function id(t,e){const n=xi(o0(t,e)),r=Zu(t.transactionQueueTree_,e);return rk(r,s=>{oa(t,s)}),oa(t,r),Zg(r,s=>{oa(t,s)}),n}function oa(t,e){const n=ss(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(T(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(T(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(hn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?qg(e,void 0):n.length=i+1,vt(t.eventQueue_,xi(e),s);for(let o=0;o<r.length;o++)ts(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Rk(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):He(`Invalid query segment '${n}' in query '${t}'`)}return e}const cf=function(t,e){const n=Mk(t),r=n.namespace;n.domain==="firebase.com"&&en(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&en("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$_();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new hg(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new K(n.pathString)}},Mk=function(t){let e="",n="",r="",s="",i="",o=!0,l="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(s=jk(t.substring(h,d)));const f=Rk(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const x=e.indexOf(".");r=e.substring(0,x).toLowerCase(),n=e.substring(x+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Pk=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=uf.charAt(n%64),n=Math.floor(n/64);T(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=uf.charAt(e[s]);return T(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Se(this.snapshot.exportVal())}}class u0{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return T(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new At;return Sk(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Gn("OnDisconnect.remove",this._path);const e=new At;return af(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Gn("OnDisconnect.set",this._path),Ho("OnDisconnect.set",e,this._path,!1);const n=new At;return af(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Gn("OnDisconnect.setWithPriority",this._path),Ho("OnDisconnect.setWithPriority",e,this._path,!1),ck("OnDisconnect.setWithPriority",n,!1);const r=new At;return Ek(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Gn("OnDisconnect.update",this._path),t0("OnDisconnect.update",e,this._path,!1);const n=new At;return Ck(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return F(this._path)?null:Ru(this._path)}get ref(){return new $t(this._repo,this._path)}get _queryIdentifier(){const e=Yh(this._queryParams),n=bu(e);return n==="{}"?"default":n}get _queryObject(){return Yh(this._queryParams)}isEqual(e){if(e=nn(e),!(e instanceof wi))return!1;const n=this._repo===e._repo,r=Mu(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+S1(this._path)}}function Ak(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ok(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Xn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==rr)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==In)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===ce){if(e!=null&&!Vo(e)||n!=null&&!Vo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(T(t.getIndex()instanceof Au||t.getIndex()===Tg,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class $t extends wi{constructor(e,n){super(e,n,new Lu,!1)}get parent(){const e=wg(this._path);return e===null?null:new $t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Kr{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new K(e),r=Xr(this.ref,e);return new Kr(this._node.getChild(n),r,ce)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Kr(s,Xr(this.ref,r),ce)))}hasChild(e){const n=new K(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Y(t,e){return t=nn(t),t._checkNotDeleted("ref"),e!==void 0?Xr(t._root,e):t._root}function Xr(t,e){return t=nn(t),L(t._path)===null?uk("child","path",e,!1):td("child","path",e,!1),new $t(t._repo,de(t._path,e))}function df(t){return t=nn(t),new Dk(t._repo,t._path)}function ld(t,e){t=nn(t),Gn("push",t._path),Ho("push",e,t._path,!0);const n=s0(t._repo),r=Pk(n),s=Xr(t,r),i=Xr(t,r);let o;return e!=null?o=We(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function Lk(t){return Gn("remove",t._path),We(t,null)}function We(t,e){t=nn(t),Gn("set",t._path),Ho("set",e,t._path,!1);const n=new At;return _k(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Fk(t,e){t0("update",e,t._path,!1);const n=new At;return wk(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function fn(t){t=nn(t);const e=new od(()=>{}),n=new ki(e);return xk(t._repo,t,n).then(r=>new Kr(r,new $t(t._repo,t._path),t._queryParams.getIndex()))}class ki{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new c0("value",this,new Kr(e.snapshotNode,new $t(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new u0(this,e,n):null}matches(e){return e instanceof ki?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class kl{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new u0(this,e,n):null}createEvent(e,n){T(e.childName!=null,"Child events should have a childName.");const r=Xr(new $t(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new c0(e.type,this,new Kr(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof kl?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function zk(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const c=n,u=(h,d)=>{Ec(t._repo,t,l),c(h,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new od(n,i||void 0),l=e==="value"?new ki(o):new kl(e,o);return Nk(t._repo,t,l),()=>Ec(t._repo,t,l)}function qn(t,e,n,r){return zk(t,"value",e,n,r)}function As(t,e,n){let r=null;const s=n?new od(n):null;e==="value"?r=new ki(s):e&&(r=new kl(e,s)),Ec(t._repo,t,r)}class d0{}class $k extends d0{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new wi(e._repo,e._path,G1(e._queryParams,this._limit),e._orderByCalled)}}function Bk(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new $k(t)}class Wk extends d0{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Ak(e,"orderByChild");const n=new K(this._path);if(F(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Au(n),s=Y1(e._queryParams,r);return Ok(s),new wi(e._repo,e._path,s,!0)}}function Uk(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return td("orderByChild","path",t,!1),new Wk(t)}function Vk(t,...e){let n=nn(t);for(const r of e)n=r._apply(n);return n}Aw($t);$w($t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="FIREBASE_DATABASE_EMULATOR_HOST",Cc={};let Gk=!1;function Yk(t,e,n,r){t.repoInfo_=new hg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Qk(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||en("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ie("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=cf(i,s),l=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[Hk]),u?(c=!0,i=`http://${u}?ns=${l.namespace}`,o=cf(i,s),l=o.repoInfo):c=!o.repoInfo.secure;const h=s&&c?new Dr(Dr.OWNER):new q_(t.name,t.options,e);dk("Invalid Firebase Database URL",o),F(o.path)||en("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Xk(l,t,h,new X_(t.name,n));return new qk(d,t)}function Kk(t,e){const n=Cc[e];(!n||n[t.key]!==t)&&en(`Database ${e}(${t.repoInfo_}) has already been deleted.`),bk(t),delete n[t.key]}function Xk(t,e,n,r){let s=Cc[e.name];s||(s={},Cc[e.name]=s);let i=s[t.toURLString()];return i&&en("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new gk(t,Gk,n,r),s[t.toURLString()]=i,i}class qk{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $t(this._repo,Q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Kk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&en("Cannot call "+e+" on a deleted database.")}}function Jk(t=S_(),e){const n=x_(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=cx("database");r&&Zk(n,...r)}return n}function Zk(t,e,n,r={}){t=nn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&en("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&en('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Dr(Dr.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:ux(r.mockUserToken,t.app.options.projectId);i=new Dr(o)}Yk(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t){A_(k_),jo(new ei("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Qk(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Mr(jh,Rh,t),Mr(jh,Rh,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS={".sv":"timestamp"};function sn(){return tS}function nS(t){return{".sv":{increment:t}}}Qt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Qt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};eS();const rS={apiKey:"AIzaSyBIiVYzJyoe5l_Sx9ctjXHSfWFa1iK4d2Q",authDomain:"timewaster-ranking.firebaseapp.com",databaseURL:"https://timewaster-ranking-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"timewaster-ranking",storageBucket:"timewaster-ranking.firebasestorage.app",messagingSenderId:"43389524361",appId:"1:43389524361:web:2bb4cb052bc6e5a8e4e958",measurementId:"G-6850FF04H6"};let hf=null,V=null,Go=!1;try{hf=Km(rS),V=Jk(hf),Go=!0}catch{Go=!1}const Yo=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],J={SESSIONS:"sessions",RANKINGS:"rankings",DAILY:"rankings/daily",WEEKLY:"rankings/weekly",MONTHLY:"rankings/monthly",ALL_TIME:"rankings/allTime",LIVE_FEED:"live-feed"},Ke={DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",ALL_TIME:"allTime"},ff={[Ke.DAILY]:{title:"   ",label:"",description:" "},[Ke.WEEKLY]:{title:"    ",label:"",description:"  "},[Ke.MONTHLY]:{title:"    ",label:"",description:"  "},[Ke.ALL_TIME]:{title:"   ",label:"",description:"  "}},Nc=[{name:"",description:"  !",url:"https://link.coupang.com/a/cvyvMI",category:"",icon:"",color:"from-blue-500 to-cyan-500"},{name:" ",description:"    !",url:"https://link.coupang.com/a/cvyvfR",category:"",icon:"",color:"from-red-500 to-orange-500"},{name:"     ",description:"   ",url:"https://link.coupang.com/a/cvywcQ",category:"",icon:"",color:"from-green-500 to-emerald-500"},{name:"",description:"   ",url:"https://link.coupang.com/a/cvyw8r",category:"",icon:"",color:"from-purple-500 to-pink-500"},{name:"  ",description:"   ",url:"https://link.coupang.com/a/cvyxs1",category:"",icon:"",color:"from-yellow-500 to-orange-500"},{name:" ",description:"   ",url:"https://link.coupang.com/a/cvyxI2",category:"",icon:"",color:"from-indigo-500 to-purple-500"},{name:"",description:"     ",url:"https://link.coupang.com/a/cvyx8I",category:"",icon:"",color:"from-green-400 to-teal-500"},{name:"  DIY",description:"   ",url:"https://link.coupang.com/a/cvyyv3",category:"",icon:"",color:"from-pink-500 to-rose-500"}],sS=()=>{const t=Math.floor(Math.random()*Nc.length);return Nc[t]},h0=t=>{let e=[];t<180?e=[0,1,2]:t<420?e=[1,2,3,4]:t<660?e=[3,4,5,6]:e=[5,6,7];const s=Math.floor(t/90)%e.length,i=e[s];return Nc[i]},iS=Mc.memo(({showAd:t,adMessage:e,extremeMode:n,elapsedTime:r,onProductClick:s,adCooldownInfo:i={cooldown:0,canGetToken:!0}})=>{const[o,l]=k.useState(!1),c=h0(r);return k.useEffect(()=>{if(!t)return;const u=()=>{l(!0),setTimeout(()=>{l(!1)},1e4)};u();const h=setInterval(u,7e4);return()=>clearInterval(h)},[t]),a.jsx("div",{className:"w-full",children:t?a.jsxs("div",{className:`pokemon-dialog pokemon-hover ${o?"pokemon-ad-blink":""}`,children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(nc,{className:"w-5 h-5 text-yellow-500 animate-bounce"}),a.jsx("span",{className:"pokemon-font text-lg text-gray-800 text-center font-bold",children:e}),a.jsx(nc,{className:"w-5 h-5 text-yellow-500 animate-bounce"})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:s,disabled:!i.canGetToken,className:`pokemon-button w-full transition-all duration-300 ${i.canGetToken?"":"opacity-50 cursor-not-allowed"}`,style:{background:i.canGetToken?`linear-gradient(135deg, ${c.color.includes("purple")?"#9C27B0, #E91E63":c.color.includes("blue")?"#2196F3, #03DAC6":c.color.includes("green")?"#4CAF50, #8BC34A":"var(--pokemon-gold), var(--pokemon-orange)"})`:"linear-gradient(135deg, #9E9E9E 0%, #757575 100%)",minHeight:"80px"},children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"text-2xl",children:i.canGetToken?c.icon:""})," ",a.jsx("div",{className:"pokemon-font font-bold text-black",children:i.canGetToken?c.name:"  "}),a.jsx("div",{className:"pokemon-font text-sm text-black/80 leading-tight",children:i.canGetToken?c.description:`${Math.ceil(i.cooldown/1e3)}      `})]})})}),a.jsx("div",{className:"mt-4 p-3 bg-blue-100 border-2 border-blue-400 rounded-lg",children:a.jsx("div",{className:"pokemon-font text-sm text-blue-800 text-center",children:i.canGetToken?"    ,   ":`   ! ${Math.ceil(i.cooldown/1e3)}      `})})]}):a.jsxs("div",{className:"pokemon-dialog text-center",children:[a.jsx("div",{className:"pokemon-font text-xl mb-4 text-red-800 font-bold",children:"    ? "}),a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(Su,{className:"w-12 h-12 text-red-400 animate-spin",style:{animationDuration:"3s"}}),a.jsx("div",{className:"pokemon-font text-red-600 font-bold",children:"1     !"})]}),a.jsx("div",{className:"mt-4 p-3 bg-red-100 border-2 border-red-400 rounded-lg animate-pulse",children:a.jsx("div",{className:"pokemon-font text-sm text-red-700 text-center font-bold",children:"     !    ~"})})]})})}),oS=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,type:i="info",showCancel:o=!1})=>{if(k.useEffect(()=>{const u=h=>{h.keyCode===27&&e()};return t&&document.addEventListener("keydown",u,!1),()=>{document.removeEventListener("keydown",u,!1)}},[t,e]),!t)return null;const l={success:"",warning:"",info:"",exit:""},c={success:"var(--pokemon-gold)",warning:"#FF6B35",info:"#2196F3",exit:"#FF4444"};return a.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"pokemon-celebration animate-bounce-in",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"inline-block p-4 rounded-full mb-4",style:{background:`linear-gradient(135deg, ${c[i]}, ${c[i]}CC)`,border:"4px solid var(--pokemon-black)",boxShadow:"4px 4px 0px rgba(0,0,0,0.4)"},children:a.jsx("div",{className:"text-4xl",children:l[i]})}),a.jsx("h3",{className:"pokemon-font text-2xl font-bold text-black mb-2",children:r})]}),a.jsx("div",{className:"text-center mb-8",children:a.jsx("div",{className:"bg-white/90 border-4 border-black rounded-lg p-4 mb-4",children:a.jsx("p",{className:"pokemon-font text-lg text-black leading-relaxed font-bold",children:s})})}),a.jsxs("div",{className:`flex justify-center gap-4 ${o?"flex-row":""}`,children:[o&&a.jsx("button",{onClick:e,className:"pokemon-button bg-gray-400 hover:bg-gray-500 text-black font-bold px-8 py-3 transition-all duration-200",style:{background:"linear-gradient(135deg, #9E9E9E 0%, #757575 100%)",minHeight:"50px"},children:""}),a.jsx("button",{onClick:n||e,className:"pokemon-button text-black font-bold px-8 py-3 transition-all duration-200",style:{background:`linear-gradient(135deg, ${c[i]}, ${c[i]}DD)`,minHeight:"50px"},children:""})]})]})})},Ut=t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")} ${n.toString().padStart(2,"0")}`};class lS{constructor(){this.sessionId=null,this.anonymousName=null,this.heartbeatInterval=null,this.listeners=new Map,this.isFirebaseConnected=Go,this.localRanking=[]}async initializeSession(){try{const e=sessionStorage.getItem("timewaster_tab_id")||`tab_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(sessionStorage.setItem("timewaster_tab_id",e),this.sessionId=`session_${e}_${Date.now()}`,this.anonymousName=Yo[Math.floor(Math.random()*Yo.length)],this.isFirebaseConnected){const n=Y(V,J.SESSIONS),r=await fn(n);if(r.exists()){const o=Object.entries(r.val());for(const[l,c]of o)c.sessionId&&c.sessionId.includes(e)&&(await We(Y(V,`${J.SESSIONS}/${l}/isActive`),!1),await We(Y(V,`${J.SESSIONS}/${l}/endTime`),sn()))}const s={sessionId:this.sessionId,anonymousName:this.anonymousName,startTime:sn(),currentTime:0,isActive:!0,lastHeartbeat:sn(),userAgent:navigator.userAgent.substring(0,100)},i=Y(V,`${J.SESSIONS}/${this.sessionId}`);await We(i,s),await df(Y(V,`${J.SESSIONS}/${this.sessionId}/isActive`)).set(!1),await df(Y(V,`${J.SESSIONS}/${this.sessionId}/endTime`)).set(sn()),this.startHeartbeat(),await this.addLiveFeedEvent("join",`${this.anonymousName} `)}else{const n={sessionId:this.sessionId,anonymousName:this.anonymousName,startTime:Date.now(),currentTime:0,isActive:!0,lastHeartbeat:Date.now()};this.localRanking=[n],localStorage.setItem("timewaster_local_ranking",JSON.stringify(this.localRanking)),this.startLocalHeartbeat()}return{sessionId:this.sessionId,anonymousName:this.anonymousName}}catch(e){throw e}}startHeartbeat(){this.isFirebaseConnected&&(this.heartbeatInterval=setInterval(async()=>{if(this.sessionId)try{await We(Y(V,`${J.SESSIONS}/${this.sessionId}/lastHeartbeat`),sn()),await We(Y(V,`${J.SESSIONS}/${this.sessionId}/isActive`),!0)}catch{}},2e3))}startLocalHeartbeat(){this.heartbeatInterval=setInterval(()=>{if(this.sessionId)try{const e=JSON.parse(localStorage.getItem("timewaster_local_ranking")||"[]"),n=e.findIndex(r=>r.sessionId===this.sessionId);n>=0&&(e[n].lastHeartbeat=Date.now(),e[n].isActive=!0,localStorage.setItem("timewaster_local_ranking",JSON.stringify(e)),this.localRanking=e)}catch{}},1e3)}async updateTime(e){if(this.sessionId)try{if(this.isFirebaseConnected){const n=Y(V,`${J.SESSIONS}/${this.sessionId}/currentTime`);await We(n,e),await this.checkMilestones(e)}else{const n=JSON.parse(localStorage.getItem("timewaster_local_ranking")||"[]"),r=n.findIndex(s=>s.sessionId===this.sessionId);r>=0&&(n[r].currentTime=e,localStorage.setItem("timewaster_local_ranking",JSON.stringify(n)),this.localRanking=n)}}catch{}}async checkMilestones(e){const n=Math.floor(e/60);if([5,10,15,30,60,120].includes(n)&&e%60===0){const s=n>=60?`${this.anonymousName} ${Math.floor(n/60)} ! `:`${this.anonymousName} ${n} ! `;await this.addLiveFeedEvent("milestone",s)}}async addLiveFeedEvent(e,n){try{const r=Y(V,J.LIVE_FEED),s=ld(r);await We(s,{type:e,message:n,timestamp:sn(),sessionId:this.sessionId,anonymousName:this.anonymousName}),await this.cleanupLiveFeed()}catch{}}async cleanupLiveFeed(){try{const e=Y(V,J.LIVE_FEED),n=await fn(e);if(n.exists()){const r=Object.entries(n.val());if(r.length>20){const s=r.sort(([,i],[,o])=>(i.timestamp||0)-(o.timestamp||0)).slice(0,r.length-20);for(const[i]of s)await Lk(Y(V,`${J.LIVE_FEED}/${i}`))}}}catch{}}async getRanking(e=Ke.DAILY){try{if(this.isFirebaseConnected){const n=Y(V,J.SESSIONS),r=await fn(n);return r.exists()?Object.values(r.val()).filter(c=>{const u=c.finalTime>0||c.currentTime>0,h=c.finalNickname||c.anonymousName,d=c.submittedToRanking===!0;return u&&h&&d}).filter(c=>this.isSessionInPeriod(c,e)).sort((c,u)=>{const h=c.finalTime||c.currentTime||0;return(u.finalTime||u.currentTime||0)-h}).slice(0,20).map((c,u)=>({rank:u+1,anonymousName:c.finalNickname||c.anonymousName,comment:c.finalComment||"",timeInSeconds:c.finalTime||c.currentTime,timeDisplay:this.formatTime(c.finalTime||c.currentTime),isCurrentUser:c.sessionId===this.sessionId})):[]}else return JSON.parse(localStorage.getItem("timewaster_local_ranking")||"[]").filter(s=>s.currentTime>0||s.finalTime>0).filter(s=>this.isSessionInPeriod(s,e)).sort((s,i)=>{const o=s.finalTime||s.currentTime||0;return(i.finalTime||i.currentTime||0)-o}).slice(0,20).map((s,i)=>({rank:i+1,anonymousName:s.finalNickname||s.anonymousName,comment:s.finalComment||"",timeInSeconds:s.finalTime||s.currentTime,timeDisplay:this.formatTime(s.finalTime||s.currentTime),isCurrentUser:s.sessionId===this.sessionId}))}catch{return[]}}isSessionInPeriod(e,n){const r=e.startTime,s=Date.now(),i=typeof r=="object"&&r.seconds?new Date(r.seconds*1e3):new Date(r),o=new Date(s);switch(n){case Ke.DAILY:return i.toDateString()===o.toDateString();case Ke.WEEKLY:const l=this.getStartOfWeek(o),c=this.getEndOfWeek(o);return i>=l&&i<=c;case Ke.MONTHLY:return i.getMonth()===o.getMonth()&&i.getFullYear()===o.getFullYear();case Ke.ALL_TIME:return!0;default:return!0}}getStartOfWeek(e){const n=new Date(e),r=n.getDay(),s=n.getDate()-r+(r===0?-6:1),i=new Date(n.setDate(s));return i.setHours(0,0,0,0),i}getEndOfWeek(e){const n=this.getStartOfWeek(e),r=new Date(n);return r.setDate(n.getDate()+6),r.setHours(23,59,59,999),r}onRankingChange(e,n=Ke.DAILY){if(this.isFirebaseConnected){const r=Y(V,J.SESSIONS),s=qn(r,async i=>{if(i.exists()){const o=await this.getRanking(n);e(o)}else e([])});return this.listeners.set(`ranking_${n}`,s),()=>this.removeListener(`ranking_${n}`)}else{const r=async()=>{const i=await this.getRanking(n);e(i)};r();const s=setInterval(r,5e3);return this.listeners.set(`ranking_${n}`,s),()=>{clearInterval(s),this.listeners.delete(`ranking_${n}`)}}}onLiveFeedChange(e){const n=Y(V,J.LIVE_FEED),r=qn(n,s=>{if(s.exists()){const i=Object.values(s.val()).sort((o,l)=>(l.timestamp||0)-(o.timestamp||0)).slice(0,5);e(i)}else e([])});return this.listeners.set("liveFeed",r),()=>this.removeListener("liveFeed")}removeListener(e){if(this.listeners.has(e)){const n=this.listeners.get(e);As(Y(V),"value",n),this.listeners.delete(e)}}removeAllListeners(){this.listeners.forEach((e,n)=>{this.removeListener(n)})}async endSession(){try{if(this.sessionId){if(this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.isFirebaseConnected)await We(Y(V,`${J.SESSIONS}/${this.sessionId}/isActive`),!1),await We(Y(V,`${J.SESSIONS}/${this.sessionId}/endTime`),sn()),await this.addLiveFeedEvent("leave",`${this.anonymousName}  `);else{const e=JSON.parse(localStorage.getItem("timewaster_local_ranking")||"[]"),n=e.findIndex(r=>r.sessionId===this.sessionId);n>=0&&(e[n].isActive=!1,e[n].endTime=Date.now(),localStorage.setItem("timewaster_local_ranking",JSON.stringify(e)))}this.removeAllListeners()}}catch{}}formatTime(e){const n=Math.floor(e/60),r=e%60;return`${n} ${r.toString().padStart(2,"0")}`}async getExpectedRank(e){try{if(this.isFirebaseConnected){const n=Y(V,J.SESSIONS),r=await fn(Vk(n,Uk("isActive"),Bk(100)));return r.exists()?Object.values(r.val()).filter(o=>o.isActive&&o.currentTime>0).filter(o=>this.isSessionInPeriod(o,Ke.DAILY)).sort((o,l)=>l.currentTime-o.currentTime).filter(o=>o.currentTime>e).length+1:1}else return JSON.parse(localStorage.getItem("timewaster_local_ranking")||"[]").filter(i=>i.isActive&&i.currentTime>0).filter(i=>this.isSessionInPeriod(i,Ke.DAILY)).sort((i,o)=>o.currentTime-i.currentTime).filter(i=>i.currentTime>e).length+1}catch{return null}}async submitScore(e,n=null,r=""){try{if(!this.sessionId)throw new Error("  ");const s=n||this.anonymousName;if(this.isFirebaseConnected){const i={};i[`${J.SESSIONS}/${this.sessionId}/finalTime`]=e,i[`${J.SESSIONS}/${this.sessionId}/finalNickname`]=s,i[`${J.SESSIONS}/${this.sessionId}/finalComment`]=r,i[`${J.SESSIONS}/${this.sessionId}/submittedToRanking`]=!0,i[`${J.SESSIONS}/${this.sessionId}/endTime`]=sn(),i[`${J.SESSIONS}/${this.sessionId}/isActive`]=!1,await Fk(Y(V),i);const o=await this.getExpectedRank(e);return await this.addLiveFeedEvent("ranking",`${s} ${this.formatTime(e)} ${o} ! `),!0}else{const i=JSON.parse(localStorage.getItem("timewaster_local_ranking")||"[]"),o=i.findIndex(l=>l.sessionId===this.sessionId);if(o>=0)return i[o].finalTime=e,i[o].finalNickname=s,i[o].finalComment=r,i[o].submittedToRanking=!0,i[o].endTime=Date.now(),localStorage.setItem("timewaster_local_ranking",JSON.stringify(i)),!0;throw new Error("   ")}}catch(s){throw s}}getCurrentUser(){return{sessionId:this.sessionId,anonymousName:this.anonymousName}}}const Ct=new lS,pf=({isOpen:t,onClose:e,onConfirm:n,onExit:r,elapsedTime:s,currentUser:i,totalTimeWasted:o,visits:l,adClicks:c})=>{const[u,h]=k.useState(""),[d,f]=k.useState(""),[y,x]=k.useState(!1);k.useState(!1);const[_,N]=k.useState(null);k.useEffect(()=>{t&&s>0&&(async()=>{try{const j=await Ct.getExpectedRank(s);N(j)}catch(j){console.error("   :",j)}})()},[t,s]);const p=E=>{const R=E.target.value.replace(/[<>"/\\&']/g,"").slice(0,12);h(R)},m=async()=>{x(!0);try{console.log("   :",{elapsedTime:s,customNickname:u.trim(),customComment:d.trim()});const j=u.trim().length>0?u.trim():(i==null?void 0:i.anonymousName)||"",R=d.trim();if(await Ct.submitScore(s,j,R))console.log("   !"),window.confirm&&alert(`   !
: ${j}
: ${Ut(s)}`),n();else throw new Error("  ")}catch(E){console.error("   :",E),window.alert&&alert("  .  .")}finally{x(!1)}},g=()=>{r?r():n()};if(!t)return null;const w=s>=60;return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"pokemon-dialog max-w-md w-full p-6 animate-fadeIn",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-6xl mb-2",children:""}),a.jsx("h2",{className:"pokemon-font text-2xl font-bold text-gray-800 mb-2",children:"  !"}),a.jsxs("p",{className:"pokemon-font text-gray-600",children:[Ut(s),"   "]})]}),a.jsxs("div",{className:"bg-gray-100 border-2 border-gray-300 rounded-lg p-4 mb-6 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"pokemon-font text-gray-600",children:" "}),a.jsx("span",{className:"pokemon-font text-gray-800 font-bold",children:Ut(s)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"pokemon-font text-gray-600",children:"  "}),a.jsxs("span",{className:"pokemon-font text-gray-800",children:[l,""]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"pokemon-font text-gray-600",children:" "}),a.jsx("span",{className:"pokemon-font text-gray-800 font-bold",children:Ut(o+s)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"pokemon-font text-gray-600",children:" "}),a.jsxs("span",{className:"pokemon-font text-gray-800",children:[c,""]})]}),_&&a.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t-2 border-gray-300",children:[a.jsx("span",{className:"pokemon-font text-gray-600",children:" "}),a.jsxs("span",{className:"pokemon-font text-yellow-600 font-bold",children:["#",_]})]})]}),w?a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"pokemon-font text-lg font-bold text-gray-800 mb-3 text-center",children:"  ?"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block pokemon-font text-sm text-gray-700 mb-2",children:" ()"}),a.jsx("input",{type:"text",value:u,onChange:p,placeholder:(i==null?void 0:i.anonymousName)||" ",className:"w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-lg pokemon-font text-gray-800 placeholder-gray-500 focus:outline-none focus:border-blue-400 transition-all",maxLength:"12"}),a.jsxs("p",{className:"pokemon-font text-xs text-gray-500 mt-1",children:[u.length,"/12 (   )"]})]}),a.jsxs("div",{className:"bg-gray-50 border-2 border-gray-300 rounded-lg p-3 mb-4",children:[a.jsx("p",{className:"pokemon-font text-sm text-gray-600 mb-2",children:"  :"}),a.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-blue-100 to-blue-200 border-2 border-blue-300 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"pokemon-font text-blue-700 font-bold",children:["#",_||"?"]}),a.jsx("span",{className:"pokemon-font text-gray-800 font-medium",children:u||(i==null?void 0:i.anonymousName)||""})]}),a.jsx("span",{className:"pokemon-font text-gray-700 font-bold text-sm",children:Ut(s)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block pokemon-font text-sm text-gray-700 mb-2",children:"   ()"}),a.jsx("textarea",{value:d,onChange:E=>f(E.target.value.slice(0,30)),placeholder:"   ...",className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg pokemon-font text-sm text-gray-800 placeholder-gray-500 focus:outline-none focus:border-blue-400 transition-all resize-none",rows:"2",maxLength:"30"}),a.jsxs("p",{className:"pokemon-font text-xs text-gray-500 mt-1",children:[d.length,"/30 (  !)"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:m,disabled:y,className:"pokemon-button w-full disabled:opacity-50",children:y?a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-800 rounded-full animate-spin"}),a.jsx("span",{children:" ..."})]}):"   "}),a.jsx("button",{onClick:g,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 hover:text-gray-800 pokemon-font font-medium py-3 px-6 rounded-lg border-2 border-gray-400 transition-all focus:outline-none focus:ring-2 focus:ring-gray-400",children:"    "})]})]}):a.jsxs("div",{className:"mb-6 text-center",children:[a.jsx("div",{className:"text-4xl mb-3",children:""}),a.jsxs("div",{className:"pokemon-dialog bg-yellow-100 border-2 border-yellow-400 rounded-lg p-4 mb-4",children:[a.jsx("p",{className:"pokemon-font text-yellow-800 font-bold mb-2",children:"    "}),a.jsx("p",{className:"pokemon-font text-yellow-700 text-sm",children:"1        !"})]}),a.jsx("button",{onClick:g,className:"pokemon-button w-full",children:" "})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:e,className:"pokemon-font text-gray-500 hover:text-gray-700 text-sm underline transition-colors",children:"    "})})]})})},aS=({isActive:t,celebration:e,onComplete:n})=>{if(!e)return null;const[r,s]=k.useState(!1),[i,o]=k.useState(!1),[l,c]=k.useState(!1),[u,h]=k.useState([]),[d,f]=k.useState(0),y=k.useRef([]),x=()=>{y.current.forEach(p=>clearTimeout(p)),y.current=[]};k.useEffect(()=>{if(!t||!e)return;x();const p=["","","","","","","","","","","","","","",""],m=Array.from({length:30},(g,w)=>({id:w,x:Math.random()*100,y:Math.random()*100,emoji:p[w%p.length],delay:w*.05,duration:4+Math.random()*2,size:.8+Math.random()*.4}));return h(m),s(!0),o(!0),f(1),y.current.push(setTimeout(()=>{c(!0),f(2)},800)),y.current.push(setTimeout(()=>{f(3)},2e3)),y.current.push(setTimeout(()=>{s(!1),o(!1)},5e3)),y.current.push(setTimeout(()=>{c(!1),y.current.push(setTimeout(()=>{n&&n()},500))},8e3)),x},[t,e,n]),k.useEffect(()=>{const p=m=>{m.key==="Escape"&&(r||i||l)&&(x(),s(!1),o(!1),c(!1),setTimeout(()=>{n&&n()},100))};if(t)return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[t,r,i,l,n]);const _={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,pointerEvents:l?"auto":"none",overflow:"hidden",fontFamily:"'Galmuri11', 'Galmuri9', monospace"},flashBg:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:d===1?"radial-gradient(circle, rgba(255, 215, 0, 0.2) 0%, rgba(255, 107, 53, 0.1) 100%)":d===2?"radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, rgba(255, 107, 53, 0.05) 100%)":"radial-gradient(circle, rgba(255, 215, 0, 0.05) 0%, rgba(255, 107, 53, 0.02) 100%)",transition:"background 0.5s ease-in-out, opacity 0.5s ease-in-out",opacity:r?1:0,pointerEvents:"none"},messageContainer:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"auto",zIndex:1e5,opacity:l?1:0,transition:"opacity 0.5s ease-in-out",animation:d===2?"epicMessageEntrance 1s ease-out":d>=3?"epicMessageHeartbeat 2s ease-in-out infinite":"none"},messageBox:{background:"linear-gradient(135deg, #FFD700 0%, #FF6B35 50%, #FFD700 100%)",color:"#000000",border:"6px solid #000000",borderRadius:"20px",padding:"40px 60px",fontSize:"28px",fontWeight:"bold",textAlign:"center",maxWidth:"80vw",minWidth:"400px",textShadow:"2px 2px 0px rgba(255, 255, 255, 0.8)",lineHeight:"1.4",boxShadow:`
        4px 4px 0px rgba(0, 0, 0, 0.4),
        inset 2px 2px 0px rgba(255, 255, 255, 0.3),
        0 0 25px rgba(255, 215, 0, 0.7)
      `,cursor:"pointer",position:"relative"},title:{fontSize:"36px",marginBottom:"16px",display:"block",textShadow:"3px 3px 0px rgba(255, 255, 255, 0.9)"},message:{fontSize:"22px",color:"#003366",fontWeight:"bold"},closeHint:{fontSize:"14px",color:"#666",marginTop:"16px",opacity:.8},particle:{position:"absolute",fontSize:"32px",pointerEvents:"none",zIndex:99998,textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)",opacity:i?1:0,transition:"opacity 0.5s ease-in-out",animation:"epicParticleExplosion 5s ease-out forwards"}};k.useEffect(()=>{const p=document.createElement("style");return p.type="text/css",p.innerHTML=`
      @keyframes epicMessageEntrance {
        0% { 
          transform: translate(-50%, -50%) scale(0.3) rotate(-15deg);
        }
        50% { 
          transform: translate(-50%, -50%) scale(1.2) rotate(5deg);
        }
        100% { 
          transform: translate(-50%, -50%) scale(1) rotate(0deg);
        }
      }
      
      @keyframes epicMessageHeartbeat {
        0%, 100% { 
          transform: translate(-50%, -50%) scale(1);
        }
        50% { 
          transform: translate(-50%, -50%) scale(1.05);
        }
      }
      
      @keyframes epicParticleExplosion {
        0% { 
          transform: translateY(0px) scale(0.2) rotate(0deg);
        }
        10% { 
          transform: translateY(-20px) scale(0.6) rotate(90deg);
        }
        50% { 
          transform: translateY(-80px) scale(1.2) rotate(270deg);
        }
        100% { 
          transform: translateY(-150px) scale(1.5) rotate(720deg);
        }
      }
    `,document.head.appendChild(p),()=>{document.head.contains(p)&&document.head.removeChild(p)}},[]);const N=()=>{x(),s(!1),o(!1),c(!1),setTimeout(()=>{n&&n()},100)};return!r&&!i&&!l?null:a.jsxs("div",{style:_.overlay,children:[a.jsx("div",{style:_.flashBg}),a.jsx("div",{style:_.messageContainer,children:a.jsxs("div",{style:_.messageBox,onClick:N,children:[a.jsx("div",{style:_.title,children:" ! "}),a.jsx("div",{style:_.message,children:(e==null?void 0:e.message)||"!"}),d>=3&&a.jsx("div",{style:_.closeHint,children:"  ESC  "})]})}),u.map(p=>a.jsx("div",{style:{..._.particle,left:`${p.x}%`,top:`${p.y}%`,animationDelay:`${p.delay}s`,animationDuration:`${p.duration}s`,fontSize:p.size>1.1?"48px":p.size>.9?"40px":"28px"},children:p.emoji},p.id))]})},Nn={trackSessionStart:(t,e)=>{typeof gtag<"u"&&gtag("event","session_start",{event_category:"engagement",visits_count:t,total_time_wasted:e,returning_visitor:t>1})},trackExtremeMode:()=>{typeof gtag<"u"&&gtag("event","extreme_mode_entered",{event_category:"engagement",event_label:"time_milestone",value:300})},trackMilestone:(t,e)=>{typeof gtag<"u"&&gtag("event","milestone_achieved",{event_category:"engagement",milestone_seconds:t,milestone_message:e})},trackCoupangClick:(t,e,n,r)=>{typeof gtag<"u"&&gtag("event","coupang_click",{event_category:"affiliate",event_label:t,product_category:e,time_wasted_seconds:n,value:r})},trackShare:(t,e)=>{typeof gtag<"u"&&gtag("event","share",{method:t,content_type:"time_wasted",time_wasted_seconds:e})},trackExit:t=>{typeof gtag<"u"&&gtag("event","exit_confirmed",{event_category:"engagement",time_wasted_seconds:t,exit_method:"button"})},trackActivitySelect:(t,e)=>{typeof gtag<"u"&&gtag("event","activity_selected",{event_category:"productivity",event_label:t,time_wasted_seconds:e,custom_parameter_1:"smart_recommendation"})},trackSmartMessage:(t,e,n)=>{typeof gtag<"u"&&gtag("event","smart_message_shown",{event_category:"engagement",message_type:t,message_category:e,time_wasted_seconds:n})}},Ar={shareToX:(t,e)=>{Nn.trackShare("x",t);const n=`    ${e(t)} .   ?`,r=encodeURIComponent(window.location.href);window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${r}`,"_blank")},shareToKakao:(t,e,n)=>{if(Nn.trackShare("kakao",t),typeof Kakao<"u"&&Kakao.isInitialized())try{Kakao.Share.sendDefault({objectType:"feed",content:{title:"  ",description:`   ${e(t)} !   ? `,imageUrl:"https://pg-parunson.github.io/timewaster/timer-icon.svg",link:{mobileWebUrl:window.location.href,webUrl:window.location.href}},buttons:[{title:" ",link:{mobileWebUrl:window.location.href,webUrl:window.location.href}}]}),n("  !","   ! ","success")}catch(r){console.error("  :",r),Ar.fallbackKakaoShare(t,e,n)}else Ar.fallbackKakaoShare(t,e,n)},fallbackKakaoShare:(t,e,n)=>{const r=`  

   ${e(t)} !   ? 

${window.location.href}`;navigator.share?navigator.share({title:"  ",text:r,url:window.location.href}):Ar.copyToClipboard(r,n)},copyToClipboard:(t,e,n,r)=>{const s=t||`    ${r(n)} .   ?

${window.location.href}`;if(navigator.clipboard)navigator.clipboard.writeText(s);else{const i=document.createElement("textarea");i.value=s,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)}e(" !","   !","success")}},cS=({elapsedTime:t,formatTime:e,showModernModal:n})=>{const r=()=>{Ar.shareToX(t,e)},s=()=>{Ar.shareToKakao(t,e,n)},i=()=>{Ar.copyToClipboard(null,n,t,e)};return a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("button",{onClick:r,className:"pokemon-button w-full flex items-center justify-center gap-3",style:{background:"linear-gradient(135deg, #000000 0%, #434343 100%)",color:"#FFFFFF"},children:[a.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:a.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current","aria-hidden":"true",children:a.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),a.jsx("span",{className:"pokemon-font font-bold",children:"X "})]}),a.jsxs("button",{onClick:s,className:"pokemon-button w-full flex items-center justify-center gap-3",style:{background:"linear-gradient(135deg, #FFEB3B 0%, #FF9800 100%)",color:"#000"},children:[a.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:a.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current","aria-hidden":"true",children:a.jsx("path",{d:"M12 3C6.477 3 2 6.477 2 11.5c0 3.518 2.196 6.612 5.5 8.5v3l3.5-3c.5.1 1 .1 1.5 0l3.5 3v-3c3.304-1.888 5.5-4.982 5.5-8.5C22 6.477 17.523 3 12 3z"})})}),a.jsx("span",{className:"pokemon-font",children:" "})]}),a.jsxs("button",{onClick:i,className:"pokemon-button w-full flex items-center justify-center gap-3",style:{background:"linear-gradient(135deg, #9E9E9E 0%, #607D8B 100%)",color:"#FFF"},children:[a.jsx(Yv,{className:"w-5 h-5"}),a.jsx("span",{className:"pokemon-font",children:" "})]})]}),a.jsx("div",{className:"mt-4 p-3 bg-yellow-100 border-2 border-yellow-400 rounded-lg",children:a.jsx("div",{className:"pokemon-font text-sm text-yellow-800",children:"        !"})})]})},uS=({elapsedTime:t})=>t<1800?null:a.jsx("div",{className:"mt-4 text-center animate-fade-in",children:a.jsxs("div",{className:"bg-gradient-to-r from-purple-500/30 via-pink-500/30 to-yellow-500/30 border-2 border-purple-400/50 rounded-3xl px-6 py-4 backdrop-blur-xl shadow-2xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-pink-600/20 animate-pulse"}),a.jsx("div",{className:"absolute top-2 left-4 w-2 h-2 bg-yellow-400 rounded-full animate-ping"}),a.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 bg-pink-400 rounded-full animate-ping delay-500"}),a.jsx("div",{className:"absolute bottom-3 right-8 w-1.5 h-1.5 bg-purple-400 rounded-full animate-ping delay-1000"}),a.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-3",children:[a.jsx("div",{className:"text-2xl animate-bounce",children:""}),a.jsx("p",{className:"text-xl font-bold bg-gradient-to-r from-yellow-300 via-pink-300 to-purple-300 bg-clip-text text-transparent animate-pulse",children:"!     !"}),a.jsx("div",{className:"text-2xl animate-bounce delay-200",children:""})]}),a.jsx("div",{className:"absolute -top-2 -right-2",children:a.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-3 py-1 rounded-full text-xs font-bold animate-pulse shadow-lg",children:" !"})})]})}),dS=({elapsedTime:t,onExit:e,inline:n=!1,showAlways:r=!1})=>!r&&t<=180?null:n?a.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 font-medium border border-red-400",title:" ",children:[a.jsx(vh,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}):a.jsx("button",{onClick:e,className:"fixed bottom-8 right-8 bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white p-4 rounded-full shadow-2xl animate-bounce z-50 backdrop-blur border border-red-400 group floating-button",title:" ",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vh,{className:"w-6 h-6"}),a.jsx("span",{className:"hidden group-hover:block text-sm font-medium whitespace-nowrap bg-black/70 px-2 py-1 rounded absolute bottom-full mb-2 right-0",children:" "})]})}),la=["    ?","   ","  ","   ","  ","  ","   ","  "],f0=Mc.memo(({showModal:t,trainer:e,onClose:n,currentLabel:r})=>{if(!t||!e||!e.rank)return null;const s=h=>{switch(h){case 1:return{emoji:"",icon:a.jsx(Pm,{className:"w-5 h-5 text-white"})};case 2:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-white"})};case 3:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-white"})};case 4:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-white"})};case 5:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-black"})};case 6:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-black"})};case 7:case 8:case 9:case 10:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-black"})};default:return{emoji:"",icon:a.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-xs font-bold text-gray-500",children:h})}}},i=h=>{switch(h){case 1:return"LEGENDARY";case 2:return"CHALLENGER";case 3:return"GRANDMASTER";case 4:return"MASTER";case 5:return"DIAMOND";case 6:return"PLATINUM";case 7:case 8:case 9:case 10:return"GOLD";default:return null}},o=s(e.rank),l=i(e.rank),c=h=>{h.target===h.currentTarget&&n()},u=a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ranker-card-backdrop",style:{zIndex:9999},onClick:c,children:a.jsxs("div",{className:"bg-white border-4 border-black rounded-lg max-w-md w-full mx-4 pokemon-font ranker-card-modal",style:{maxHeight:"90vh",overflowY:"auto"},onClick:h=>h.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b-2 border-black bg-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_h,{className:"w-5 h-5 text-gray-700"}),a.jsx("h3",{className:"text-lg font-bold text-gray-800",children:" "})]}),a.jsx("button",{onClick:n,className:"w-8 h-8 flex items-center justify-center bg-red-500 text-white rounded border-2 border-black hover:bg-red-600 transition-colors",children:a.jsx(Eu,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"text-center mb-6",children:a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[a.jsx("span",{className:"text-3xl",children:o.emoji}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:["#",e.rank]}),l&&a.jsx("div",{className:`text-sm px-2 py-1 rounded border-2 border-black font-bold ${e.rank===1?"bg-yellow-100 text-yellow-900":e.rank===2?"bg-purple-100 text-purple-900":e.rank===3?"bg-blue-100 text-blue-900":e.rank===4?"bg-green-100 text-green-900":e.rank===5?"bg-yellow-100 text-yellow-900":e.rank===6?"bg-gray-100 text-gray-900":"bg-orange-100 text-orange-900"}`,children:l})]})]})}),a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 border-2 border-gray-300 rounded",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(_h,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-600 font-bold",children:""})]}),a.jsxs("div",{className:"text-lg font-bold text-gray-800 break-words",children:[e.anonymousName,e.isCurrentUser&&a.jsx("span",{className:"ml-2 text-xs bg-blue-500 text-white px-2 py-1 rounded-full",children:""})]})]}),a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 border-2 border-gray-300 rounded",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Su,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-600 font-bold",children:"  "})]}),a.jsx("div",{className:"text-xl font-bold text-gray-800",children:e.timeDisplay})]}),e.comment&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 border-2 border-gray-300 rounded",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Jv,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-600 font-bold",children:""})]}),a.jsx("div",{className:"text-base text-gray-800 break-words leading-relaxed",children:e.comment})]}),a.jsx("div",{className:"text-center mt-6 pt-4 border-t-2 border-gray-300",children:a.jsxs("div",{className:"text-sm text-gray-600",children:[" ",r.label,"  "]})})]}),a.jsx("div",{className:"p-4 border-t-2 border-black bg-gray-100 text-center",children:a.jsx("button",{onClick:n,className:"pokemon-button px-6 py-2",children:""})})]})});return Bv.createPortal(u,document.body)});f0.displayName="TrainerCardModal";const hS=({isVisible:t=!0,currentUser:e=null,elapsedTime:n=0})=>{const[r,s]=k.useState([]),[i,o]=k.useState(null),[l,c]=k.useState(!0),[u,h]=k.useState(null),[d,f]=k.useState(Ke.DAILY),[y,x]=k.useState(null),[_,N]=k.useState(null),[p,m]=k.useState(!1),[g,w]=k.useState(null),[E,j]=k.useState(!1),[R,I]=k.useState(!1),W=(v,S)=>{const b="flex items-center gap-3 p-4 rounded-lg transition-all duration-300 relative overflow-hidden pokemon-font";switch(v){case 1:return`${b} tier-legendary shadow-lg`;case 2:return`${b} tier-master shadow-md`;case 3:return`${b} tier-diamond shadow-md`;case 4:return`${b} tier-platinum shadow-sm`;case 5:return`${b} tier-gold shadow-sm`;case 6:return`${b} tier-silver shadow-sm`;case 7:case 8:case 9:case 10:return`${b} tier-bronze shadow-sm`;default:return`${b} ${S?"bg-white border-2 border-blue-400 shadow-sm":"bg-gray-50 border border-gray-200 shadow-sm"}`}},D=(v,S)=>`pokemon-font text-sm truncate font-bold ${S&&v>10?"text-blue-700 font-bold":""}`,q=(v,S)=>`pokemon-font text-xs font-bold ${S&&v>10?"text-blue-600":""}`,se=v=>{switch(v){case 1:return{emoji:"",icon:a.jsx(Pm,{className:"w-5 h-5 text-white"})};case 2:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-white"})};case 3:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-white"})};case 4:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-white"})};case 5:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-black"})};case 6:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-black"})};case 7:case 8:case 9:case 10:return{emoji:"",icon:a.jsx(ht,{className:"w-5 h-5 text-black"})};default:return{emoji:"",icon:a.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-xs font-bold text-gray-500",children:v})}}},Ae=v=>{switch(v){case 1:return"LEGENDARY";case 2:return"CHALLENGER";case 3:return"GRANDMASTER";case 4:return"MASTER";case 5:return"DIAMOND";case 6:return"PLATINUM";case 7:case 8:case 9:case 10:return"GOLD";default:return null}},nt=v=>{E||R||!v||!v.rank||(console.log("    (Portal ):",v.anonymousName),I(!0),w({...v,uniqueId:`${v.rank}-${v.anonymousName}-${Date.now()}`}),j(!0),setTimeout(()=>I(!1),500))},rt=()=>{R||(console.log("   "),I(!0),j(!1),setTimeout(()=>{w(null),I(!1)},500))};k.useEffect(()=>{const v=e||Ct.getCurrentUser();o(v)},[e]),k.useEffect(()=>{n>0&&i&&(async()=>{try{const S=await Ct.getExpectedRank(n);N({rank:S,time:n,username:i.anonymousName||""}),m(S>10)}catch(S){console.log("   :",S)}})()},[n,i]),k.useEffect(()=>{y&&y(),c(!0);const v=Ct.onRankingChange(S=>{s(S),c(!1)},d);return x(()=>v),()=>{v&&v()}},[d]);const Qe=v=>{f(v)};if(!t)return null;const pe=ff[d];return a.jsxs("div",{className:"p-4 h-full",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(xh,{className:"w-6 h-6 text-yellow-500"}),a.jsx("h3",{className:"pokemon-font text-lg text-gray-800",children:" "})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mb-4 p-1 bg-gray-100 rounded-lg border-2 border-gray-300",children:Object.values(Ke).map(v=>{const S=ff[v],b=d===v;return a.jsx("button",{onClick:()=>Qe(v),className:`
                flex-1 min-w-0 px-2 py-1 rounded pokemon-font text-xs transition-all
                ${b?"bg-blue-500 text-white border-2 border-blue-800":"text-gray-700 hover:bg-gray-200 border-2 border-transparent"}
              `,children:S.label},v)})}),l&&a.jsxs("div",{className:"text-center py-6",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"pokemon-font text-gray-600 text-sm",children:"  ..."})]}),u&&a.jsxs("div",{className:"text-center py-6",children:[a.jsx("p",{className:"pokemon-font text-red-600",children:"     "}),a.jsx("p",{className:"pokemon-font text-gray-500 text-sm mt-1",children:u})]}),!l&&!u&&a.jsxs(a.Fragment,{children:[r.length===0?a.jsxs("div",{className:"text-center py-6",children:[a.jsx(xh,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"pokemon-font text-gray-600",children:"   "}),a.jsx("p",{className:"pokemon-font text-gray-500 text-sm",children:"   !"})]}):a.jsxs("div",{className:"space-y-2",children:[r.slice(0,10).map((v,S)=>{const b=se(v.rank),A=Ae(v.rank);return a.jsxs("div",{className:`${W(v.rank,v.isCurrentUser)} vip-rank-container cursor-pointer hover:scale-[1.02] transition-transform`,onClick:()=>nt(v),title:"     !",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-[80px]",children:[a.jsx("span",{className:"text-2xl",children:b.emoji}),b.icon,a.jsxs("div",{className:"text-sm font-bold text-gray-800",children:["#",v.rank]})]}),a.jsxs("div",{className:"flex-1 min-w-0 px-3",children:[a.jsxs("div",{className:"flex items-center gap-1 flex-nowrap",children:[a.jsx("div",{className:`${D(v.rank,v.isCurrentUser)} truncate`,style:{maxWidth:"100px"},children:v.anonymousName}),v.isCurrentUser&&a.jsx("span",{className:"text-xs bg-blue-500 text-white px-1 py-0.5 rounded-full whitespace-nowrap font-bold flex-shrink-0",children:""}),A&&a.jsx("span",{className:`text-xs px-1 py-0.5 rounded font-black whitespace-nowrap border flex-shrink-0 hidden lg:inline ${v.rank===1?"bg-yellow-100 text-yellow-900 border-yellow-400":v.rank===2?"bg-cyan-100 text-cyan-900 border-cyan-400":v.rank===3?"bg-blue-100 text-blue-900 border-blue-400":v.rank===4?"bg-teal-100 text-teal-900 border-teal-400":v.rank===5?"bg-yellow-100 text-yellow-900 border-yellow-400":v.rank===6?"bg-gray-100 text-gray-900 border-gray-400":"bg-orange-100 text-orange-900 border-orange-400"}`,children:A})]}),v.comment&&a.jsxs("div",{className:"pokemon-font text-xs text-gray-600 mt-1 truncate w-full",style:{maxWidth:"180px"},children:[" ",v.comment.length>12?v.comment.slice(0,12)+"...":v.comment]})]}),a.jsx("div",{className:"text-right min-w-[80px]",children:a.jsx("div",{className:q(v.rank,v.isCurrentUser),children:v.timeDisplay})})]},`${v.anonymousName}-${S}`)}),r.length>10&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"border-t-2 border-gray-300 my-2 pt-2",children:a.jsx("p",{className:"text-center pokemon-font text-xs text-gray-500 mb-2",children:"    "})}),a.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:r.slice(10,20).map((v,S)=>{const b=se(v.rank);return a.jsxs("div",{className:`
                            flex items-center gap-3 p-3 rounded-lg transition-all text-sm cursor-pointer hover:scale-[1.01]
                            ${v.isCurrentUser?"bg-blue-100 border-2 border-blue-400 shadow-md":"bg-gray-50 border border-gray-200 hover:bg-gray-100"}
                          `,onClick:()=>nt(v),title:"     !",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-[60px]",children:[a.jsx("span",{className:"text-sm",children:b.emoji}),a.jsxs("span",{className:"text-xs font-bold text-gray-600",children:["#",v.rank]})]}),a.jsxs("div",{className:"flex-1 min-w-0 px-2",children:[a.jsxs("div",{className:`
                              pokemon-font text-xs font-bold truncate
                              ${v.isCurrentUser?"text-blue-700":"text-gray-700"}
                            `,style:{maxWidth:"150px"},children:[v.anonymousName.length>10?v.anonymousName.slice(0,10)+"...":v.anonymousName,v.isCurrentUser&&a.jsx("span",{className:"ml-1 text-xs bg-blue-500 text-white px-1 py-0.5 rounded-full",children:""})]}),v.comment&&a.jsxs("div",{className:"pokemon-font text-xs text-gray-400 mt-1 truncate",style:{maxWidth:"130px"},children:[" ",v.comment.length>10?v.comment.slice(0,10)+"...":v.comment]})]}),a.jsx("div",{className:"text-right min-w-[60px]",children:a.jsx("div",{className:`
                              pokemon-font text-xs font-bold
                              ${v.isCurrentUser?"text-blue-600":"text-gray-600"}
                            `,children:v.timeDisplay})})]},`${v.anonymousName}-extended-${S}`)})})]}),p&&_&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"border-t-2 border-blue-300 my-2 pt-2",children:a.jsx("p",{className:"text-center pokemon-font text-xs text-blue-600 mb-2",children:"    "})}),a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-400 rounded-lg p-2 shadow-md",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1 min-w-[50px]",children:[a.jsx("span",{className:"text-sm",children:""}),a.jsxs("span",{className:"text-sm font-bold text-blue-700",children:["#",_.rank]})]}),a.jsx("div",{className:"flex-1 px-2",children:a.jsxs("div",{className:"pokemon-font text-sm text-blue-800 font-bold",children:[_.username,a.jsx("span",{className:"ml-1 text-xs bg-blue-500 text-white px-2 py-0.5 rounded-full",children:""})]})}),a.jsx("div",{className:"text-right min-w-[60px]",children:a.jsx("div",{className:"pokemon-font text-xs font-bold text-blue-600",children:Ut(_.time)})})]}),a.jsx("div",{className:"mt-1 text-center",children:a.jsx("p",{className:"pokemon-font text-xs text-blue-600",children:"    !"})})]})]})]}),r.length>0&&!p&&a.jsx("div",{className:"mt-3 p-2 bg-yellow-100 border-2 border-yellow-400 rounded-lg",children:a.jsx("p",{className:"text-center pokemon-font text-yellow-800 text-xs",children:"       !"})})]}),a.jsx("div",{className:"mt-3 pt-2 border-t-2 border-gray-300",children:a.jsxs("div",{className:"flex justify-between items-center pokemon-font text-xs text-gray-600",children:[a.jsx("span",{children:"TOP 20 "}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"LIVE"]})]})}),E&&g&&g.rank&&!R&&a.jsx(f0,{showModal:!0,trainer:g,onClose:rt,currentLabel:pe},g.uniqueId||`trainer-${g.rank}-${g.anonymousName}`)]})},Sl=async(t,e,n={})=>{if(V)try{const r=Y(V,J.LIVE_FEED),s=ld(r),i={type:t,message:e,timestamp:Date.now(),...n};await We(s,i)}catch{}},fS=async(t,e)=>{const n=e||ad(),r=`${n} ${t} ! `;await Sl("milestone",r,{minutes:t,nickname:n})},pS=async(t,e,n,r="daily")=>{const s=n||ad(),i={daily:"",weekly:"",monthly:"",allTime:""}[r];let o;t===1?o=` ${s} ${i}  1 ! (${e})`:t<=3?o=` ${s} ${i}  ${t} ! (${e})`:o=` ${s} ${i}  ${t} ! (${e})`,await Sl("ranking",o,{rank:t,minutes:e,nickname:s,period:r})},mS=async(t,e)=>{const n=e||ad(),r=` ${n}: ${t}`;await Sl("activity",r,{activity:t,nickname:n})},ad=()=>Yo[Math.floor(Math.random()*Yo.length)],gS=async()=>{const t=[{type:"milestone",message:" 5 ! "},{type:"ranking",message:"    1 ! (42)"},{type:"achievement",message:'  " "  !'},{type:"activity",message:" :   ..."}];for(let e=0;e<t.length;e++){const n=t[e];await Sl(n.type,n.message,{isTest:!0}),await new Promise(r=>setTimeout(r,1e3))}},yS=({isVisible:t,onOpenRankingTest:e})=>{const[n,r]=k.useState(1800);if(!t)return null;const s=()=>{gS()},i=()=>{e(n)},o=()=>{},l=async()=>{try{const u=await Ct.getRanking("daily")}catch{}},c=u=>{const h=Math.floor(u/60),d=u%60;return`${h} ${d.toString().padStart(2,"0")}`};return a.jsxs("div",{className:`fixed bottom-4 left-4 z-50 bg-black/80 backdrop-blur-md 
                    border border-white/20 rounded-lg p-4 text-white text-sm`,children:[a.jsx("h3",{className:"font-bold mb-2",children:"  "}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:s,className:`bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded text-xs
                     transition-colors duration-200 w-full`,children:"  "}),a.jsxs("div",{className:"border-t border-white/20 pt-2 mt-2",children:[a.jsx("div",{className:"text-xs text-yellow-300 mb-2 font-bold",children:"   "}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"block text-xs text-gray-300 mb-1",children:"  ()"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"1",max:"300",value:Math.floor(n/60),onChange:u=>r(parseInt(u.target.value||1)*60),className:`bg-black/50 border border-white/30 rounded px-2 py-1 text-xs text-white w-16
                          focus:outline-none focus:border-yellow-400`}),a.jsx("span",{className:"text-xs text-gray-300 self-center",children:""})]}),a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[" : ",c(n)]})]}),a.jsxs("div",{className:"flex gap-1 mb-2",children:[a.jsx("button",{onClick:()=>r(300),className:"bg-gray-600 hover:bg-gray-500 px-2 py-1 rounded text-xs transition-colors",children:"5"}),a.jsx("button",{onClick:()=>r(900),className:"bg-gray-600 hover:bg-gray-500 px-2 py-1 rounded text-xs transition-colors",children:"15"}),a.jsx("button",{onClick:()=>r(1800),className:"bg-gray-600 hover:bg-gray-500 px-2 py-1 rounded text-xs transition-colors",children:"30"}),a.jsx("button",{onClick:()=>r(3600),className:"bg-gray-600 hover:bg-gray-500 px-2 py-1 rounded text-xs transition-colors",children:"1"})]})]}),a.jsxs("button",{onClick:i,className:`bg-yellow-500 hover:bg-yellow-600 px-3 py-2 rounded text-xs
                     transition-colors duration-200 w-full font-bold`,children:["    (",Math.floor(n/60),")"]}),a.jsxs("div",{className:"border-t border-white/20 pt-2 mt-2",children:[a.jsx("div",{className:"text-xs text-cyan-300 mb-2 font-bold",children:"  "}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:o,className:`bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded text-xs
                         transition-colors duration-200 w-full`,children:" Firebase  "}),a.jsx("button",{onClick:l,className:`bg-purple-600 hover:bg-purple-500 px-2 py-1 rounded text-xs
                         transition-colors duration-200 w-full`,children:"   "})]})]}),a.jsx("div",{className:"text-xs text-gray-300 mt-2 border-t border-white/20 pt-2",children:"   |  :    "})]})]})},vS={"1min":{activities:["   ","",""," "," "],message:"1     ",category:"instant",difficulty:" "},"3min":{activities:[" "," ","  ",""," "],message:"3  -   ",category:"quick",difficulty:""},"5min":{activities:["  "," "," ","  "," "],message:"5   ",category:"habit",difficulty:""},"7min":{activities:["TED  "," "," ",""," "],message:"7,     ",category:"learning",difficulty:""},"10min":{activities:[" "," ","  ","  "," "],message:"10   !",category:"productive",difficulty:""},"15min":{activities:[" "," "," "," "," "],message:"15    ",category:"skill",difficulty:""},"20min":{activities:["  ","   ","  ",""," "],message:"20,    ",category:"advanced",difficulty:""},"30min":{activities:[" "," ",""," ","  "],message:"30    !",category:"expert",difficulty:" "},"45min":{activities:[" "," ","  "," "," "],message:"45,    ",category:"master",difficulty:""},"60min":{activities:["  ","  "," ","  ","  "],message:"1,     ",category:"legend",difficulty:""}},xS={dawn:{optimal:["",""," ",""," "],brainState:" ",energy:"",focus:"",recommendation:"      "},earlyMorning:{optimal:[" "," "," "," "," "],brainState:" ",energy:"",focus:"",recommendation:"    "},midMorning:{optimal:[" ","","","",""],brainState:" ",energy:"",focus:"",recommendation:"    "},earlyAfternoon:{optimal:[" ","",""," ",""],brainState:"  ",energy:"",focus:"",recommendation:"    "},lateAfternoon:{optimal:["","","","",""],brainState:" ",energy:"",focus:"",recommendation:"    "},earlyEvening:{optimal:["","","","",""],brainState:" ",energy:"",focus:"",recommendation:"   "},lateEvening:{optimal:["","","",""," "],brainState:" ",energy:"",focus:"",recommendation:"    "}},mf={frequentVisitor:{message:" !    ?",suggestions:["    "," 30  ","   ","   "]},longTimeUser:{message:"...   !    ",suggestions:["    ","   ","  ","   "]},timePatternUser:{message:"  !",suggestions:["    ","   ","   ","   "]}},p0=(t,e={})=>{const n=Math.floor(t/60),r=new Date().getHours();let s="1min";n>=60?s="60min":n>=45?s="45min":n>=30?s="30min":n>=20?s="20min":n>=15?s="15min":n>=10?s="10min":n>=7?s="7min":n>=5?s="5min":n>=3&&(s="3min");let i="midMorning";r>=0&&r<6?i="dawn":r>=6&&r<9?i="earlyMorning":r>=9&&r<12?i="midMorning":r>=12&&r<15?i="earlyAfternoon":r>=15&&r<18?i="lateAfternoon":r>=18&&r<21?i="earlyEvening":i="lateEvening";const o=vS[s],l=xS[i];let c="";return e.visits>=3?c=mf.frequentVisitor.message:n>=30&&(c=mf.longTimeUser.message),{timeSpent:`${n} ${t%60}`,activities:o.activities,message:o.message,category:o.category,difficulty:o.difficulty,brainState:l.brainState,energyLevel:l.energy,focusLevel:l.focus,timeOptimization:l.recommendation,personalizedTip:c,optimalActivities:l.optimal}},_S={instant:{color:"emerald",icon:"",description:" "},quick:{color:"cyan",icon:"",description:" "},habit:{color:"violet",icon:"",description:" "},learning:{color:"amber",icon:"",description:" "},productive:{color:"rose",icon:"",description:" "},skill:{color:"blue",icon:"",description:" "},advanced:{color:"fuchsia",icon:"",description:" "},expert:{color:"yellow",icon:"",description:" "},master:{color:"teal",icon:"",description:" "},legend:{color:"pink",icon:"",description:" "}},wS=({user:t,isVisible:e,onClose:n})=>(k.useEffect(()=>{if(e){const r=setTimeout(n,3e3);return()=>clearTimeout(r)}},[e,n]),!e||!t?null:a.jsx("div",{className:"fixed bottom-4 right-4 z-50 animate-slide-in-right",children:a.jsxs("div",{className:"pokemon-dialog bg-blue-50 border-blue-300 p-4 rounded-lg shadow-lg max-w-64",children:[a.jsx("div",{className:"pokemon-font text-sm text-blue-800",children:"   !"}),a.jsxs("div",{className:"pokemon-font text-xs text-blue-600 mt-1",children:[" ",t.totalUsers,"   ..."]})]})})),kS=({message:t,id:e,onComplete:n})=>{const[r,s]=k.useState(()=>({x:-300,y:Math.random()*400+100})),i=k.useRef(null),o=k.useRef(!1);return k.useEffect(()=>{if(o.current)return;o.current=!0;const l=Date.now(),c=8e3,u=-300,h=window.innerWidth+300,d=r.y,f=()=>{const y=Date.now()-l,x=Math.min(y/c,1),_=1-Math.pow(1-x,3);s({x:u+(h-u)*_,y:d+Math.sin(x*Math.PI*2)*20}),x<1?i.current=requestAnimationFrame(f):n(e)};return i.current=requestAnimationFrame(f),()=>{i.current&&cancelAnimationFrame(i.current)}},[e,n]),a.jsx("div",{className:"fixed z-40 pointer-events-none",style:{left:r.x,top:r.y,transform:"translateY(-50%)"},children:a.jsx("div",{className:"pokemon-dialog bg-yellow-50 border-yellow-300 px-6 py-3 rounded-full shadow-lg",children:a.jsxs("div",{className:"pokemon-font text-lg font-bold text-yellow-800",children:[" ",t]})})})},SS=({message:t,id:e,isMyMessage:n,messageType:r="basic",onComplete:s})=>{const i=()=>typeof window>"u"?{width:1920,height:1080}:{width:window.innerWidth||1920,height:window.innerHeight||1080},[o,l]=k.useState(()=>{const{width:x,height:_}=i(),N=Math.max(x,800),p=Math.max(_,600),m=[{startX:-100,endX:N+100,startY:150,endY:150,direction:"horizontal-top"},{startX:N+100,endX:-100,startY:250,endY:250,direction:"horizontal-reverse"},{startX:-100,endX:N+100,startY:350,endY:350,direction:"horizontal-bottom"},{startX:200,endX:200,startY:-50,endY:p+50,direction:"vertical-left"},{startX:N-200,endX:N-200,startY:-50,endY:p+50,direction:"vertical-right"},{startX:N/2,endX:N/2,startY:p+50,endY:-50,direction:"vertical-up"},{startX:-100,endX:N+100,startY:100,endY:p-100,direction:"diagonal-down-right"},{startX:N+100,endX:-100,startY:100,endY:p-100,direction:"diagonal-down-left"},{startX:-100,endX:N+100,startY:p-100,endY:100,direction:"diagonal-up-right"},{startX:N+100,endX:-100,startY:p-100,endY:100,direction:"diagonal-up-left"}];return m[Math.floor(Math.random()*m.length)]}),[c,u]=k.useState(()=>({x:o.startX,y:o.startY})),[h,d]=k.useState(!0),f=k.useRef(null),y=k.useRef(null);return k.useEffect(()=>{y.current=Date.now();const x=5e3,_=()=>{const m=Date.now()-y.current,g=Math.min(m/x,1),w=o.startX+(o.endX-o.startX)*g,E=o.startY+(o.endY-o.startY)*g;u({x:w,y:E}),g<1&&h?f.current=requestAnimationFrame(_):(d(!1),setTimeout(()=>{s&&s(e)},200))};if(typeof requestAnimationFrame>"u"){const p=setInterval(()=>{const m=Date.now()-y.current,g=Math.min(m/x,1),w=o.startX+(o.endX-o.startX)*g,E=o.startY+(o.endY-o.startY)*g;u({x:w,y:E}),g>=1&&(clearInterval(p),d(!1),setTimeout(()=>s&&s(e),200))},16);return()=>clearInterval(p)}f.current=requestAnimationFrame(_);const N=setTimeout(()=>{f.current&&(cancelAnimationFrame(f.current),f.current=null),d(!1),setTimeout(()=>s&&s(e),100)},7e3);return()=>{f.current&&(cancelAnimationFrame(f.current),f.current=null),clearTimeout(N)}},[e]),k.useEffect(()=>()=>{f.current&&cancelAnimationFrame(f.current)},[]),h?a.jsx("div",{style:{position:"fixed",left:c.x,top:c.y,transform:"translate(-50%, -50%)",zIndex:99999,pointerEvents:"none"},children:a.jsxs("div",{className:"pokemon-font",style:{background:r==="premium"?n?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"linear-gradient(135deg, #98FB98 0%, #32CD32 100%)":"rgba(255, 255, 255, 0.9)",color:r==="premium"?"#000000":"#333333",border:r==="premium"?"4px solid #000000":"2px solid rgba(100, 100, 100, 0.5)",borderRadius:"20px",padding:r==="premium"?"12px 20px":"10px 15px",fontSize:r==="premium"?"16px":"14px",fontWeight:r==="premium"?"bold":"normal",textShadow:r==="premium"?"2px 2px 0px rgba(255, 255, 255, 0.9)":"1px 1px 0px rgba(255, 255, 255, 0.8)",boxShadow:r==="premium"?["4px 4px 0px rgba(0, 0, 0, 0.5)","inset 2px 2px 0px rgba(255, 255, 255, 0.3)","0 0 20px rgba(255, 215, 0, 0.6)"].join(", "):"2px 2px 8px rgba(0, 0, 0, 0.3)",position:"relative",maxWidth:"350px",width:"fit-content",whiteSpace:"pre-wrap",wordWrap:"break-word",animation:r==="premium"?"glow 2s ease-in-out infinite alternate":"none"},children:[r==="premium"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"absolute",bottom:"-12px",left:"30px",width:0,height:0,borderLeft:"12px solid transparent",borderRight:"12px solid transparent",borderTop:n?"12px solid #FFA500":"12px solid #32CD32",zIndex:-1}}),a.jsx("div",{style:{position:"absolute",bottom:"-8px",left:"32px",width:0,height:0,borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderTop:n?"10px solid #FFD700":"10px solid #98FB98"}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:r==="premium"?"8px":"6px"},children:[a.jsx("span",{style:{fontSize:r==="premium"?"20px":"16px"},children:r==="premium"?n?"":"":n?"":""}),a.jsx("span",{children:t})]})]})}):null},bc=document.createElement("style");bc.textContent=`
  @keyframes glow {
    from { 
      box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.5), 
                  inset 2px 2px 0px rgba(255, 255, 255, 0.3), 
                  0 0 20px rgba(255, 215, 0, 0.6); 
    }
    to { 
      box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.5), 
                  inset 2px 2px 0px rgba(255, 255, 255, 0.3), 
                  0 0 30px rgba(255, 215, 0, 0.8); 
    }
  }
`;!document.head.querySelector("[data-flying-message-styles]")&&document.head&&(bc.setAttribute("data-flying-message-styles","true"),document.head.appendChild(bc));const ES=({isOpen:t,onClose:e,onSendMessage:n,remainingTime:r,canChat:s,chatTokens:i,premiumTokens:o,onAdClick:l,canGetTokenFromAd:c,elapsedTime:u})=>{const[h,d]=k.useState(""),[f,y]=k.useState("auto"),x=50,_=N=>{N.preventDefault(),h.trim()&&h.length<=x&&(n(h.trim(),f),d(""),e())};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"pokemon-window max-w-md w-full mx-4",children:a.jsxs("div",{className:"pokemon-dialog",children:[a.jsxs("h3",{className:"pokemon-font text-xl font-bold mb-2 text-center",children:["   ",a.jsxs("span",{className:"text-sm font-normal text-gray-600",children:["(:",i," :",o,")"]})]}),!s&&a.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-300 rounded-lg",children:[a.jsxs("div",{className:"pokemon-font text-sm text-yellow-800 text-center mb-3",children:["   !",a.jsx("br",{}),u<60?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-bold text-red-600",children:"1         !"}),a.jsx("br",{}),a.jsxs("span",{className:"text-xs",children:[" : ",60-u,""]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-bold",children:"     !"}),a.jsx("br",{}),a.jsx("span",{className:"text-xs",children:"   ! "})]})]}),a.jsx("button",{onClick:()=>{l()},disabled:u<60||!c,className:`w-full pokemon-button text-sm py-2 ${u>=60&&c?"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:u<60?` 1     (${60-u})`:c?"     !":`  : ${Math.ceil(r/1e3)}`})]}),s&&(i>0||o>0)&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-300 rounded-lg",children:[a.jsx("div",{className:"pokemon-font text-sm font-bold text-blue-800 mb-2 text-center",children:"   "}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("label",{className:`flex-1 p-2 border-2 rounded-lg cursor-pointer transition-all ${f==="auto"?"border-blue-500 bg-blue-100":"border-gray-300 hover:border-blue-300"}`,children:[a.jsx("input",{type:"radio",name:"messageType",value:"auto",checked:f==="auto",onChange:N=>y(N.target.value),className:"sr-only"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"pokemon-font text-xs font-bold",children:""}),a.jsx("div",{className:"pokemon-font text-xs text-gray-600",children:o>0?" ":" "})]})]}),i>0&&a.jsxs("label",{className:`flex-1 p-2 border-2 rounded-lg cursor-pointer transition-all ${f==="basic"?"border-green-500 bg-green-100":"border-gray-300 hover:border-green-300"}`,children:[a.jsx("input",{type:"radio",name:"messageType",value:"basic",checked:f==="basic",onChange:N=>y(N.target.value),className:"sr-only"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"pokemon-font text-xs font-bold",children:""}),a.jsxs("div",{className:"pokemon-font text-xs text-gray-600",children:[i," "]})]})]}),o>0&&a.jsxs("label",{className:`flex-1 p-2 border-2 rounded-lg cursor-pointer transition-all ${f==="premium"?"border-yellow-500 bg-yellow-100":"border-gray-300 hover:border-yellow-300"}`,children:[a.jsx("input",{type:"radio",name:"messageType",value:"premium",checked:f==="premium",onChange:N=>y(N.target.value),className:"sr-only"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"pokemon-font text-xs font-bold",children:""}),a.jsxs("div",{className:"pokemon-font text-xs text-gray-600",children:[o," "]})]})]})]}),a.jsxs("div",{className:"mt-2 text-center",children:[f==="auto"&&a.jsx("div",{className:"pokemon-font text-xs text-blue-600",children:o>0?"      !":"   "}),f==="basic"&&a.jsx("div",{className:"pokemon-font text-xs text-green-600",children:"    ( 1 )"}),f==="premium"&&a.jsx("div",{className:"pokemon-font text-xs text-yellow-600",children:"    ! ( 1 )"})]})]}),a.jsxs("form",{onSubmit:_,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("textarea",{value:h,onChange:N=>d(N.target.value),placeholder:s?o>0?"      !":"     ...":"  .    .",className:`w-full p-3 border-2 rounded-lg pokemon-font resize-none ${s?"border-gray-300":"border-gray-200 bg-gray-100 cursor-not-allowed"}`,rows:3,maxLength:x,autoFocus:s,disabled:!s}),a.jsxs("div",{className:"text-right text-sm text-gray-500 mt-1",children:[h.length,"/",x]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:e,className:"flex-1 pokemon-button bg-gray-300 text-gray-700",children:""}),a.jsx("button",{type:"submit",disabled:!h.trim()||!s,className:`flex-1 pokemon-button ${!h.trim()||!s?"opacity-50 cursor-not-allowed bg-gray-300 text-gray-600":""}`,children:s?" ":"   "})]})]}),r>0&&a.jsxs("div",{className:"mt-3 text-center text-xs text-gray-600 pokemon-font",children:["   : ",Math.ceil(r/1e3),""]})]})})}):null},CS=({elapsedTime:t=0,onAdCooldownChange:e,chatTokens:n,setChatTokens:r,premiumTokens:s,setPremiumTokens:i})=>{const[o,l]=k.useState(null),[c,u]=k.useState([]),[h,d]=k.useState([]),[f,y]=k.useState(!1);k.useState(0);const[x,_]=k.useState(0),N=n||0,p=r||(()=>{}),m=s||0,g=i||(()=>{});k.useState(0);const[w,E]=k.useState(0),[j,R]=k.useState(null),I=k.useRef(new Set),[W,D]=k.useState(null);k.useEffect(()=>{const v=setInterval(()=>{E(S=>{const b=S+1;return b>0&&b%60===0&&p(A=>A>0?A:(se(" 1  !    !",!1),1)),b})},1e3);return()=>clearInterval(v)},[]),k.useEffect(()=>{if(x>0){const v=setInterval(()=>{_(S=>{const b=Math.max(0,S-1e3);return e&&e({cooldown:b,canGetToken:b===0}),b})},1e3);return()=>clearInterval(v)}else e&&e({cooldown:0,canGetToken:!0})},[x,e]),k.useEffect(()=>{if(!V){setTimeout(()=>{l({totalUsers:Math.floor(Math.random()*50)+10,timestamp:Date.now()})},5e3),setTimeout(()=>{q(" 2534 3 !")},1e4),setTimeout(()=>{se("    ",!1)},15e3);return}const v=Y(V,"live-feed/connections"),S=Y(V,"live-feed/ranking-updates"),b=Y(V,"live-feed/global-chat");return qn(v,A=>{const U=A.val();if(U){const le=Object.values(U).sort(($,Ce)=>Ce.timestamp-$.timestamp)[0];le&&Date.now()-le.timestamp<5e3&&l({totalUsers:le.totalUsers||1,timestamp:le.timestamp})}}),qn(S,A=>{const U=A.val();if(U){const le=Object.values(U).sort(($,Ce)=>Ce.timestamp-$.timestamp)[0];if(le&&Date.now()-le.timestamp<1e4){const $=`${le.username} ${Ut(le.time)} ${le.rank} !`;q($)}}}),qn(b,A=>{try{const U=A.val();if(U){const $=Object.entries(U).map(([Ce,me])=>({...me,key:Ce})).sort((Ce,me)=>me.timestamp-Ce.timestamp)[0];$&&Date.now()-$.timestamp<1e4&&j!==$.key&&!I.current.has($.messageId)&&(se($.message,!1,$.messageType||"basic"),R($.key))}}catch{}}),()=>{As(v),As(S),As(b)}},[j]);const q=v=>{const S=Date.now()+Math.random();u(b=>[...b,{id:S,message:v}])},se=(v,S=!1,b="basic")=>{const A=Date.now()+Math.random();d(U=>[...U,{id:A,message:v,isMyMessage:S,messageType:b}])},Ae=(v,S)=>{S==="ranking"?u(b=>b.filter(A=>A.id!==v)):S==="chat"&&d(b=>b.filter(A=>A.id!==v))},nt=()=>{if(x===0){const v=sS();window.open(v.url,"_blank"),g(S=>S+1),_(3e4),se(` ${v.name}  !    1 !`,!1)}},rt=(v,S="auto")=>{if(W===v)return;let b="none";if(S==="premium"&&m>0?(b="premium",g($=>$-1)):S==="basic"&&N>0?(b="basic",p($=>$-1)):S==="auto"&&(m>0?(b="premium",g($=>$-1)):N>0&&(b="basic",p($=>$-1))),b==="none")return;D(v);const A=Date.now()+"-"+Math.random();if(I.current.add(A),se(v,!0,b),setTimeout(()=>{D(null)},3e3),!V)return;const U=Y(V,"live-feed/global-chat"),le={message:v,timestamp:Date.now(),userAgent:navigator.userAgent.substring(0,50),messageId:A,messageType:b,isMyMessage:!1};ld(U,le).then(()=>{}).catch($=>{$.code==="PERMISSION_DENIED"?se("        ",!1):$.code==="NETWORK_ERROR"?se("    ",!1):se("     !",!1)})},Qe=N>0||m>0,pe=x===0;return a.jsxs(a.Fragment,{children:[a.jsx(wS,{user:o,isVisible:!!o,onClose:()=>l(null)}),c.map(v=>a.jsx(kS,{id:v.id,message:v.message,onComplete:S=>Ae(S,"ranking")},v.id)),h.map(v=>a.jsx(SS,{id:v.id,message:v.message,isMyMessage:v.isMyMessage,messageType:v.messageType,onComplete:S=>Ae(S,"chat")},v.id)),a.jsxs("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-40 flex gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),disabled:!1,className:`pokemon-button shadow-lg transition-all duration-300 ${Qe?"bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600":"bg-gradient-to-r from-gray-400 to-gray-500 hover:from-gray-500 hover:to-gray-600 opacity-70"}`,title:Qe?"  ":"  .    !",children:[" ",Qe?`  (:${N} :${m})`:"  ()"]}),!1]}),a.jsx(ES,{isOpen:f,onClose:()=>y(!1),onSendMessage:rt,remainingTime:x,canChat:Qe,chatTokens:N,premiumTokens:m,onAdClick:nt,canGetTokenFromAd:pe,elapsedTime:t})]})},NS=({elapsedTime:t,compact:e=!1})=>{const[n,r]=k.useState(!1),[s,i]=k.useState(.3),[o,l]=k.useState(null),[c,u]=k.useState(!1),h=k.useRef(null);k.useRef(null);const d={themes:[{name:"themesong1",file:"./bgm/themesong1.mp3",title:"  1"},{name:"themesong2",file:"./bgm/themesong2.mp3",title:"  2"}],phases:[{phase:1,minTime:0,maxTime:300,file:"./bgm/phase1.mp3",title:" "},{phase:2,minTime:300,maxTime:900,file:"./bgm/phase2.mp3",title:" "},{phase:3,minTime:900,maxTime:1800,file:"./bgm/phase3.mp3",title:" "},{phase:4,minTime:1800,maxTime:1/0,file:"./bgm/phase4.mp3",title:" "}]},f=()=>d.phases.find(g=>t>=g.minTime&&t<g.maxTime),y=()=>d.themes[Math.floor(Math.random()*d.themes.length)],x=g=>{if(!(!g||g.file===(o==null?void 0:o.file)))if(h.current&&n){const w=()=>{const E=h.current;E.volume>.05?(E.volume=Math.max(0,E.volume-.1),setTimeout(w,50)):(E.pause(),_(g))};w()}else _(g)},_=g=>{if(!h.current)return;h.current.src=g.file,h.current.volume=0,l(g);const w=()=>{const E=h.current.play();E!==void 0&&E.then(()=>{r(!0);const j=()=>{const R=h.current;if(!R)return;const I=c?0:s;R.volume<I-.05&&(R.volume=Math.min(I,R.volume+.05),setTimeout(j,50))};j()}).catch(j=>{r(!1)}),h.current.removeEventListener("canplay",w)};h.current.addEventListener("canplay",w),h.current.load()};k.useEffect(()=>{if(t===0){const g=setTimeout(()=>{const w=y();x(w)},1e3);return()=>clearTimeout(g)}},[]),k.useEffect(()=>{if(t>0){const g=f();g&&(!o||o.file!==g.file)&&x(g)}},[Math.floor(t/60)]);const N=()=>{if(h.current)if(n)h.current.pause(),r(!1);else{const g=h.current.play();g!==void 0&&g.then(()=>r(!0)).catch(w=>{})}},p=g=>{const w=Math.min(g,.5);i(w),h.current&&!c&&(h.current.volume=w)},m=()=>{u(!c),h.current&&(h.current.volume=c?s:0)};return e?a.jsxs("div",{className:"flex items-center gap-1 bg-black/90 text-white px-1.5 py-1 rounded-full backdrop-blur-sm shadow-lg border border-white/20",children:[a.jsx("button",{onClick:N,className:"flex items-center justify-center w-5 h-5 rounded-full hover:bg-white/20 transition-colors",title:n?"":"",children:n?a.jsxs("div",{className:"flex gap-0.5",children:[a.jsx("div",{className:"w-0.5 h-2 bg-white"}),a.jsx("div",{className:"w-0.5 h-2 bg-white"})]}):a.jsx("div",{className:"w-0 h-0 border-l-[4px] border-l-white border-t-[2px] border-t-transparent border-b-[2px] border-b-transparent ml-0.5"})}),a.jsx("button",{onClick:m,className:"flex items-center justify-center w-4 h-4 rounded-full hover:bg-white/20 transition-colors",title:c?" ":"",children:c?a.jsxs("svg",{className:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 20 20",children:[a.jsx("path",{d:"M10 4a1 1 0 00-1.707-.707L4.586 7H2a1 1 0 000 2v2a1 1 0 000 2h2.586l3.707 3.707A1 1 0 0010 16V4z"}),a.jsx("path",{d:"M17.293 6.293a1 1 0 00-1.414 1.414L17.586 9.5 15.879 11.207a1 1 0 101.414 1.414L19 10.914l1.707 1.707a1 1 0 001.414-1.414L20.414 9.5l1.707-1.707a1 1 0 00-1.414-1.414L19 7.086l-1.707-1.707z"})]}):a.jsxs("svg",{className:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 20 20",children:[a.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.817L4.067 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.067l4.316-3.817A1 1 0 019.383 3.076z",clipRule:"evenodd"}),a.jsx("path",{d:"M12.828 7.172a4 4 0 010 5.656 1 1 0 01-1.414-1.414 2 2 0 000-2.828 1 1 0 011.414-1.414z"})]})}),a.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.05",value:s,onChange:g=>p(parseFloat(g.target.value)),className:"w-10 h-1 bg-white/30 rounded-full appearance-none cursor-pointer slider",title:" "}),a.jsx("audio",{ref:h,loop:!0,preload:"auto",onLoadStart:()=>{},onCanPlay:()=>{},onError:()=>{},onEnded:()=>r(!1)}),a.jsx("style",{jsx:!0,children:`
          .slider::-webkit-slider-thumb {
            appearance: none;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
          }
          
          .slider::-moz-range-thumb {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            border: none;
          }
        `})]}):a.jsxs("div",{className:"flex items-center gap-2 bg-black/70 text-white px-3 py-1 rounded-full backdrop-blur-sm",children:[a.jsx("button",{onClick:N,className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-white/20 transition-colors",title:n?"":"",children:n?a.jsxs("div",{className:"flex gap-0.5",children:[a.jsx("div",{className:"w-1 h-3 bg-white"}),a.jsx("div",{className:"w-1 h-3 bg-white"})]}):a.jsx("div",{className:"w-0 h-0 border-l-[6px] border-l-white border-t-[3px] border-t-transparent border-b-[3px] border-b-transparent ml-0.5"})}),a.jsx("button",{onClick:m,className:"flex items-center justify-center w-6 h-6 rounded hover:bg-white/20 transition-colors",title:c?" ":"",children:c?a.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[a.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.817L4.067 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.067l4.316-3.817zm2.617 0a1 1 0 011 1v12a1 1 0 01-1 1 1 1 0 01-.707-.293L9.586 15H7a1 1 0 01-1-1V6a1 1 0 011-1h2.586l1.707-1.707A1 1 0 0112 4z",clipRule:"evenodd"}),a.jsx("path",{d:"M15.536 6.464a1 1 0 10-1.414 1.414L15.536 9.29 13.12 11.707a1 1 0 101.414 1.414L16.95 10.707 19.36 13.12a1 1 0 001.414-1.414L18.36 9.293l2.414-2.414a1 1 0 00-1.414-1.414L16.95 7.88l-1.414-1.414z"})]}):a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.817L4.067 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.067l4.316-3.817A1 1 0 019.383 3.076zM15.657 6.343a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-1.929 3.657 1 1 0 11-1.414-1.414A7.971 7.971 0 0017 10c0-.995-.102-1.951-.343-2.657a1 1 0 010-1.414zM13.657 8.343a1 1 0 011.414 0A5.98 5.98 0 0116 10a5.98 5.98 0 01-.929 1.657 1 1 0 11-1.414-1.414A3.98 3.98 0 0014 10c0-.229-.027-.453-.086-.657a1 1 0 010-1.414z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.05",value:s,onChange:g=>p(parseFloat(g.target.value)),className:"w-16 h-1 bg-white/30 rounded-full appearance-none cursor-pointer slider",title:"  ( 50%)"}),a.jsxs("span",{className:"text-xs text-white/70 min-w-[30px]",children:[Math.round(s*200),"% "]})]}),a.jsx("audio",{ref:h,loop:!0,preload:"auto",onLoadStart:()=>{},onCanPlay:()=>{},onError:()=>{},onEnded:()=>r(!1)})]})},bS=({isOpen:t,onClose:e})=>t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"pokemon-window max-w-4xl max-h-[90vh] mx-4 relative overflow-hidden",children:[a.jsxs("div",{className:"pokemon-stats flex justify-between items-center mb-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tc,{className:"w-6 h-6 text-yellow-300"}),a.jsx("h2",{className:"pokemon-font text-xl font-bold text-white",children:""})]}),a.jsx("button",{onClick:e,className:"text-white hover:text-yellow-300 transition-colors p-1",children:a.jsx(Eu,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"pokemon-dialog max-h-[70vh] overflow-y-auto",children:a.jsxs("div",{className:"pokemon-font text-sm leading-relaxed space-y-6",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(Qv,{className:"w-5 h-5 text-blue-600"}),"1.    "]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border-2 border-blue-200",children:[a.jsxs("p",{className:"mb-2",children:[a.jsx("strong",{children:" :"}),"      "]}),a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:" :"})}),a.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[a.jsx("li",{children:"IP  (  )"}),a.jsx("li",{children:"   ( )"}),a.jsx("li",{children:"  ( )"}),a.jsx("li",{children:"   (  )"}),a.jsx("li",{children:"    (  )"})]}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[" ",a.jsx("strong",{children:"    "}),",     ."]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(Gv,{className:"w-5 h-5 text-green-600"}),"2.    "]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border-2 border-green-200",children:[a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"   "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"     "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"     "]}),a.jsxs("li",{children:[a.jsx("strong",{children:":"}),"    "]})]}),a.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"          ."})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(Kv,{className:"w-5 h-5 text-purple-600"}),"3. 3   "]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border-2 border-purple-200",children:[a.jsx("p",{className:"mb-3",children:a.jsx("strong",{children:"3  :"})}),a.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Google Analytics:"}),"    "]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Google AdSense:"}),"   "]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Firebase:"}),"   "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"   "]})]}),a.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"  3     ."})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(tc,{className:"w-5 h-5 text-orange-600"}),"4.    "]}),a.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border-2 border-orange-200",children:a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"      "]}),a.jsxs("li",{children:[a.jsx("strong",{children:"  :"})," Google    "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"      "]}),a.jsxs("li",{children:[a.jsx("strong",{children:"  :"}),"     "]})]})})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(Am,{className:"w-5 h-5 text-red-600"}),"5.   "]}),a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border-2 border-red-200",children:[a.jsxs("p",{className:"mb-2",children:[a.jsx("strong",{children:" :"})," TimeTrash.net"]}),a.jsxs("p",{className:"mb-2",children:[a.jsx("strong",{children:" :"})," GitHub Issues     "]}),a.jsx("p",{className:"text-sm text-gray-600",children:"       ."})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"6.   "}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border-2 border-gray-200",children:[a.jsxs("p",{className:"mb-2",children:["  ",a.jsx("strong",{children:"2025 5 31"})," ."]}),a.jsx("p",{className:"text-sm text-gray-600",children:"       ."})]})]}),a.jsxs("div",{className:"text-center mt-8 pt-6 border-t-2 border-gray-200",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:[" ",a.jsx("strong",{children:"TimeTrash.net"})," -     "]}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"  !  !"})]})]})}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:e,className:"pokemon-button",children:""})})]})}):null,TS=({isOpen:t,onClose:e})=>t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"pokemon-window max-w-4xl max-h-[90vh] mx-4 relative overflow-hidden",children:[a.jsxs("div",{className:"pokemon-stats flex justify-between items-center mb-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dm,{className:"w-6 h-6 text-yellow-300"}),a.jsx("h2",{className:"pokemon-font text-xl font-bold text-white",children:" "})]}),a.jsx("button",{onClick:e,className:"text-white hover:text-yellow-300 transition-colors p-1",children:a.jsx(Eu,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"pokemon-dialog max-h-[70vh] overflow-y-auto",children:a.jsxs("div",{className:"pokemon-font text-sm leading-relaxed space-y-6",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(Su,{className:"w-5 h-5 text-blue-600"}),"1.  "]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border-2 border-blue-200",children:[a.jsxs("p",{className:"mb-2",children:[a.jsx("strong",{children:"TimeTrash.net ( )"}),"          ."]}),a.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[a.jsx("li",{children:"      "}),a.jsx("li",{children:"   "}),a.jsx("li",{children:"TOP 20  "}),a.jsx("li",{children:"   "}),a.jsx("li",{children:"  "})]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(Zv,{className:"w-5 h-5 text-green-600"}),"2.  "]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border-2 border-green-200",children:[a.jsx("p",{className:"mb-3",children:a.jsx("strong",{children:" :"})}),a.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1 mb-4",children:[a.jsx("li",{children:"   "}),a.jsx("li",{children:"   "}),a.jsx("li",{children:"  "}),a.jsx("li",{children:"  "})]}),a.jsx("p",{className:"mb-3",children:a.jsx("strong",{className:"text-red-600",children:" :"})}),a.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[a.jsx("li",{children:",  ,    "}),a.jsx("li",{children:", ,  "}),a.jsx("li",{children:"   "}),a.jsx("li",{children:"  "}),a.jsx("li",{children:"  "})]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(Hv,{className:"w-5 h-5 text-orange-600"}),"3.    "]}),a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border-2 border-orange-200",children:[a.jsx("p",{className:"mb-3",children:a.jsx("strong",{children:" :"})}),a.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1 mb-4",children:[a.jsx("li",{children:"  ,   "}),a.jsx("li",{children:"     "}),a.jsx("li",{children:"       "})]}),a.jsx("p",{className:"mb-3",children:a.jsx("strong",{children:" :"})}),a.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[a.jsx("li",{children:"       "}),a.jsx("li",{children:"      "}),a.jsx("li",{children:"     "})]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(nc,{className:"w-5 h-5 text-purple-600"}),"4.    "]}),a.jsx("div",{className:"bg-purple-50 p-4 rounded-lg border-2 border-purple-200",children:a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Google AdSense:"}),"     "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"     "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"   "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"          "]})]})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"5. "}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border-2 border-gray-200",children:a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:" :"})," TimeTrash.net  "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" :"}),"      "]}),a.jsxs("li",{children:[a.jsx("strong",{children:":"}),"     "]}),a.jsxs("li",{children:[a.jsx("strong",{children:":"})," Galmuri   3    "]})]})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"6.  "}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border-2 border-blue-200",children:[a.jsxs("p",{className:"mb-2",children:["  ",a.jsx("strong",{children:"2025 5 31"})," ."]}),a.jsx("p",{className:"mb-2",children:"        ."}),a.jsx("p",{className:"text-sm text-gray-600",children:"        ."})]})]}),a.jsxs("section",{className:"bg-yellow-50 p-4 rounded-lg border-2 border-yellow-300",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"   "}),a.jsxs("div",{className:"text-sm space-y-2",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"   :"}),"       .    ."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"  :"}),"       ,  ,      ."]}),a.jsxs("p",{children:[a.jsx("strong",{children:" :"}),"     ,   ."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"  :"}),' "     ?"    .']})]})]}),a.jsxs("div",{className:"text-center mt-8 pt-6 border-t-2 border-gray-200",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:[" ",a.jsx("strong",{children:"TimeTrash.net"})," -   "]}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'" .    ."'})]})]})}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:e,className:"pokemon-button",children:"  "})})]})}):null,IS=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(!1);return a.jsxs(a.Fragment,{children:[a.jsx("footer",{className:"pokemon-dialog mt-8 text-center",children:a.jsxs("div",{className:"pokemon-font text-sm space-y-4",children:[a.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-600",children:[a.jsxs("button",{onClick:()=>e(!0),className:"flex items-center gap-1 hover:text-blue-600 transition-colors",children:[a.jsx(tc,{className:"w-4 h-4"}),""]}),a.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-1 hover:text-green-600 transition-colors",children:[a.jsx(Dm,{className:"w-4 h-4"}),""]}),a.jsxs("a",{href:"https://github.com/pg-Parunson/timewaster",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:text-purple-600 transition-colors",children:[a.jsx(Xv,{className:"w-4 h-4"}),"GitHub"]})]}),a.jsx("div",{className:"border-t-2 border-gray-200 pt-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:" 2025 TimeTrash.net"}),a.jsx(qv,{className:"w-3 h-3 text-red-400"}),a.jsx("span",{children:"  "})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{children:"v2.8.0"}),a.jsx("span",{children:""}),a.jsx("span",{children:"React + Firebase"}),a.jsx("span",{children:""}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Am,{className:"w-3 h-3"}),"Contact via GitHub"]})]})]})})]})}),a.jsx(bS,{isOpen:t,onClose:()=>e(!1)}),a.jsx(TS,{isOpen:n,onClose:()=>r(!1)})]})},jS=[{minSeconds:120,message:"2 !   ! ",effects:["",""],color:"from-blue-400 to-cyan-400",animation:"bounce"},{minSeconds:300,message:"5 !   ! ",effects:["",""],color:"from-green-400 to-emerald-400",animation:"pulse"},{minSeconds:600,message:"10 !   ! ",effects:["",""],color:"from-yellow-400 to-orange-400",animation:"pulse"},{minSeconds:900,message:"15 !   ! ",effects:["","","","",""],color:"from-purple-400 to-pink-400",animation:"float"},{minSeconds:1500,message:"25 !   ! ",effects:["","","","","",""],color:"from-indigo-400 to-purple-400",animation:"rainbow"},{minSeconds:2400,message:"40 !   ! ",effects:["","","","","",""],color:"from-red-400 to-orange-400",animation:"shake"},{minSeconds:3600,message:"1 !   ! ",effects:["","","","","","",""],color:"from-pink-400 to-red-400",animation:"mega"},{minSeconds:5400,message:"90 !   ! ",effects:["","","","","","",""],color:"from-cyan-400 to-pink-400",animation:"unicorn"},{minSeconds:7200,message:"2 !   ! ",effects:["","","","","","","",""],color:"from-purple-600 to-red-600",animation:"dragon"}],RS=t=>{const e=k.useRef(new Set),[n,r]=k.useState(null),[s,i]=k.useState(!1),o=k.useRef(!1),l=k.useRef(null),c=k.useRef(0),u=()=>{i(!1),r(null),o.current=!1,l.current&&(clearTimeout(l.current),l.current=null)};k.useEffect(()=>{if(c.current===t||(c.current=t,o.current))return;const d=jS.filter(f=>t>=f.minSeconds&&!e.current.has(f.minSeconds));if(d.length>0){const f=d[d.length-1];o.current=!0,e.current.add(f.minSeconds),r(f),i(!0),l.current=setTimeout(()=>{u()},4500);try{typeof gtag<"u"&&gtag("event","safe_milestone_achieved",{event_category:"engagement",milestone_seconds:f.minSeconds,milestone_message:f.message})}catch{}}},[t]);const h=()=>{u()};return k.useEffect(()=>()=>{u()},[]),{showCelebration:s,currentCelebration:n,handleCelebrationComplete:h}},Ot={incrementVisits:()=>{const t=parseInt(localStorage.getItem("timewaster_visits")||"0")+1;return localStorage.setItem("timewaster_visits",t.toString()),t},getTotalTimeWasted:()=>parseInt(localStorage.getItem("timewaster_total_time")||"0"),updateTotalTimeWasted:t=>{const n=Ot.getTotalTimeWasted()+t;return localStorage.setItem("timewaster_total_time",n.toString()),n},getAdClicks:()=>parseInt(localStorage.getItem("timewaster_ad_clicks")||"0"),incrementAdClicks:()=>{const t=Ot.getAdClicks()+1;return localStorage.setItem("timewaster_ad_clicks",t.toString()),t},getAllData:()=>({visits:parseInt(localStorage.getItem("timewaster_visits")||"0"),totalTimeWasted:Ot.getTotalTimeWasted(),adClicks:Ot.getAdClicks()})};class MS{constructor(){this.listeners=new Map,this.isFirebaseConnected=Go,this.localStats={totalVisits:0,totalTimeWasted:0,activeSessions:0}}async incrementVisits(){try{if(this.isFirebaseConnected){const e=Y(V,"global-stats/totalVisits"),s=((await fn(e)).val()||0)+1;return await We(e,s),s}else return this.localStats.totalVisits+=1,localStorage.setItem("global_stats",JSON.stringify(this.localStats)),this.localStats.totalVisits}catch{return this.localStats.totalVisits||1}}async addTimeWasted(e){try{if(this.isFirebaseConnected){const n=Y(V,"global-stats/totalTimeWasted");return await We(n,nS(e)),(await fn(n)).val()||0}else return this.localStats.totalTimeWasted+=e,localStorage.setItem("global_stats",JSON.stringify(this.localStats)),this.localStats.totalTimeWasted}catch{return 0}}async getActiveSessions(){try{if(this.isFirebaseConnected){const e=Y(V,J.SESSIONS),n=await fn(e);if(!n.exists())return 1;const r=Object.values(n.val()),i=Date.now()-5*1e3,o=r.filter(l=>{if(!l.isActive)return!1;const c=l.lastHeartbeat;return typeof c=="object"&&c.seconds?c.seconds*1e3>i:typeof c=="number"?c>i:!1}).length;return Math.max(1,o)}else{const e=new Date().getHours();let n=2,r=1;e>=9&&e<=12?r=1.3:e>=14&&e<=18?r=1.5:e>=19&&e<=23?r=1.8:e>=0&&e<=2?r=1.2:r=.8;const s=(Math.random()-.5)*3;return Math.max(1,Math.min(12,Math.round(n*r+s)))}}catch{return 1}}async getGlobalStats(){try{if(this.isFirebaseConnected){const e=Y(V,"global-stats"),n=await fn(e);if(!n.exists()){const i={totalVisits:1,totalTimeWasted:0,lastUpdated:Date.now()};return await We(e,i).catch(o=>{}),{...i,activeSessions:1}}const r=n.val(),s=await this.getActiveSessions();return{totalVisits:r.totalVisits||0,totalTimeWasted:r.totalTimeWasted||0,activeSessions:s,lastUpdated:r.lastUpdated}}else{const e=localStorage.getItem("global_stats");e&&(this.localStats=JSON.parse(e));const n=await this.getActiveSessions();return{totalVisits:this.localStats.totalVisits||0,totalTimeWasted:this.localStats.totalTimeWasted||0,activeSessions:n,lastUpdated:Date.now()}}}catch{return{totalVisits:1,totalTimeWasted:0,activeSessions:1,lastUpdated:Date.now()}}}onStatsChange(e){if(this.isFirebaseConnected){const n=Y(V,"global-stats"),r=qn(n,async s=>{const i=s.val()||{},o=await this.getActiveSessions();e({totalVisits:i.totalVisits||0,totalTimeWasted:i.totalTimeWasted||0,activeSessions:o,lastUpdated:i.lastUpdated||Date.now()})});return this.listeners.set("stats",r),()=>this.removeListener("stats")}else{const n=async()=>{const s=await this.getGlobalStats();e(s)};n();const r=setInterval(n,3e4);return this.listeners.set("stats",r),()=>{clearInterval(r),this.listeners.delete("stats")}}}onActiveSessionsChange(e){if(this.isFirebaseConnected){const n=Y(V,J.SESSIONS),r=qn(n,async s=>{const i=await this.getActiveSessions();e(i)});return this.listeners.set("activeSessions",r),()=>this.removeListener("activeSessions")}else{const n=async()=>{const s=await this.getActiveSessions();e(s)};n();const r=setInterval(n,2e3);return this.listeners.set("activeSessions",r),()=>{clearInterval(r),this.listeners.delete("activeSessions")}}}removeListener(e){if(this.listeners.has(e)){const n=this.listeners.get(e);this.isFirebaseConnected?As(Y(V),"value",n):clearInterval(n),this.listeners.delete(e)}}removeAllListeners(){this.listeners.forEach((e,n)=>{this.removeListener(n)})}async updateOnSessionEnd(e){try{e>0&&await this.addTimeWasted(e)}catch{}}}const hr=new MS,gf=["...  .   ?","    ","       ...","      ","      ... ","   ? ,   ","     ..."," ?  ","     ","     ... ","      ","  ... ","      ?"," =      ?","...    ","      ...","      ","    ","   30   ...","       ","...    ","     ","  ... ?"," ''   ?","     990...","    ","    ?","   ","     ","     ... ","     "," ...     ","    ","    ?","      "," ...  ","     ","   ","  ? ?"," .  ","      ","    ","/    ...  ","      ",": ? : ...  "," ...   ","   ? ?","  ","     ?","    ... ?","     ?","     ... ","     "," ...  ?","       ...","      ","  '  '  ","   ...   ","  !  ''  ","   ...   "],Mt={rank1:[" !   ! ... ?"," 1 !    ...","   "," ...  .  1"," 1!    ?"],topRank:[" 2! 1   ?"," 3 !   ?","  !    ..."," !     ","  !    "],top10:[" 10!   ","  10!     ","  !   ?","  !  ","  !    ..."],firstRank:["  !   ","  !   ","  !   ","  !   ","  ! ... ?"],rankUp:["  UP!    ","  !    ..."," !    "," !     ..."," !     "],endurance:["    ! !","  !    ?","  !   ?","  !   ","  !     "]},PS={dawn:[" ?   ?"," ?    ","      ","  ? ","?    "],morning:[" ...  ","    ?","   ... ","     ?","  ?"],afternoon:["    ...  ","  !  !","   ... "," 3 ?   ","  ...  "],evening:["  ...  ","    ?","  ?  ","    ?","    "]},m0=(t,e)=>{const n=Math.floor(e/60);return t===1?Mt.rank1[Math.floor(Math.random()*Mt.rank1.length)]:t<=3?Mt.topRank[Math.floor(Math.random()*Mt.topRank.length)]:t<=10?Mt.top10[Math.floor(Math.random()*Mt.top10.length)]:n>=30?Mt.endurance[Math.floor(Math.random()*Mt.endurance.length)]:Mt.firstRank[Math.floor(Math.random()*Mt.firstRank.length)]},DS=()=>{const t=new Date().getHours();let e="morning";t>=0&&t<7?e="dawn":t>=7&&t<13?e="morning":t>=13&&t<19?e="afternoon":e="evening";const n=PS[e];return n[Math.floor(Math.random()*n.length)]},AS=()=>gf[Math.floor(Math.random()*gf.length)],OS=(t,e={})=>{const n=p0(t,e),r=[`${n.timeSpent}   ? ...`,`  "${n.activities[0]}"    `,`${n.message} -  !`,`  : ${n.brainState}.  !`,`${n.difficulty}   ... ?`,"      ... ","      ?","   ?  ?"];return n.personalizedTip&&r.push(`  : ${n.personalizedTip}  !`),{message:r[Math.floor(Math.random()*r.length)],activityRecommendation:n,theme:_S[n.category]}},LS=(t,e=null,n={})=>{const r=Math.random();if(e&&r<.2)return{type:"ranking",message:m0(e,t),category:"ranking"};if(r<.6){const s=OS(t,n);return{type:"smart",message:s.message,category:"activity",recommendation:s.activityRecommendation,theme:s.theme}}return r<.8?{type:"timeBased",message:DS(),category:"timeOfDay"}:{type:"roast",message:AS(),category:"general"}},Ui=["...  1    ","      !","    ~ ","...     "," +  =  ?"," !    ","    ","?  ?      !","     ? "," !     !","   !"," !       ","     ...  ?","    ? ","    !    ~"],FS=()=>{const[t]=k.useState(Date.now()),[e,n]=k.useState(0),[r,s]=k.useState("...   ?  !"),[i,o]=k.useState(null),[l,c]=k.useState("...   ?  !"),[u,h]=k.useState({visits:1,patterns:{}}),[d,f]=k.useState(la[0]),[y,x]=k.useState(!1),[_,N]=k.useState(Ui[0]),[p,m]=k.useState(1),[g,w]=k.useState(0),[E,j]=k.useState(0),[R,I]=k.useState(!1),[W,D]=k.useState(!0),[q,se]=k.useState(!1),[Ae,nt]=k.useState(!1),[rt,Qe]=k.useState(1),[pe,v]=k.useState(null),[S,b]=k.useState(!1),[A,U]=k.useState(null),[le,$]=k.useState(0),Ce=k.useRef(null),me=k.useCallback(ee=>{if(Ce.current&&(clearTimeout(Ce.current),Ce.current=null),!ee||typeof ee!="string"){c(" .  ."),nt(!1);return}nt(!0),c("");const H=Array.from(ee);let P="",ve=0;const $e=()=>{ve<H.length?(P+=H[ve],c(P),ve++,Ce.current=setTimeout($e,20+Math.random()*15)):nt(!1)};$e()},[]),jt=k.useCallback(async ee=>{if(S)try{const H=await Ct.getExpectedRank(ee),P=A;if(U(H),P&&H<P&&H<=10){const ve=Math.floor(ee/60);if(pS(H,ve,pe==null?void 0:pe.anonymousName),Math.random()<.3){const $e=m0(H,ee);s($e),me($e)}}}catch{}},[S,A,pe,me]),is=k.useCallback(()=>{if(e<10){const P=" !     ";s(P),o(null),me(P);return}const ee={visits:p,timeSpent:e,adClicks:E,patterns:{frequentVisitor:p>=3,longTimeUser:e>=1800,extremeUser:q}};h(ee);const H=LS(e,A,ee);if(s(H.message),o(H),me(H.message),Math.random()<.4){const P=la[Math.floor(Math.random()*la.length)];f(P)}I(!0),setTimeout(()=>I(!1),500)},[e,p,E,q,A,me]);return k.useEffect(()=>{(async()=>{try{const H=await hr.incrementVisits();m(H);const P=await hr.getGlobalStats();w(Math.floor(P.totalTimeWasted/60));const ve=Ot.getAllData();j(ve.adClicks);const $e=hr.onStatsChange(Si=>{m(Si.totalVisits),w(Math.floor(Si.totalTimeWasted/60))}),Ln=hr.onActiveSessionsChange(Si=>{Qe(Si)});return Nn.trackSessionStart(H,P.totalTimeWasted),()=>{$e(),Ln()}}catch{const P=Ot.incrementVisits(),ve=Ot.getAllData();m(P),w(ve.totalTimeWasted),j(ve.adClicks),Nn.trackSessionStart(P,ve.totalTimeWasted)}})()},[]),k.useEffect(()=>((async()=>{try{const H=await Ct.initializeSession();v(H),b(!0)}catch{b(!1)}})(),()=>{S&&(Ct.endSession(),hr.updateOnSessionEnd(e))}),[]),k.useEffect(()=>{const ee=setTimeout(()=>{me(r)},100);return()=>clearTimeout(ee)},[]),k.useEffect(()=>{const ee=setInterval(()=>{if(W){const H=Date.now(),P=Math.floor((H-t)/1e3);if(n(P),S&&P>0){if(Ct.updateTime(P),P===60||P===180||P===300||P===600||P===900||P===1800||P===3600){const ve=Math.floor(P/60);fS(ve,pe==null?void 0:pe.anonymousName)}if(P>60&&P%30===0&&P!==le&&($(P),jt(P)),P>30&&P%30===0&&Math.random()<.3){const $e=p0(P).activities[0]||" ";mS(`${P}  "${$e}"  ...`,pe==null?void 0:pe.anonymousName)}}P>=60&&!y&&x(!0),P>=300&&!q&&(se(!0),Nn.trackExtremeMode()),P>0&&P%45===0&&is()}},1e3);return()=>clearInterval(ee)},[t,W,y,q,S,pe,le,jt,is]),k.useEffect(()=>{if(!y||Ae)return;const ee=Math.floor(e/60),H=Math.min(ee-1,Ui.length-1);if(H>=0&&H<Ui.length){const P=Ui[H];N(P)}},[y,Ae,Math.floor(e/60)]),k.useEffect(()=>{const ee=()=>{const H=!document.hidden;D(H),H?document.title="    ":document.title="...  -  "};return document.addEventListener("visibilitychange",ee),()=>document.removeEventListener("visibilitychange",ee)},[]),k.useEffect(()=>{const ee=H=>{if(e>60){Ot.updateTotalTimeWasted(e),hr.updateOnSessionEnd(e);const P="  ?    ... !";return H.preventDefault(),H.returnValue=P,P}};return window.addEventListener("beforeunload",ee),()=>window.removeEventListener("beforeunload",ee)},[e]),{startTime:t,elapsedTime:e,currentMessage:r,currentMessageData:i,displayMessage:l,userHistory:u,buttonText:d,showAd:y,adMessage:_,visits:p,totalTimeWasted:g,adClicks:E,messageShake:R,isPageVisible:W,extremeMode:q,isTyping:Ae,concurrentUsers:rt,currentUser:pe,isRankingInitialized:S,currentRank:A,typeMessage:me,refreshMessage:is,checkCurrentRanking:jt,setCurrentMessage:s,setCurrentMessageData:o,setDisplayMessage:c,setButtonText:f,setAdMessage:N,setAdClicks:j,setMessageShake:I}},zS=({elapsedTime:t,adClicks:e,setAdClicks:n,totalTimeWasted:r,visits:s,isRankingInitialized:i,currentUser:o,premiumTokens:l,setPremiumTokens:c,adCooldownInfo:u,setAdCooldownInfo:h})=>{const[d,f]=k.useState(!1),[y,x]=k.useState({}),[_,N]=k.useState(!1),p=(I,W,D="info",q=!1)=>{x({title:I,message:W,type:D,showCancel:q}),f(!0)};return{showModal:d,modalConfig:y,showRankingModal:_,showModernModal:p,handleActivitySelect:I=>{I==="start_activity"?p(" !","   !    . ...      ","success"):(p("  !",`"${I}"   !   .    ...`,"info"),Nn.trackActivitySelect(I,t))},handleProductClick:()=>{if(!u.canGetToken){p("  !",` ${Math.ceil(u.cooldown/1e3)} !  `,"warning");return}const I=h0(t);Nn.trackCoupangClick(I.name,I.category,t,e+1),window.open(I.url,"_blank"),c&&c(se=>se+1),h&&h({cooldown:3e4,canGetToken:!1});const W=[`${I.icon} ${I.name}  !     !`,`! ${I.category}    !`,`${I.name}   !`,`! ${I.category}    !`,` ! ${I.name}   !`],D=W[Math.floor(Math.random()*W.length)];p("  !",D,"success");const q=Ot.incrementAdClicks();n(q)},handleExit:()=>{N(!0)},handleRankingModalClose:()=>{N(!1)},handleRankingModalExit:()=>{N(!1),p(" ?","    ?       !","exit",!0)},confirmExit:()=>{Nn.trackExit(t),Ot.updateTotalTimeWasted(t),f(!1),N(!1),i&&Ct.endSession(),setTimeout(()=>{window.history.length>1?window.history.back():window.location.reload()},100)},setShowModal:f,setShowRankingModal:N}},yf=t=>{const e=Math.floor(t/60);return e<1?{color:"var(--pokemon-orange)",textShadow:"4px 4px 0px var(--pokemon-navy), -2px -2px 0px var(--pokemon-white)"}:e<3?{color:"#FFD700",textShadow:"4px 4px 0px #B8860B, -2px -2px 0px var(--pokemon-white)"}:e<5?{color:"#FF8C00",textShadow:"4px 4px 0px #CC4400, -2px -2px 0px var(--pokemon-white)"}:e<10?{color:"#FF4444",textShadow:"4px 4px 0px #CC0000, -2px -2px 0px var(--pokemon-white)"}:e<15?{color:"#CC0000",textShadow:"4px 4px 0px #800000, -2px -2px 0px var(--pokemon-white)"}:{color:"#8B00FF",textShadow:"4px 4px 0px #4B0080, -2px -2px 0px var(--pokemon-white)"}},vf=["    "," ?  ","   "," 24    ?","   "," -100%  ","   ","   ","   ","    "],$S=()=>{const[t,e]=k.useState(0),[n,r]=k.useState(!1);return k.useEffect(()=>{const s=setInterval(()=>{r(!0),setTimeout(()=>{e(i=>(i+1)%vf.length),r(!1)},500)},1e4);return()=>clearInterval(s)},[]),{currentSubtitle:vf[t],isAnimating:n}},BS=t=>{const e={warning:"bg-red-50 border-red-300 text-red-800",motivation:"bg-blue-50 border-blue-300 text-blue-800",funny:"bg-green-50 border-green-300 text-green-800",sarcastic:"bg-yellow-50 border-yellow-300 text-yellow-800",urgent:"bg-orange-50 border-orange-300 text-orange-800",default:"bg-gray-50 border-gray-300 text-gray-800"};return e[t]||e.default};function WS(){const[t,e]=k.useState({cooldown:0,canGetToken:!0}),[n,r]=k.useState(0),[s,i]=k.useState(0),[o,l]=k.useState(!1),[c,u]=k.useState(300);k.useEffect(()=>{if(t.cooldown>0){const P=setInterval(()=>{e(ve=>{const $e=Math.max(0,ve.cooldown-1e3);return{cooldown:$e,canGetToken:$e===0}})},1e3);return()=>clearInterval(P)}},[t.cooldown]);const{currentSubtitle:h,isAnimating:d}=$S(),{elapsedTime:f,currentMessage:y,currentMessageData:x,displayMessage:_,buttonText:N,showAd:p,adMessage:m,visits:g,totalTimeWasted:w,adClicks:E,messageShake:j,extremeMode:R,isTyping:I,concurrentUsers:W,currentUser:D,isRankingInitialized:q,refreshMessage:se,setAdClicks:Ae}=FS(),{showModal:nt,modalConfig:rt,showRankingModal:Qe,showModernModal:pe,handleActivitySelect:v,handleProductClick:S,handleExit:b,handleRankingModalClose:A,handleRankingModalExit:U,confirmExit:le,setShowModal:$}=zS({elapsedTime:f,adClicks:E,setAdClicks:Ae,totalTimeWasted:w,visits:g,isRankingInitialized:q,currentUser:D,premiumTokens:s,setPremiumTokens:i,adCooldownInfo:t,setAdCooldownInfo:e}),Ce=(P=300)=>{l(!0),u(P)},me=()=>{l(!1)},jt=()=>{l(!1)},{showCelebration:is,currentCelebration:ee,handleCelebrationComplete:H}=RS(f);return k.useEffect(()=>{const P=`
      /* Galmuri   import   */
      
      /*   ()    */
      * {
        caret-color: transparent !important;
      }
      
      /*      -  ! */
      :root {
        --pokemon-gold: #FFD700;
        --pokemon-orange: #FF6B35;
        --pokemon-navy: #003366;
        --pokemon-black: #000000;
        --pokemon-white: #FFFFFF;
        --pokemon-bg: #E8F4FD;
        --pokemon-shadow: #2C5AA0;
        --pokemon-border: #1E3A8A;
        --pokemon-text: #1A1A1A;
        --pokemon-light-blue: #B3D9FF;
      }
      
      /*    - Galmuri ( ) */
      .pokemon-font {
        font-family: 'Galmuri11', 'Galmuri9', monospace;
        font-weight: normal;
        /*   -  */
      }
      
      .pokemon-title {
        font-family: 'Galmuri14', 'Galmuri11', monospace;
        font-weight: bold;
        font-size: 2.5rem;
        color: var(--pokemon-orange);
        text-shadow: 
          3px 3px 0px var(--pokemon-navy),
          -1px -1px 0px var(--pokemon-white);
        letter-spacing: 2px;
      }
      
      /*    */
      .pokemon-subtitle {
        font-family: 'Galmuri11', 'Galmuri9', monospace;
        font-size: 1.1rem;
        color: var(--pokemon-navy);
        text-shadow: 1px 1px 0px var(--pokemon-white);
        transition: opacity 0.5s ease, transform 0.5s ease;
        min-height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .pokemon-subtitle.animating {
        opacity: 0;
        transform: translateY(-10px);
      }
      
      .pokemon-subtitle:not(.animating) {
        opacity: 1;
        transform: translateY(0);
      }
      
      /*    -  ! */
      .pokemon-dialog {
        background: var(--pokemon-white);
        color: var(--pokemon-text);
        border: 3px solid var(--pokemon-black);
        border-radius: 8px;
        padding: 20px;
        /*    -  */
        box-shadow: 4px 4px 0px rgba(0,0,0,0.3);
      }
      
      /*    -  ! */
      .pokemon-button {
        background: linear-gradient(135deg, var(--pokemon-gold) 0%, var(--pokemon-orange) 100%);
        color: var(--pokemon-black);
        border: 3px solid var(--pokemon-black);
        border-radius: 8px;
        padding: 12px 24px;
        font-family: 'Galmuri11', 'Galmuri9', monospace;
        font-weight: bold;
        font-size: 1rem;
        cursor: pointer;
        min-height: 44px; /*     */
        box-shadow: 3px 3px 0px rgba(0,0,0,0.4);
        transition: all 0.15s ease;
        position: relative;
        overflow: hidden;
      }
      
      .pokemon-button:hover {
        transform: translateY(-2px);
        box-shadow: 5px 5px 0px rgba(0,0,0,0.4);
        background: linear-gradient(135deg, #FFDC00 0%, #FF8C42 100%); /*    */
      }
      
      .pokemon-button:active {
        transform: translateY(1px);
        box-shadow: 2px 2px 0px rgba(0,0,0,0.4);
      }
      
      /*     */
      .pokemon-button:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.5), 3px 3px 0px rgba(0,0,0,0.4);
      }
      
      /*    -  () */
      @keyframes pokemon-danger-blink {
        0%, 50% { 
          background-color: rgba(59, 130, 246, 0.2);
          border-color: #3B82F6;
        }
        51%, 100% { 
          background-color: transparent;
          border-color: var(--pokemon-black);
        }
      }
      
      .pokemon-danger {
        animation: pokemon-danger-blink 1.5s infinite;
      }
      
      /*    -   */
      @keyframes pokemon-ad-blink {
        0%, 50% { 
          background-color: rgba(34, 197, 94, 0.08);
          border-color: rgba(34, 197, 94, 0.2);
        }
        51%, 100% { 
          background-color: transparent;
          border-color: var(--pokemon-black);
        }
      }
      
      .pokemon-ad-blink {
        animation: pokemon-ad-blink 2.2s infinite;
      }
      
      /*    */
      @keyframes pokemon-typing {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0; }
      }
      
      .pokemon-typing::after {
        content: "";
        animation: pokemon-typing 0.8s infinite;
        color: var(--pokemon-black);
      }
      
      /*     -   ! */
      .pokemon-screen {
        background: 
          linear-gradient(135deg, var(--pokemon-bg) 0%, #F0F8FF 50%, var(--pokemon-light-blue) 100%),
          radial-gradient(circle at 25% 25%, rgba(255, 215, 0, 0.1) 0%, transparent 50%);
        min-height: 100vh;
        position: relative;
      }
      
      /*     -     */
      .pokemon-window {
        background: var(--pokemon-white);
        border: 6px solid var(--pokemon-black);
        border-radius: 12px;
        box-shadow: 
          inset 4px 4px 0px rgba(255,255,255,0.5),
          inset -4px -4px 0px rgba(0,0,0,0.3),
          8px 8px 16px rgba(0,0,0,0.4);
      }
      
      /* PC    -     */
      .pokemon-grid {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr 1.4fr; /* :: = 1.2:0.8:1.4  ( ) */
        gap: 24px;
        padding: 28px;
      }
      
      @media (max-width: 1200px) {
        .pokemon-grid {
          grid-template-columns: 1fr;
          gap: 20px;
          padding: 20px;
        }
      }
      
      @media (max-width: 768px) {
        .pokemon-grid {
          gap: 16px;
          padding: 16px;
        }
      }
      
      /*     -  ! */
      .pokemon-stats {
        background: linear-gradient(90deg, var(--pokemon-navy) 0%, var(--pokemon-border) 100%);
        color: var(--pokemon-white);
        border: 3px solid var(--pokemon-black);
        border-radius: 8px;
        padding: 16px 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
        /*   */
        box-shadow: 3px 3px 0px rgba(0,0,0,0.3);
      }
      
      /*    -   &  ! */
      .pokemon-timer {
        font-family: 'Galmuri14', 'Galmuri11', monospace;
        font-weight: bold;
        font-size: clamp(2.5rem, 5vw, 4rem); /*   */
        /* color text-shadow JavaScript   */
        text-align: center;
        padding: 24px;
        background: var(--pokemon-white);
        border: 4px solid var(--pokemon-black);
        border-radius: 12px;
        min-height: 120px; /*    */
        display: flex;
        align-items: center;
        justify-content: center;
        transition: color 0.5s ease, text-shadow 0.5s ease; /*    */
        /*     */
        box-shadow: 4px 4px 0px rgba(0,0,0,0.4);
      }
      
      /*     - 20  +   */
      .pokemon-ranking {
        background: var(--pokemon-white);
        border: 4px solid var(--pokemon-black);
        border-radius: 8px;
        max-height: 650px; /* 600px 650px  */
        max-width: 100%;
        overflow-x: hidden;
        overflow-y: auto;
        word-wrap: break-word;
      }
      
      .pokemon-ranking::-webkit-scrollbar {
        width: 8px;
      }
      
      .pokemon-ranking::-webkit-scrollbar-track {
        background: var(--pokemon-white);
        border: 1px solid var(--pokemon-black);
      }
      
      .pokemon-ranking::-webkit-scrollbar-thumb {
        background: var(--pokemon-orange);
        border: 1px solid var(--pokemon-black);
        border-radius: 4px;
      }
      
      /*     */
      .pokemon-celebration {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
        text-align: center;
        background: var(--pokemon-white);
        border: 6px solid var(--pokemon-black);
        border-radius: 16px;
        padding: 32px;
        box-shadow: 
          inset 4px 4px 0px rgba(255,255,255,0.5),
          inset -4px -4px 0px rgba(0,0,0,0.3),
          12px 12px 24px rgba(0,0,0,0.6);
      }
      
      /*    - ! */
      .pokemon-hover:hover {
        transform: translateY(-2px);
        /*    */
        box-shadow: 6px 6px 0px rgba(0,0,0,0.3);
        transition: all 0.2s ease;
      }
      
      /*     */
      .pokemon-message {
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }
      
      .pokemon-message::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
        transition: left 0.5s ease;
      }
      
      .pokemon-message:hover::before {
        left: 100%;
      }
      
      /*    */
      @media (max-width: 768px) {
        .pokemon-grid {
          padding: 12px;
          gap: 12px;
        }
        
        .pokemon-stats {
          flex-direction: column;
          gap: 8px;
          text-align: center;
          padding: 12px 16px;
        }
        
        .pokemon-title {
          font-size: 2rem;
        }
        
        .pokemon-button {
          width: 100%;
          justify-content: center;
        }
      }
      
      /*    */
      @keyframes slide-in-right {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      
      .animate-slide-in-right {
        animation: slide-in-right 0.3s ease-out;
      }
      
      @keyframes fly-across {
        from {
          transform: translateX(-100vw);
        }
        to {
          transform: translateX(100vw);
        }
      }
      
      .animate-fly-across {
        animation: fly-across 8s linear;
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      
      .animate-float {
        animation: float 3s ease-in-out infinite;
      }
      
      /*  VIP   -     */
      .vip-rank-container {
        overflow: hidden;
        position: relative;
      }
      
      /*      */
      .header-with-background {
        background-image: url('/images/header-background.jpeg'); /*   */
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        position: relative;
        overflow: hidden;
        
        /*     fallback  */
        background-color: var(--pokemon-white);
        
        /*     (  ) */
      }
      
      .header-with-background::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.7); /*    */
        z-index: 1;
      }
      
      .header-with-background > * {
        position: relative;
        z-index: 2; /*     */
      }
      
      /*       (   ) */
      .header-with-background.dark-image::before {
        background: rgba(0, 0, 0, 0.3); /*    */
      }
      
      .header-with-background.dark-image .pokemon-title {
        color: var(--pokemon-white);
        text-shadow: 
          3px 3px 0px var(--pokemon-black),
          -1px -1px 0px rgba(255, 255, 255, 0.2);
      }
      
      .header-with-background.dark-image .pokemon-subtitle {
        color: var(--pokemon-white);
        text-shadow: 2px 2px 0px var(--pokemon-black);
      }
      
      .header-with-background.dark-image .pokemon-font {
        color: var(--pokemon-white);
        text-shadow: 1px 1px 0px var(--pokemon-black);
      }
      
      /*   BGM   */
      .floating-bgm-controller {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 50;
        transition: all 0.3s ease;
      }
      
      .floating-bgm-controller:hover {
        transform: scale(1.05);
        bottom: 22px;
      }
      
      /*     */
      @keyframes bounce-in {
        0% {
          transform: translate(-50%, -50%) scale(0.3);
          opacity: 0;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.05);
        }
        70% {
          transform: translate(-50%, -50%) scale(0.9);
        }
        100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 1;
        }
      }
      
      .animate-bounce-in {
        animation: bounce-in 0.5s ease-out;
      }
      

    `,ve=document.createElement("style");ve.textContent=P,document.head.appendChild(ve);const $e=Ln=>{Ln.key==="Enter"||Ln.key===" "?(Ln.preventDefault(),se()):Ln.key==="Escape"&&(Ln.preventDefault(),b())};return document.addEventListener("keydown",$e),()=>{document.head.contains(ve)&&document.head.removeChild(ve),document.removeEventListener("keydown",$e)}},[se,b]),a.jsxs("div",{className:"pokemon-screen",children:[a.jsxs("div",{className:"pokemon-window max-w-[1500px] mx-auto my-8 relative",children:[a.jsxs("div",{className:"text-center py-6 border-b-4 border-black relative header-with-background",children:[a.jsxs("h1",{className:"pokemon-title mb-3",children:["  ",a.jsx("span",{className:"text-yellow-500",children:""})]}),a.jsx("p",{className:`pokemon-subtitle ${d?"animating":""}`,children:h}),a.jsxs("div",{className:"mt-4 pokemon-font text-sm text-gray-600",children:[" ",a.jsx("kbd",{className:"px-2 py-1 bg-gray-200 border border-gray-400 rounded text-xs",children:"SPACE"}),"   |  ",a.jsx("kbd",{className:"px-2 py-1 bg-gray-200 border border-gray-400 rounded text-xs ml-2",children:"ESC"}),"  "]})]}),a.jsxs("div",{className:"pokemon-stats",children:[a.jsxs("div",{className:"pokemon-font",children:[" : ",a.jsxs("span",{className:"text-yellow-300",children:[W,""]})]}),a.jsxs("div",{className:"pokemon-font",children:["  : ",a.jsxs("span",{className:"text-yellow-300",children:[g,""]})]}),a.jsxs("div",{className:"pokemon-font",children:[" : ",a.jsxs("span",{className:"text-yellow-300",children:[Math.floor(w),""]})]})]}),a.jsxs("div",{className:"pokemon-grid",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"pokemon-dialog pokemon-hover relative",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"pokemon-font text-xl text-gray-700 mb-2",children:"  "}),a.jsx("div",{className:`pokemon-timer ${R?"pokemon-danger":""}`,style:yf(f),children:Ut(f)})]}),R&&a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"pokemon-font text-lg animate-bounce",style:{color:yf(f).color},children:" !    !"})})]}),a.jsxs("div",{className:"pokemon-dialog pokemon-hover relative",children:[a.jsx("div",{className:"pokemon-font text-lg mb-4 text-gray-800",children:"  ..  "}),a.jsx("div",{className:`pokemon-message text-black text-lg font-bold leading-relaxed mb-6 p-4 rounded-lg border-2 ${BS((x==null?void 0:x.type)||"default")} ${I?"pokemon-typing":""}`,children:_}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:se,className:"pokemon-button",children:"  "})})]}),a.jsxs("div",{className:"pokemon-dialog pokemon-hover text-center bg-red-50 border-red-300",children:[a.jsx("div",{className:"pokemon-font text-xl mb-4 text-red-800 font-bold",children:"   "}),a.jsx("div",{className:"flex justify-center",children:a.jsx(dS,{elapsedTime:f,onExit:b,inline:!0,showAlways:!0})}),a.jsx("div",{className:"mt-3 text-sm text-red-600 pokemon-font",children:"    !"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(iS,{showAd:p,adMessage:m,extremeMode:R,elapsedTime:f,onProductClick:S,adCooldownInfo:t}),a.jsxs("div",{className:"pokemon-dialog pokemon-hover",children:[a.jsx("div",{className:"pokemon-font text-lg mb-4 text-gray-800",children:"   "}),a.jsx(cS,{elapsedTime:f,formatTime:Ut,showModernModal:pe})]})]}),a.jsxs("div",{className:"pokemon-dialog pokemon-hover",children:[a.jsx("div",{className:"pokemon-font text-lg mb-4 text-gray-800",children:"  "}),a.jsx("div",{className:"pokemon-ranking overflow-hidden",children:a.jsx(hS,{isVisible:!0,currentUser:D,elapsedTime:f})})]})]}),a.jsxs("div",{className:"pokemon-stats mt-6",children:[a.jsx("div",{className:"pokemon-font text-sm",children:"      !"}),a.jsx("div",{className:"pokemon-font text-sm",children:"    v1.0"})]}),a.jsx(IS,{})]}),a.jsx("div",{className:"floating-bgm-controller",children:a.jsx(NS,{elapsedTime:f,compact:!0})}),a.jsx(uS,{elapsedTime:f}),a.jsx(CS,{elapsedTime:f,onAdCooldownChange:e,chatTokens:n,setChatTokens:r,premiumTokens:s,setPremiumTokens:i}),!1,a.jsx(yS,{isVisible:!1,onOpenRankingTest:Ce}),a.jsx(aS,{isActive:is,celebration:ee,onComplete:H}),a.jsx(pf,{isOpen:Qe,onClose:A,onConfirm:le,onExit:U,elapsedTime:f,currentUser:D,totalTimeWasted:w,visits:g,adClicks:E}),a.jsx(pf,{isOpen:o,onClose:me,onConfirm:jt,onExit:me,elapsedTime:c,currentUser:D,totalTimeWasted:c*3,visits:Math.floor(c/60)+10,adClicks:Math.floor(c/180)+2}),a.jsx(oS,{isOpen:nt,onClose:()=>$(!1),onConfirm:rt.type==="exit"?le:()=>$(!1),title:rt.title,message:rt.message,type:rt.type,showCancel:rt.showCancel})]})}aa.createRoot(document.getElementById("root")).render(a.jsx(Mc.StrictMode,{children:a.jsx(WS,{})}));
